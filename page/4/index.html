<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Be a better man!">
<meta property="og:type" content="website">
<meta property="og:title" content="小黄">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="小黄">
<meta property="og:description" content="Be a better man!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小黄">
<meta name="twitter:description" content="Be a better man!">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>小黄</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小黄</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">黄小黄的幸福生活！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-java">
          <a href="/Java/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Java
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之堆排序与快速排序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之堆排序与快速排序/" itemprop="url">算法-堆排序与快速排序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h1><ul>
<li><p>堆是具有下列性质的完全二叉树：每个结点的值都大于或等于其左右孩子结点的值，称为大顶堆；或者每个结点的值都小于或等于其左右孩子结点的值，称为小顶堆。堆排序很适合在m个数中选择最大的k个数的问题。只需要进行k此调整就可以取出。</p>
</li>
<li><p>思路：</p>
<ul>
<li>首先需要构成一个大顶堆。</li>
<li>将堆首元素出堆，将堆尾元素放在堆首，然后对剩下的m-1个数进行成堆。</li>
</ul>
</li>
<li><p>Java实现：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">package sort;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/3/28</div><div class="line"> */</div><div class="line">public class HeapSort &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        int[] arr = &#123;53, 23, 45, 86, 12, 33, 10, 90, 36, 70, 43, 88, 60, 29&#125;;</div><div class="line">        System.out.println(&quot;排序之前： &quot; + Arrays.toString(arr));</div><div class="line">        heapSort(arr);</div><div class="line">        System.out.println(&quot;排序之后： &quot; + Arrays.toString(arr));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 堆排序方法</div><div class="line">     * @param arr 待排序的数组</div><div class="line">     */</div><div class="line">    private static void heapSort(int[] arr) &#123;</div><div class="line">        //1、创建大根堆，从第一个非叶子节点向堆首元素进行交换</div><div class="line">        for (int i = arr.length / 2; i &gt;= 0; i--) &#123;</div><div class="line">            heapAdjust(arr, i, arr.length);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //最后一个节点与root节点交换，然后调整成大根堆，</div><div class="line">        for (int i = arr.length - 1; i &gt; 0; i--) &#123;</div><div class="line">            swap(arr, 0, i);</div><div class="line">            heapAdjust(arr, 0, i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 构建堆的过程</div><div class="line">     * @param arr 需要排列的数组</div><div class="line">     * @param i 需要构建堆的根节点的序号</div><div class="line">     * @param length 堆元素的个数，随着出堆不断的减少</div><div class="line">     */</div><div class="line">    private static void heapAdjust(int[] arr, int i, int length) &#123;</div><div class="line">        int child;</div><div class="line">        for (int fathre = arr[i]; leftChild(i) &lt; length; i = child) &#123;</div><div class="line">            child = leftChild(i);</div><div class="line">            //选择节点i的较大的孩子节点</div><div class="line">            if (child != length - 1 &amp;&amp; arr[child] &lt; arr[child+1]) &#123;</div><div class="line">                child++;</div><div class="line">            &#125;</div><div class="line">            //如果父节点的值小于其较大的孩子节点，则交换二者的值</div><div class="line">            if (fathre &lt; arr[child]) &#123;</div><div class="line">                swap(arr, i, child);</div><div class="line">            &#125; else &#123;</div><div class="line">                break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void swap(int[] arr, int i, int j) &#123;</div><div class="line">        int tmp =arr[i];</div><div class="line">        arr[i] = arr[j];</div><div class="line">        arr[j] = tmp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static int leftChild(int i) &#123;</div><div class="line">        return 2 * i+ 1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h1><p>快速排序一般基于递归实现：</p>
<ul>
<li>选定一个合适的值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">package sort;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/3/28</div><div class="line"> */</div><div class="line">public class QuickSort &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        int[] arr = &#123;53, 23, 45, 86, 12, 33, 10, 90, 36, 70, 43, 88, 60, 29&#125;;</div><div class="line">        System.out.println(&quot;排序之前： &quot; + Arrays.toString(arr));</div><div class="line">        quickSort(arr);</div><div class="line">        System.out.println(&quot;排序之后： &quot; + Arrays.toString(arr));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void quickSort(int[] arr) &#123;</div><div class="line">        quickSortHelp(arr, 0, arr.length - 1);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void quickSortHelp(int[] arr, int low, int high) &#123;</div><div class="line">        if (low &lt; high) &#123;</div><div class="line">            int pivot = partition(arr, low, high);</div><div class="line">            quickSortHelp(arr, low, pivot - 1);</div><div class="line">            quickSortHelp(arr, pivot + 1, high);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static int partition(int[] arr, int low, int high) &#123;</div><div class="line">        int pivot = arr[low];</div><div class="line">        while (low &lt; high) &#123;</div><div class="line">            while (low &lt; high &amp;&amp; arr[high] &gt;= pivot)</div><div class="line">                high--;</div><div class="line">            arr[low] = arr[high];</div><div class="line">            while (low &lt; high &amp;&amp; arr[low] &lt;= pivot)</div><div class="line">                low++;</div><div class="line">            arr[high] = arr[low];</div><div class="line">        &#125;</div><div class="line">        arr[low] = pivot;</div><div class="line">        return low;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void swap(int[] arr, int low, int high) &#123;</div><div class="line">        int temp = arr[low];</div><div class="line">        arr[low] = arr[high];</div><div class="line">        arr[high] = temp;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之动态规划问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之动态规划问题/" itemprop="url">算法-动态规划</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="动态规划简介"><a href="#动态规划简介" class="headerlink" title="动态规划简介"></a>动态规划简介</h1><p>动态规划（英语：Dynamic programming，DP）是一种在数学、计算机科学和经济学中使用的，通过把原问题分解为相对简单的子问题的方式求解复杂问题的方法。 动态规划常常适用于有<code>重叠子问题</code>和<code>最优子结构性质</code>的问题，动态规划方法所耗时间往往远少于朴素解法。</p>
<p>动态规划问题，需要将给定问题分成若干个子问题，再合并子问题的解而得到原问题的解。通常许多子问题很相似，不同于递归方法，动态规划仅仅解决子问题一次，从而减少计算量：一旦某个子问题的解已经算出，则将其记忆化存储，以方便下一次需要同一个子问题解时直接返回。</p>
<p>动态规划需要满足的三个性质：</p>
<ol>
<li><p>最优子结构性质：问题的最优解所包含的子问题的解也是最优的，就称该问题具有最优子结构性质。</p>
</li>
<li><p>子问题重叠问题：递归算法自顶向下对问题进行求解过程中，每次产生的子问题并不总是新问题，有些子问题会重复计算多次。</p>
</li>
<li><p>无后效性：各个阶段按照一定顺序排列好之后，对于某个给定的状态，它以前各阶段的状态无法直接影响它未来的决策，而只能通过当前的状态。</p>
</li>
</ol>
<h1 id="斐波那契问题"><a href="#斐波那契问题" class="headerlink" title="斐波那契问题"></a>斐波那契问题</h1><p>递归算法的复杂度为2^n，而DP算法的时间复杂度为O(N)，原因在于递归算法过程中存在着大量的重叠子问题，随着N增大，问题规模呈指数增长。也可以采用记忆化搜索，每次求子问题的解之前先取数组中查看该子问题是否已经解决，如果解决了直接返回，没有解决将结果添加到数组中。记忆化搜索是自顶向下的思考问题，而DP则是自底向上的思考问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">public class Fib &#123;</div><div class="line">    //O(2^N)</div><div class="line">    public int fib(int n) &#123;</div><div class="line">        if (n == 0)</div><div class="line">            return 0;</div><div class="line">        if (n == 1)</div><div class="line">            return 1;</div><div class="line">        return fib(n-1) + fib(n-2);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //O(N)</div><div class="line">    public int fib2(int n) &#123;</div><div class="line">        int[] res = new int[n + 1];</div><div class="line">         res[0] = 0;</div><div class="line">        res[1] = 1;</div><div class="line">        for (int i = 2; i &lt; n+1; i++)&#123;</div><div class="line">            res[i] = res[i-1] + res[i-2];</div><div class="line">        &#125;</div><div class="line">        return res[n];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        Fib fib = new Fib();</div><div class="line">        long startTime = System.currentTimeMillis();</div><div class="line">        int n = 42;</div><div class="line">        System.out.println(&quot;fib(&quot; + n + &quot;) = &quot; + fib.fib(n));</div><div class="line">        System.out.println(&quot;time : &quot; + (System.currentTimeMillis() - startTime));</div><div class="line"></div><div class="line">        long startTime1 = System.currentTimeMillis();</div><div class="line">        System.out.println(&quot;fib(&quot; + n + &quot;) = &quot; + fib.fib2(n));</div><div class="line">        System.out.println(&quot;time : &quot; + (System.currentTimeMillis() - startTime1));</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="LeetCode相关题目"><a href="#LeetCode相关题目" class="headerlink" title="LeetCode相关题目"></a>LeetCode相关题目</h1><p>将自己做的LeetCode相关题目整理了一下，以方便以后复习查看。</p>
<h2 id="ClimbingStairs-70"><a href="#ClimbingStairs-70" class="headerlink" title="ClimbingStairs_70"></a>ClimbingStairs_70</h2><p>爬楼梯问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class ClimbingStairs_70 &#123;</div><div class="line">    //dp</div><div class="line">    public int climbStairs(int n) &#123;</div><div class="line">        int[] res = new int[n + 1];</div><div class="line">        res[1] = 1;</div><div class="line">        res[2] = 2;</div><div class="line">        for (int i = 3; i &lt;= n; i++) &#123;</div><div class="line">            res[i] = res[i-1] + res[i - 2];</div><div class="line">        &#125;</div><div class="line">        return res[n];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //递归</div><div class="line">    public int climbStairs1(int n) &#123;</div><div class="line">        if (n == 1)</div><div class="line">            return 1;</div><div class="line">        if (n == 2)</div><div class="line">            return 2;</div><div class="line">        return climbStairs1(n-1) + climbStairs1(n-2);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="CoinChange-322"><a href="#CoinChange-322" class="headerlink" title="CoinChange_322"></a>CoinChange_322</h2><p>无限数量的硬币，凑成给定的值，选取所需硬币个数最少的。</p>
<p>递归方法为组合问题，将所有可能的找出来，选出其中最少的。复杂度O(2^n * n)</p>
<p>DP方法，维护一个数组，长度为amount+1, 初始值设置为amount+1,状态转移方程为<code>dp[i] = min(dp[i], dp[i- coins[j] + 1])</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/12</div><div class="line"> */</div><div class="line">public class CoinChange_322 &#123;</div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        if (amount == 0)</div><div class="line">            return 0;</div><div class="line">        int n = amount + 1;</div><div class="line">        for (int coin : coins) &#123;</div><div class="line">            int curr = 0;</div><div class="line">            if (amount &gt;= coin) &#123;</div><div class="line">                int next = coinChange(coins, amount - coin);</div><div class="line">                if (next &gt;= 0)</div><div class="line">                    curr = 1 + next;</div><div class="line">            &#125;</div><div class="line">            if (curr &gt; 0)</div><div class="line">                n = Math.min(n, curr);</div><div class="line">        &#125;</div><div class="line">        return n == amount + 1 ? -1 : n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int coinChange1(int[] coins, int amount) &#123;</div><div class="line">        int[] dp = new int[amount + 1];</div><div class="line">        for (int i = 0; i &lt; dp.length; i++)</div><div class="line">            dp[i] = amount + 1;</div><div class="line">        dp[0] = 0;</div><div class="line">        for (int i = 1; i &lt;= amount; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; coins.length; j++) &#123;</div><div class="line">                if (coins[j] &lt;= i)</div><div class="line">                    dp[i] = Math.min(dp[i], dp[i - coins[j]] + 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dp[amount] &gt; amount ? -1 : dp[amount];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        System.out.println(new CoinChange_322().coinChange1(new int[]&#123;2&#125;, 3));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="BestTimeToBuyAndSellStockWithCoolDown-309"><a href="#BestTimeToBuyAndSellStockWithCoolDown-309" class="headerlink" title="BestTimeToBuyAndSellStockWithCoolDown_309"></a>BestTimeToBuyAndSellStockWithCoolDown_309</h2><p>题目是股票问题的变种，数组prices表示股票第i天的价格，可以多次买卖，限制只有手里没有股票时可以买，同时当你卖了股票，第二天不可以购买。股票问题其实比较简单，如果不限制第二天不可以买的话，就是一个简单的数组最大连续子数组和问题，添加之后需要，有三种状态，买，卖，休息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">public int maxProfit(int[] prices) &#123;</div><div class="line">    if (prices.length &lt;= 1)</div><div class="line">        return 0;</div><div class="line">    int[] s0 = new int[prices.length];</div><div class="line">    int[] s1 = new int[prices.length];</div><div class="line">    int[] s2 = new int[prices.length];</div><div class="line">    s1[0] = -prices[0];</div><div class="line">    s2[0] = Integer.MIN_VALUE;</div><div class="line">    for (int i = 1; i &lt; prices.length; i++) &#123;</div><div class="line">        s0[i] = Math.max(s0[i-1], s2[i-1]);</div><div class="line">        s1[i] = Math.max(s1[i-1], s0[i-1] - prices[i]);</div><div class="line">        s2[i] = s1[i-1] + prices[i];</div><div class="line">    &#125;</div><div class="line">    return Math.max(s0[prices.length - 1], s2[prices.length - 1]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="CombinationSumIV-377"><a href="#CombinationSumIV-377" class="headerlink" title="CombinationSumIV_377"></a>CombinationSumIV_377</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Given an integer array with all positive numbers and no duplicates, find the number of possible combinations that add up to a positive integer target.</div><div class="line"></div><div class="line">Example:</div><div class="line"></div><div class="line">nums = [1, 2, 3]</div><div class="line">target = 4</div><div class="line"></div><div class="line">The possible combination ways are:</div><div class="line">(1, 1, 1, 1)</div><div class="line">(1, 1, 2)</div><div class="line">(1, 2, 1)</div><div class="line">(1, 3)</div><div class="line">(2, 1, 1)</div><div class="line">(2, 2)</div><div class="line">(3, 1)</div><div class="line"></div><div class="line">Note that different sequences are counted as different combinations.</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/12</div><div class="line"> */</div><div class="line">public class CombinationSumIV_377 &#123;</div><div class="line">    public int combinationSum4(int[] nums, int target) &#123;</div><div class="line">        if (target == 0)</div><div class="line">            return 1;</div><div class="line">        int res = 0;</div><div class="line">        for (int i = 0; i &lt; nums.length; i++) &#123;</div><div class="line">            if (target &gt;= nums[i])</div><div class="line">                res += combinationSum4(nums, target - nums[i]);</div><div class="line">        &#125;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int combinationSum41(int[] nums, int target) &#123;</div><div class="line">        int[] dp = new int[target + 1];</div><div class="line">        dp[0] = 1;</div><div class="line">        for (int i = 1; i &lt; dp.length; i++) &#123;</div><div class="line">            for (int j = 0; j &lt;nums.length; j++) &#123;</div><div class="line">                if (i - nums[j] &gt;= 0)</div><div class="line">                    dp[i] += dp[i - nums[j]];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dp[target];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="最长公共子序列问题"><a href="#最长公共子序列问题" class="headerlink" title="最长公共子序列问题"></a>最长公共子序列问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/12</div><div class="line"> * 最长公共子序列</div><div class="line"> */</div><div class="line">public class LongestCommonSequence &#123;</div><div class="line"></div><div class="line">    //递归</div><div class="line">    public int longest(String s1, String s2) &#123;</div><div class="line">        if (s1.length() == 0 || s2.length() == 0)</div><div class="line">            return 0;</div><div class="line">        return longest(s1, s2, s1.length()-1, s2.length()-1);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int longest(String s1, String s2, int m, int n) &#123;</div><div class="line"></div><div class="line">        if (m &lt; 0 || n &lt; 0)</div><div class="line">            return 0;</div><div class="line">        if (s1.charAt(m) == s2.charAt(n))</div><div class="line">            return 1 + longest(s1,s2,m-1,n-1);</div><div class="line">        else</div><div class="line">            return Math.max(longest(s1,s2,m-1, n), longest(s1,s2,m,n-1));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        LongestCommonSequence LCS = new LongestCommonSequence();</div><div class="line">        String s1 = &quot;abcd&quot;;</div><div class="line">        String s2 = &quot;abcdefg&quot;;</div><div class="line">        System.out.println(LCS.longest(s1,s2));</div><div class="line">        System.out.println(LCS.longest2(s1,s2));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //DP</div><div class="line">    public int longest2(String s1, String s2) &#123;</div><div class="line">        if (s1.length() == 0 || s2.length() == 0)</div><div class="line">            return 0;</div><div class="line">        int len1 = s1.length();</div><div class="line">        int len2 = s2.length();</div><div class="line">        int[][] dp = new int[len1+1][len2+1];</div><div class="line">        for (int i = 0; i &lt;= len1; i++)</div><div class="line">            dp[i][0] = 0;</div><div class="line">        for (int i = 0; i &lt;= len2; i++)</div><div class="line">            dp[0][i] = 0;</div><div class="line">        for (int i = 1; i &lt;= len1; i++) &#123;</div><div class="line">            for (int j = 1; j &lt;= len2; j++) &#123;</div><div class="line">                if (s1.charAt(i-1) == s2.charAt(j-1))&#123;</div><div class="line">                    dp[i][j] = dp[i-1][j-1] + 1;</div><div class="line">                &#125; else &#123;</div><div class="line">                    dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1]);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dp[len1][len2];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="最长上升子序列问题"><a href="#最长上升子序列问题" class="headerlink" title="最长上升子序列问题"></a>最长上升子序列问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/12</div><div class="line"> * 最长上升子序列问题</div><div class="line"> */</div><div class="line">public class LongestIncreasingSubsequence_300 &#123;</div><div class="line">    //O(N^2)</div><div class="line">    public int lengthOfLIS(int[] nums) &#123;</div><div class="line">        if (nums.length == 0)</div><div class="line">            return 0;</div><div class="line">        int[] dp = new int[nums.length];</div><div class="line">        for (int i = 0; i &lt; dp.length; i++) &#123;</div><div class="line">            dp[i] = 1;</div><div class="line">        &#125;</div><div class="line">        for (int i = 1; i &lt; nums.length; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; i; j++) &#123;</div><div class="line">                if (nums[i] &gt; nums[j]) &#123;</div><div class="line">                    dp[i] = Math.max(dp[i], dp[j] + 1);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        System.out.println(Arrays.toString(dp));</div><div class="line">        int max = dp[0];</div><div class="line">        for (int i = 1; i &lt; dp.length; i++) &#123;</div><div class="line">            max = Math.max(dp[i], max);</div><div class="line">        &#125;</div><div class="line">        return max;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        int[] arr = &#123;1,3,6,7,9,4,10,5,6&#125;;</div><div class="line">        System.out.println(new LongestIncreasingSubsequence_300().lengthOfLIS(arr));</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="0-1背包问题"><a href="#0-1背包问题" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/12</div><div class="line"> * 0-1背包问题</div><div class="line"> */</div><div class="line">public class Knapsack01 &#123;</div><div class="line">    int[][] dp;</div><div class="line">    //递归</div><div class="line">    public int knapscak01(int[] w, int[] v, int C) &#123;</div><div class="line">        dp = new int[w.length][C + 1];</div><div class="line">        return bestValue(w,v, w.length-1,C);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int bestValue(int[] weight, int[] value, int index, int capacity) &#123;</div><div class="line">        if (index &lt; 0 || capacity &lt;= 0)</div><div class="line">            return 0;</div><div class="line">        int res = bestValue(weight, value, index - 1, capacity);</div><div class="line">        if (capacity &gt; weight[index])</div><div class="line">            res = Math.max(value[index] + bestValue(weight, value, index - 1, capacity - weight[index]), res);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //dp O(N*C) O(N*C)</div><div class="line">    public int knapscak01_2(int[] w, int[] v, int C) &#123;</div><div class="line">        int n = w.length;</div><div class="line">        if (n == 0)</div><div class="line">            return 0;</div><div class="line">        int[][] dp = new int[n][C + 1];</div><div class="line">        for (int j = 0; j &lt;= C; j++)</div><div class="line">            dp[0][j] = (j &gt;= w[0] ? v[0] : 0);</div><div class="line">        for (int i = 1; i &lt; n; i++) &#123;</div><div class="line">            for (int j = 0; j &lt;= C; j++) &#123;</div><div class="line">                dp[i][j] = dp[i-1][j];</div><div class="line">                if (j &gt;= w[i])</div><div class="line">                    dp[i][j] = Math.max(dp[i][j], v[i] + dp[i-1][j-w[i]]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dp[n-1][C];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //dp O(C) O(N*C)</div><div class="line">    public int knapscak01_3(int[] w, int[] v, int C) &#123;</div><div class="line">        int n = w.length;</div><div class="line">        if (n == 0)</div><div class="line">            return 0;</div><div class="line">        int[][] dp = new int[2][C + 1];</div><div class="line">        for (int j = 0; j &lt;= C; j++)</div><div class="line">            dp[0][j] = (j &gt;= w[0] ? v[0] : 0);</div><div class="line">        for (int i = 1; i &lt; n; i++) &#123;</div><div class="line">            for (int j = 0; j &lt;= C; j++) &#123;</div><div class="line">                dp[i%2][j] = dp[(i-1)%2][j];</div><div class="line">                if (j &gt;= w[i])</div><div class="line">                    dp[i%2][j] = Math.max(dp[i%2][j], v[i] + dp[(i-1)%2][j-w[i]]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dp[(n-1)%2][C];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //dp O(C) O(N*C)</div><div class="line">    public int knapscak01_4(int[] w, int[] v, int C) &#123;</div><div class="line">        int n = w.length;</div><div class="line">        if (n == 0)</div><div class="line">            return 0;</div><div class="line">        int[] dp = new int[C + 1];</div><div class="line">        for (int j = 0; j &lt;= C; j++)</div><div class="line">            dp[j] = (j &gt;= w[j] ? v[0] : 0);</div><div class="line">        for (int i = 1; i &lt; n; i++) &#123;</div><div class="line">            for (int j = C; j &gt;= w[i]; j--) &#123;</div><div class="line">                dp[j] = Math.max(dp[j], v[i] + dp[j-w[i]]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dp[C];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="完美平方数"><a href="#完美平方数" class="headerlink" title="完美平方数"></a>完美平方数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class PerfectSquares_279 &#123;</div><div class="line">    public int numSquares(int n) &#123;</div><div class="line">        int[] dp = new int[n+1];</div><div class="line">        for (int i = 0; i &lt;= n; i++)</div><div class="line">            dp[i] = Integer.MAX_VALUE;</div><div class="line">        dp[0] = 0;</div><div class="line">        dp[1] = 1;</div><div class="line">        for (int i = 2; i &lt;= n; i++) &#123;</div><div class="line">            for (int j = 1; j &lt;= (int)Math.sqrt(i); j++) &#123;</div><div class="line">                dp[i] = Math.min(dp[i], dp[i-j*j] + 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        System.out.println(Arrays.toString(dp));</div><div class="line">        return dp[n];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        System.out.println(new PerfectSquares_279().numSquares(13));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="机器人走路问题"><a href="#机器人走路问题" class="headerlink" title="机器人走路问题"></a>机器人走路问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class UniquePaths_62 &#123;</div><div class="line">    public int uniquePaths(int m, int n) &#123;</div><div class="line">        int[][] dp = new int[m+1][n+1];</div><div class="line">        for (int i = 0; i &lt; m; i++)</div><div class="line">            dp[i][0] = 0;</div><div class="line">        for (int j = 0; j &lt; n; j++)</div><div class="line">            dp[0][j] = 0;</div><div class="line">        for (int i = 1; i &lt;= m; i++) &#123;</div><div class="line">            for (int j = 1; j &lt;= n; j++) &#123;</div><div class="line">                if (i == 1 &amp;&amp; j == 1)</div><div class="line">                    dp[i][j] = 1;</div><div class="line">                else</div><div class="line">                    dp[i][j] = dp[i-1][j] + dp[i][j-1];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt;= m; i++)</div><div class="line">            System.out.println(Arrays.toString(dp[i]));</div><div class="line">        return dp[m][n];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        System.out.println(new UniquePaths_62().uniquePaths(3,7));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="间隔打劫问题"><a href="#间隔打劫问题" class="headerlink" title="间隔打劫问题"></a>间隔打劫问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class HouseRobber_198 &#123;</div><div class="line">    //dp[i]表示考虑抢劫nums[i...n]所获得的最大收益</div><div class="line">    int[] dp;</div><div class="line">    public int rob(int[] nums) &#123;</div><div class="line">        dp = new int[nums.length];</div><div class="line">        for (int i = 0; i &lt; dp.length; i++) &#123;</div><div class="line">            dp[i] = -1;</div><div class="line">        &#125;</div><div class="line">        return tryRob(nums, 0);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //考虑抢劫nums[index..nums.length]这个范围内的所有房子</div><div class="line">    private int tryRob(int[] nums, int index) &#123;</div><div class="line">        if (index &gt;= nums.length)</div><div class="line">            return 0;</div><div class="line">        if (dp[index] != -1)</div><div class="line">            return dp[index];</div><div class="line">        int res = 0;</div><div class="line">        for (int i = index; i &lt; nums.length; i++) &#123;</div><div class="line">            res = Math.max(res,nums[i] + tryRob(nums, i + 2));</div><div class="line">        &#125;</div><div class="line">        dp[index] = res;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //dp方法</div><div class="line">    public int rob1(int[] nums) &#123;</div><div class="line">        int n = nums.length;</div><div class="line">        if (n == 0)</div><div class="line">            return 0;</div><div class="line">        int[] dps = new int[n];</div><div class="line">        for (int i = 0; i &lt; n; i++)</div><div class="line">            dps[i] = -1;</div><div class="line">        dps[n-1] = nums[n-1];</div><div class="line">        for (int i = n -2; i &gt;= 0; i--) &#123;</div><div class="line">            for (int j = i; j &lt; n; j++) &#123;</div><div class="line">                dps[i] = Math.max(dps[i], nums[j] + (j+2 &lt; n ? dps [j+2] : 0));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return dps[0];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="间隔打劫问题2–收尾相连"><a href="#间隔打劫问题2–收尾相连" class="headerlink" title="间隔打劫问题2–收尾相连"></a>间隔打劫问题2–收尾相连</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">package leetcode.dp;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class HouseRobberII_213 &#123;</div><div class="line">    public int rob(int[] nums) &#123;</div><div class="line">        if (nums.length == 1)</div><div class="line">            return nums[0];</div><div class="line">        return Math.max(rob(nums, 0, nums.length - 2), rob(nums, 1, nums.length - 1));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int rob(int[] nums, int lo, int hi) &#123;</div><div class="line">        int include = 0, exclude = 0;</div><div class="line">        for (int j = lo; j &lt;= hi; j++) &#123;</div><div class="line">            int i = include, e = exclude;</div><div class="line">            include = e + nums[i];</div><div class="line">            exclude = Math.max(e, i);</div><div class="line">        &#125;</div><div class="line">        return Math.max(include, exclude);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之回溯法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之回溯法/" itemprop="url">算法-回溯法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="组合问题"><a href="#组合问题" class="headerlink" title="组合问题"></a>组合问题</h1><h2 id="返回C-n-k-的所有可能值"><a href="#返回C-n-k-的所有可能值" class="headerlink" title="返回C(n,k)的所有可能值"></a>返回C(n,k)的所有可能值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class Combinations_77 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; combine(int n, int k) &#123;</div><div class="line">        if (n &lt;= 0 || k &lt;= 0 || k &gt; n)</div><div class="line">            return res;</div><div class="line">        combine(n, k, 1, new ArrayList&lt;&gt;());</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 求解C(n,k),</div><div class="line">     * @param n</div><div class="line">     * @param k</div><div class="line">     * @param start</div><div class="line">     * @param list</div><div class="line">     */</div><div class="line">    private void combine(int n, int k, int start, List&lt;Integer&gt; list) &#123;</div><div class="line">        if (list.size() == k) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = start; i &lt;= n- (k - list.size()) + 1; i++) &#123;</div><div class="line">            list.add(i);</div><div class="line">            combine(n, k, i + 1, list);</div><div class="line">            list.remove(list.size() - 1);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="组合和等于target问题"><a href="#组合和等于target问题" class="headerlink" title="组合和等于target问题"></a>组合和等于target问题</h1><h2 id="给定一个数组-数组里面的值可以选无数次。"><a href="#给定一个数组-数组里面的值可以选无数次。" class="headerlink" title="给定一个数组,数组里面的值可以选无数次。"></a>给定一个数组,数组里面的值可以选无数次。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class CombinationSum_39 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target) &#123;</div><div class="line">        Arrays.sort(candidates);</div><div class="line">        combinationSum(candidates, target, new ArrayList&lt;&gt;(), 0);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void combinationSum(int[] candidates, int target, ArrayList&lt;Integer&gt; list, int pos) &#123;</div><div class="line">        if (target == 0) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        for (int i = pos; i &lt; candidates.length; i++) &#123;</div><div class="line">            if (target &lt; candidates[i]) &#123;</div><div class="line">                return;</div><div class="line">            &#125; else &#123;</div><div class="line">                list.add(candidates[i]);</div><div class="line">                combinationSum(candidates, target - candidates[i], list, i);</div><div class="line">                list.remove(list.size() - 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="给定一个数组，数组中的数只能用一次"><a href="#给定一个数组，数组中的数只能用一次" class="headerlink" title="给定一个数组，数组中的数只能用一次"></a>给定一个数组，数组中的数只能用一次</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.List;</div><div class="line">import java.util.Set;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class CombinationSumII_40 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; combinationSum2(int[] candidates, int target) &#123;</div><div class="line">        Arrays.sort(candidates);</div><div class="line">        combinationSum(candidates, target, new ArrayList&lt;&gt;(), 0);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void combinationSum(int[] candidates, int target, ArrayList&lt;Integer&gt; list, int pos) &#123;</div><div class="line">        if (target == 0) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        for (int i = pos; i &lt; candidates.length; i++) &#123;</div><div class="line">            if (i != pos &amp;&amp; candidates[i] == candidates[i-1])</div><div class="line">                continue;</div><div class="line">            if (target &lt; candidates[i]) &#123;</div><div class="line">                return;</div><div class="line">            &#125; else &#123;</div><div class="line">                list.add(candidates[i]);</div><div class="line">                combinationSum(candidates, target - candidates[i], list, i+1);</div><div class="line">                list.remove(list.size() - 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="从1-9中选取k个数和为n"><a href="#从1-9中选取k个数和为n" class="headerlink" title="从1-9中选取k个数和为n"></a>从1-9中选取k个数和为n</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class CombinationSumIII_216 &#123;</div><div class="line">    List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">    public static final int[] nums = &#123;1,2,3,4,5,6,7,8,9&#125;;</div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; combinationSum3(int k, int n) &#123;</div><div class="line">        if (k &lt;= 0 || n &lt;= 0)</div><div class="line">            return res;</div><div class="line">        combinationSum3(k, n, 0, new ArrayList&lt;Integer&gt;());</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void combinationSum3(int k, int sum, int index, ArrayList&lt;Integer&gt; list) &#123;</div><div class="line">         if (k == 0 &amp;&amp; sum == 0)&#123;</div><div class="line">             res.add(new ArrayList&lt;&gt;(list));</div><div class="line">             return;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         for (int i = index; i &lt; nums.length; i++) &#123;</div><div class="line">             if (sum &lt; nums[index])</div><div class="line">                 return;</div><div class="line">             list.add(nums[i]);</div><div class="line">             combinationSum3(k-1, sum- nums[i], i + 1, list);</div><div class="line">             list.remove(list.size() - 1);</div><div class="line">         &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="电话数字和字母映射的组合问题"><a href="#电话数字和字母映射的组合问题" class="headerlink" title="电话数字和字母映射的组合问题"></a>电话数字和字母映射的组合问题</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line">import java.util.Objects;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class LetterCombinationsOfAPhoneNumber_17 &#123;</div><div class="line"></div><div class="line">    private static final String[] letterMap  =  &#123;&quot; &quot;, &quot;&quot;,&quot;abc&quot;,&quot;def&quot;,&quot;ghi&quot;,&quot;jkl&quot;,&quot;mno&quot;,&quot;pqrs&quot;,&quot;tuv&quot;,&quot;wxyz&quot;&#125;;</div><div class="line"></div><div class="line">    private List&lt;String&gt; res = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public List&lt;String&gt; letterCombinations(String digits) &#123;</div><div class="line">        if (digits == null || Objects.equals(digits, &quot;&quot;))</div><div class="line">            return res;</div><div class="line">        findCombation(digits, 0, &quot;&quot;);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void findCombation(String digits, int index, String s) &#123;</div><div class="line">        if (index == digits.length()) &#123;</div><div class="line">            //保存s</div><div class="line">            res.add(s);</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        char c = digits.charAt(index);</div><div class="line">        String letters = letterMap[c - &apos;0&apos;];</div><div class="line">        for (int i = 0; i &lt; letters.length(); i++) &#123;</div><div class="line">            findCombation(digits, index + 1, s + letters.charAt(i));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="N皇后问题"><a href="#N皇后问题" class="headerlink" title="N皇后问题"></a>N皇后问题</h1><p>行，列，左右对角线</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.LinkedList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class NQueens_51 &#123;</div><div class="line">    private List&lt;List&lt;String&gt;&gt; res = new LinkedList&lt;&gt;();</div><div class="line">    boolean[] col, dia1, dia2;</div><div class="line">    public List&lt;List&lt;String&gt;&gt; solveNQueens(int n) &#123;</div><div class="line">        res.clear();</div><div class="line">        List&lt;Integer&gt; row = new LinkedList&lt;&gt;();</div><div class="line">        col = new boolean[n];</div><div class="line">        dia1 = new boolean[2*n - 1];</div><div class="line">        dia2 = new boolean[2*n - 1];</div><div class="line">        putQueen(n, 0, row);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * @param n n皇后问题</div><div class="line">     * @param index 第index行</div><div class="line">     * @param row 数组，row[0]=i表示第0行第i列放皇后</div><div class="line">     */</div><div class="line">    private void putQueen(int n, int index, List&lt;Integer&gt; row) &#123;</div><div class="line">        if (index == n) &#123;</div><div class="line">            res.add(generateBoard(n, row));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            if (!col[i] &amp;&amp; !dia1[index + i] &amp;&amp; !dia2[index-i+n-1]) &#123;</div><div class="line">                row.add(i);</div><div class="line">                col[i] = true;</div><div class="line">                dia1[index + i] = true;</div><div class="line">                dia2[index-i+n-1] = true;</div><div class="line">                putQueen(n, index + 1, row);</div><div class="line">                col[i] = false;</div><div class="line">                dia1[index + i] = false;</div><div class="line">                dia2[index-i+n-1] = false;</div><div class="line">                row.remove(row.size() -1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private List&lt;String&gt; generateBoard(int n, List&lt;Integer&gt; row) &#123;</div><div class="line">        List&lt;String&gt; board = new ArrayList&lt;&gt;();</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            StringBuilder sb = new StringBuilder();</div><div class="line">            for (int j = 0; j &lt; n; j ++) &#123;</div><div class="line">                if (j == row.get(i)) &#123;</div><div class="line">                    sb.append(&quot;Q&quot;);</div><div class="line">                &#125; else &#123;</div><div class="line">                    sb.append(&quot;.&quot;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            board.add(sb.toString());</div><div class="line">        &#125;</div><div class="line">        return board;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        NQueens_51 queen = new NQueens_51();</div><div class="line">        queen.solveNQueens(8);</div><div class="line">        System.out.println(queen.res);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="WaterFlooding问题"><a href="#WaterFlooding问题" class="headerlink" title="WaterFlooding问题"></a>WaterFlooding问题</h1><h2 id="太平洋，大西洋问题"><a href="#太平洋，大西洋问题" class="headerlink" title="太平洋，大西洋问题"></a>太平洋，大西洋问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.LinkedList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class PacificAtlanticWaterFlow_417 &#123;</div><div class="line">    public List&lt;int[]&gt; pacificAtlantic(int[][] matrix) &#123;</div><div class="line">        List&lt;int[]&gt; res = new LinkedList&lt;&gt;();</div><div class="line">        if(matrix == null || matrix.length == 0 || matrix[0].length == 0)&#123;</div><div class="line">            return res;</div><div class="line">        &#125;</div><div class="line">        int n = matrix.length, m = matrix[0].length;</div><div class="line">        boolean[][] pacific = new boolean[n][m];</div><div class="line">        boolean[][] atlantic = new boolean[n][m];</div><div class="line">        for(int i=0; i&lt;n; i++)&#123;</div><div class="line">            dfs(matrix, pacific, Integer.MIN_VALUE, i, 0);</div><div class="line">            dfs(matrix, atlantic, Integer.MIN_VALUE, i, m-1);</div><div class="line">        &#125;</div><div class="line">        for(int i=0; i&lt;m; i++)&#123;</div><div class="line">            dfs(matrix, pacific, Integer.MIN_VALUE, 0, i);</div><div class="line">            dfs(matrix, atlantic, Integer.MIN_VALUE, n-1, i);</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; n; i++)</div><div class="line">            for (int j = 0; j &lt; m; j++)</div><div class="line">                if (pacific[i][j] &amp;&amp; atlantic[i][j])</div><div class="line">                    res.add(new int[] &#123;i, j&#125;);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    int[][]dir = new int[][]&#123;&#123;0,1&#125;,&#123;0,-1&#125;,&#123;1,0&#125;,&#123;-1,0&#125;&#125;;</div><div class="line"></div><div class="line">    public void dfs(int[][]matrix, boolean[][]visited, int height, int x, int y)&#123;</div><div class="line">        int n = matrix.length, m = matrix[0].length;</div><div class="line">        if(x&lt;0 || x&gt;=n || y&lt;0 || y&gt;=m || visited[x][y] || matrix[x][y] &lt; height)</div><div class="line">            return;</div><div class="line">        visited[x][y] = true;</div><div class="line">        for(int[]d:dir)&#123;</div><div class="line">            dfs(matrix, visited, matrix[x][y], x+d[0], y+d[1]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="岛屿数量问题"><a href="#岛屿数量问题" class="headerlink" title="岛屿数量问题"></a>岛屿数量问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class NumbersOfIslands_200 &#123;</div><div class="line">    public int numIslands(char[][] grid) &#123;</div><div class="line">        int count = 0;</div><div class="line">        for (int i = 0; i &lt; grid.length; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; grid[0].length; j++) &#123;</div><div class="line">                if (grid[i][j] == &apos;1&apos;) &#123;</div><div class="line">                    dfs(grid, i, j);</div><div class="line">                    count++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return count;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void dfs(char[][] grid, int x, int y) &#123;</div><div class="line">        if (x &lt; 0 || x &gt;= grid.length || y &lt; 0 || y &gt;= grid[0].length || grid[x][y] != &apos;1&apos;)</div><div class="line">            return;</div><div class="line">        grid[x][y] = &apos;2&apos;;</div><div class="line">        dfs(grid, x-1, y);</div><div class="line">        dfs(grid, x+1,y);</div><div class="line">        dfs(grid, x, y-1);</div><div class="line">        dfs(grid, x, y + 1);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="环绕区域问题"><a href="#环绕区域问题" class="headerlink" title="环绕区域问题"></a>环绕区域问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class SurroundedRegions_130 &#123;</div><div class="line">    int m;</div><div class="line">    int n;</div><div class="line">    public void solve(char[][] board) &#123;</div><div class="line">        if (board == null || board.length == 0)</div><div class="line">            return;</div><div class="line">        m = board.length;</div><div class="line">        n = board[0].length;</div><div class="line">        //从最外圈寻找O,找到之后dfs标记与O相连的O</div><div class="line">        for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">            if (board[i][0] == &apos;O&apos;)</div><div class="line">                dfs(board, i, 0);</div><div class="line">            if (board[i][n-1] == &apos;O&apos;)</div><div class="line">                dfs(board, i, n-1);</div><div class="line">        &#125;</div><div class="line">        for (int j = 0; j &lt; n; j++) &#123;</div><div class="line">            if (board[0][j] == &apos;O&apos;)</div><div class="line">                dfs(board, 0, j);</div><div class="line">            if (board[m-1][j] == &apos;O&apos;)</div><div class="line">                dfs(board, m-1, j);</div><div class="line">        &#125;</div><div class="line">        //修改</div><div class="line">        for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; n; j++) &#123;</div><div class="line">                if (board[i][j] != &apos;Z&apos;)&#123;</div><div class="line">                    board[i][j] = &apos;X&apos;;</div><div class="line">                &#125; else &#123;</div><div class="line">                    board[i][j] = &apos;O&apos;;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void dfs(char[][] board, int i, int j) &#123;</div><div class="line">        if (i &lt; 0 || i &gt;= m || j &lt; 0 || j &gt;= n || board[i][j] != &apos;O&apos;)</div><div class="line">            return;</div><div class="line">        board[i][j] = &apos;Z&apos;;</div><div class="line">        dfs(board, i - 1, j);</div><div class="line">        dfs(board, i + 1, j);</div><div class="line">        dfs(board, i, j - 1);</div><div class="line">        dfs(board, i, j + 1);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="字符串分隔问题"><a href="#字符串分隔问题" class="headerlink" title="字符串分隔问题"></a>字符串分隔问题</h1><h2 id="给定一个字符串，将字符串分成若干个子串，每个子串都为回文字符串，返回所有可能的分隔子串集合。"><a href="#给定一个字符串，将字符串分成若干个子串，每个子串都为回文字符串，返回所有可能的分隔子串集合。" class="headerlink" title="给定一个字符串，将字符串分成若干个子串，每个子串都为回文字符串，返回所有可能的分隔子串集合。"></a>给定一个字符串，将字符串分成若干个子串，每个子串都为回文字符串，返回所有可能的分隔子串集合。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class PalindromePartitioning_131 &#123;</div><div class="line">    private List&lt;List&lt;String&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public List&lt;List&lt;String&gt;&gt; partition(String s) &#123;</div><div class="line">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line">        partition(list, s, 0, &quot;&quot;);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void partition(List&lt;String&gt; list, String s, int pos, String sub) &#123;</div><div class="line">        if (pos == s.length()) &#123;</div><div class="line">            if (sub.equals(&quot;&quot;))</div><div class="line">                res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        String tmp = sub + s.charAt(pos);</div><div class="line">        if (isPalindrome(tmp)) &#123;</div><div class="line">            list.add(tmp);</div><div class="line">            partition(list, s, pos + 1, &quot;&quot;);</div><div class="line">            list.remove(list.size() - 1);</div><div class="line">        &#125;</div><div class="line">        partition(list, s, pos + 1, tmp);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isPalindrome(String s) &#123;</div><div class="line">        for (int i = 0; i &lt; s.length()/2; i += 1) &#123;</div><div class="line">            if (s.charAt(i) != s.charAt(s.length()-1-i))</div><div class="line">                return false;</div><div class="line">        &#125;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        String s = &quot;aab&quot;;</div><div class="line">        System.out.println(new PalindromePartitioning_131().partition(s));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="给定一个字符串，返回其可能的IP值集合。"><a href="#给定一个字符串，返回其可能的IP值集合。" class="headerlink" title="给定一个字符串，返回其可能的IP值集合。"></a>给定一个字符串，返回其可能的IP值集合。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class RestoreIpAddress_93 &#123;</div><div class="line"></div><div class="line">    private List&lt;String&gt; res = new ArrayList&lt;&gt;();</div><div class="line">    public List&lt;String&gt; restoreIpAddresses(String s) &#123;</div><div class="line">        int len = s.length();</div><div class="line">        for (int i = 1; i &lt; 4 &amp;&amp; i &lt; len - 2; i++) &#123;</div><div class="line">            for (int j = i + 1; j &lt; i + 4 &amp;&amp; j &lt; len - 1; j++) &#123;</div><div class="line">                for (int k = j + 1; k &lt; j + 4 &amp;&amp; k &lt; len; k++) &#123;</div><div class="line">                    String s1 = s.substring(0,i);</div><div class="line">                    String s2 = s.substring(i,j);</div><div class="line">                    String s3 = s.substring(j,k);</div><div class="line">                    String s4 = s.substring(k,len);</div><div class="line">                    if (isValid(s1) &amp;&amp; isValid(s2) &amp;&amp; isValid(s3) &amp;&amp; isValid(s4))&#123;</div><div class="line">                        StringBuilder sb = new StringBuilder();</div><div class="line">                        sb.append(s1).append(&quot;.&quot;).append(s2).append(&quot;.&quot;).append(s3)</div><div class="line">                                .append(&quot;.&quot;).append(s4);</div><div class="line">                        res.add(sb.toString());</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isValid(String s) &#123;</div><div class="line">        return s.length() &lt;= 3 &amp;&amp; s.length() != 0 &amp;&amp; (s.charAt(0) != &apos;0&apos; || s.length() &lt;= 1) &amp;&amp; Integer.parseInt(s) &lt;= 255;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public List&lt;String&gt; restoreIpAddresses1(String s) &#123;</div><div class="line">        dfs(new StringBuilder(), 0, s, 0, 0);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * DFS方法，回溯法应用</div><div class="line">     * @param sb 拼接的字符串</div><div class="line">     * @param pos 字符串的下标</div><div class="line">     * @param s 输入的字符串</div><div class="line">     * @param num 组成的数字</div><div class="line">     * @param dot 点的个数</div><div class="line">     */</div><div class="line">    private void dfs(StringBuilder sb, int pos, String s, int num, int dot) &#123;</div><div class="line">        //终止条件，当检查晚最后一个元素时，如果点为3个，将字符串添加到res中</div><div class="line">        if (pos == s.length()) &#123;</div><div class="line">            if (dot == 3)</div><div class="line">                res.add(sb.toString());</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        //pos时，检查将其添加到当前数字中是否小于255，小于说明可以添加，则将其添加过去，遍历下一位</div><div class="line">        if (num * 10 + s.charAt(pos)-&apos;0&apos; &lt;= 255) &#123;</div><div class="line">            if (pos == 0 || num != 0) &#123;</div><div class="line">                sb.append(s.charAt(pos));</div><div class="line">                dfs(sb, pos + 1, s,num * 10 + s.charAt(pos)-&apos;0&apos;, dot);</div><div class="line">                sb.deleteCharAt(sb.length() - 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        //不管pos能否添加，都不添加，而直接加点，迭代下一位</div><div class="line">        if (dot &lt; 3 &amp;&amp; pos &gt; 0)&#123;</div><div class="line">            sb.append(&quot;.&quot;);</div><div class="line">            sb.append(s.charAt(pos));</div><div class="line">            dfs(sb,pos + 1, s, s.charAt(pos) - &apos;0&apos;, dot + 1);</div><div class="line">            sb.deleteCharAt(sb.length() - 1);</div><div class="line">            sb.deleteCharAt(sb.length() - 1);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="全排列问题"><a href="#全排列问题" class="headerlink" title="全排列问题"></a>全排列问题</h1><h2 id="给定一个数组，给出数组的所有全排列，没有重复元素"><a href="#给定一个数组，给出数组的所有全排列，没有重复元素" class="headerlink" title="给定一个数组，给出数组的所有全排列，没有重复元素"></a>给定一个数组，给出数组的所有全排列，没有重复元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class Permutations_46 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; permute(int[] nums) &#123;</div><div class="line">        boolean[] used = new boolean[nums.length];</div><div class="line">        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</div><div class="line">        dfs(list, nums,0, used);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void dfs(List&lt;Integer&gt; list, int[] nums, int pos, boolean[] used) &#123;</div><div class="line">        if (pos == nums.length) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; nums.length; i++) &#123;</div><div class="line">            if (!used[i]) &#123;</div><div class="line">                list.add(nums[i]);</div><div class="line">                used[i] = true;</div><div class="line">                dfs(list, nums, pos + 1, used);</div><div class="line">                used[i] = false;</div><div class="line">                list.remove(list.size() - 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="给定一个数组，给出数组的所有全排列，有重复元素"><a href="#给定一个数组，给出数组的所有全排列，有重复元素" class="headerlink" title="给定一个数组，给出数组的所有全排列，有重复元素"></a>给定一个数组，给出数组的所有全排列，有重复元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import sun.misc.Perf;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class PermutationsII_47 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; permuteUnique(int[] nums) &#123;</div><div class="line">        if (nums == null || nums.length == 0)</div><div class="line">            return res;</div><div class="line">        boolean[] used = new boolean[nums.length];</div><div class="line">        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</div><div class="line">        Arrays.sort(nums);</div><div class="line">        dfs(list, nums, used);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void dfs(List&lt;Integer&gt; list, int[] nums, boolean[] used) &#123;</div><div class="line">        if (list.size() == nums.length) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; nums.length; i++) &#123;</div><div class="line">            if (used[i])</div><div class="line">                continue;</div><div class="line">            if (i &gt; 0 &amp;&amp; nums[i-1] == nums[i] &amp;&amp; !used[i-1])</div><div class="line">                continue;</div><div class="line">            used[i] = true;</div><div class="line">            list.add(nums[i]);</div><div class="line">            dfs(list, nums, used);</div><div class="line">            used[i] = false;</div><div class="line">            list.remove(list.size()-1);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        int[] nums = &#123;2,2,1,1&#125;;</div><div class="line">        PermutationsII_47 p = new PermutationsII_47();</div><div class="line">        p.permuteUnique(nums);</div><div class="line">        System.out.println(p.res);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="子集问题"><a href="#子集问题" class="headerlink" title="子集问题"></a>子集问题</h1><h2 id="返回一个数组的所有子数组-数组没有重复元素"><a href="#返回一个数组的所有子数组-数组没有重复元素" class="headerlink" title="返回一个数组的所有子数组, 数组没有重复元素"></a>返回一个数组的所有子数组, 数组没有重复元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class SubSets_78 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) &#123;</div><div class="line">        if (nums == null || nums.length == 0)</div><div class="line">            return res;</div><div class="line">        subsets(nums, 0, new ArrayList&lt;Integer&gt;());</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void subsets(int[] nums, int index, ArrayList&lt;Integer&gt; list) &#123;</div><div class="line">        res.add(new ArrayList&lt;&gt;(list));</div><div class="line">        for (int i = index; i &lt; nums.length; i++) &#123;</div><div class="line">            list.add(nums[i]);</div><div class="line">            subsets(nums, i + 1, list);</div><div class="line">            list.remove(list.size() - 1);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        SubSets_78 s = new SubSets_78();</div><div class="line">        int[] num = &#123;1,2,3&#125;;</div><div class="line">        s.subsets(num);</div><div class="line">        System.out.println(s.res);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="返回一个数组的所有子数组-数组有重复元素"><a href="#返回一个数组的所有子数组-数组有重复元素" class="headerlink" title="返回一个数组的所有子数组, 数组有重复元素"></a>返回一个数组的所有子数组, 数组有重复元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class SubSetsII_90 &#123;</div><div class="line">    private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; subsetsWithDup(int[] nums) &#123;</div><div class="line">        if (nums == null || nums.length == 0)</div><div class="line">            return res;</div><div class="line">        Arrays.sort(nums);</div><div class="line">        subsets(nums, 0, new ArrayList&lt;Integer&gt;());</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void subsets(int[] nums, int index, ArrayList&lt;Integer&gt; list) &#123;</div><div class="line">        if (nums.length == index) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        list.add(nums[index]);</div><div class="line">        subsets(nums, index + 1,list);</div><div class="line">        list.remove(list.size() - 1);</div><div class="line">        while (index + 1 &lt; nums.length &amp;&amp; nums[index + 1] == nums[index])</div><div class="line">            index++;</div><div class="line">        subsets(nums, index + 1, list);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="数独问题"><a href="#数独问题" class="headerlink" title="数独问题"></a>数独问题</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/11</div><div class="line"> */</div><div class="line">public class Sudoku_Solver_37 &#123;</div><div class="line">    public void solveSudoku(char[][] board) &#123;</div><div class="line">        doSolve(board, 0, 0);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean doSolve(char[][] board, int row, int col) &#123;</div><div class="line">        for (int i = row; i &lt; 9; i++, col = 0) &#123;</div><div class="line">            for (int j = col; j &lt; 9; j++) &#123;</div><div class="line">                if (board[i][j] != &apos;.&apos;)</div><div class="line">                    continue;</div><div class="line">                for (char c = &apos;1&apos;; c &lt;= &apos;9&apos;; c++) &#123;</div><div class="line">                    if (isValid(board, i, j, c)) &#123;</div><div class="line">                        board[i][j] = c;</div><div class="line">                        if (doSolve(board, i, j + 1))</div><div class="line">                            return true;</div><div class="line">                        board[i][j] = &apos;.&apos;;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return false;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isValid(char[][] board, int row, int col, char num) &#123;</div><div class="line">        int blkrow = row / 3 * 3, blkcol = col / 3 * 3;</div><div class="line">        for (int i = 0; i &lt; 9; i++) &#123;</div><div class="line">            if (board[i][col] == num || board[row][i] == num || board[blkrow + i / 3][blkcol + i % 3] == num)</div><div class="line">                return false;</div><div class="line">        &#125;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="给定一个二维数组，判断能否拼成相应的字符串"><a href="#给定一个二维数组，判断能否拼成相应的字符串" class="headerlink" title="给定一个二维数组，判断能否拼成相应的字符串"></a>给定一个二维数组，判断能否拼成相应的字符串</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class WorldSearch_79 &#123;</div><div class="line">    public boolean exist(char[][] board, String word) &#123;</div><div class="line">        boolean[][] flag = new boolean[board.length][board[0].length];</div><div class="line">        for (int i = 0; i &lt; board.length; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; board[0].length; j++)</div><div class="line">                if (seachWord(board, word, 0, i, j, flag))</div><div class="line">                    return true;</div><div class="line">        &#125;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean seachWord(char[][] board, String word, int index, int x, int y, boolean[][] flag) &#123;</div><div class="line">        if (index == word.length() - 1)</div><div class="line">            return board[x][y] == word.charAt(index);</div><div class="line">        if (board[x][y] == word.charAt(index)) &#123;</div><div class="line">            flag[x][y] = true;</div><div class="line">            if (x - 1 &gt;= 0 &amp;&amp; !flag[x-1][y] &amp;&amp; seachWord(board, word, index+1,x-1, y, flag))</div><div class="line">                return true;</div><div class="line">            if (x + 1 &lt; board.length &amp;&amp; !flag[x+1][y] &amp;&amp; seachWord(board, word, index + 1, x + 1, y, flag))</div><div class="line">                return true;</div><div class="line">            if (y-1 &gt;= 0 &amp;&amp; !flag[x][y-1] &amp;&amp; seachWord(board, word, index + 1, x, y-1, flag))</div><div class="line">                return true;</div><div class="line">            if (y + 1 &lt;board[0].length &amp;&amp; !flag[x][y+1] &amp;&amp; seachWord(board, word, index + 1, x, y+1, flag))</div><div class="line">                return true;</div><div class="line">            flag[x][y] = false;</div><div class="line">        &#125;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二进制表的问题"><a href="#二进制表的问题" class="headerlink" title="二进制表的问题"></a>二进制表的问题</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">package leetcode.backtracking;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class BinaryWatch_401 &#123;</div><div class="line">    public List&lt;String&gt; readBinaryWatch(int num) &#123;</div><div class="line">        List&lt;String&gt; res = new ArrayList&lt;&gt;();</div><div class="line">        int[] nums1 = new int[]&#123;8,4,2,1&#125;;</div><div class="line">        int[] nums2 = new int[]&#123;32,16,8,4,2,1&#125;;</div><div class="line">        for (int i = 0; i &lt;= num; i++) &#123;</div><div class="line">            List&lt;Integer&gt; list1 = generateDigit(nums1, i);</div><div class="line">            List&lt;Integer&gt; list2 = generateDigit(nums2, num - i);</div><div class="line">            for (int num1 : list1) &#123;</div><div class="line">                if (num1 &gt;= 12)</div><div class="line">                    continue;</div><div class="line">                for (int num2 : list2) &#123;</div><div class="line">                    if (num2 &gt;= 60)</div><div class="line">                        continue;</div><div class="line">                    res.add(num1 + &quot;:&quot;+ (num2 &lt; 10 ? &quot;0&quot; + num2 : num2));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return  res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private List&lt;Integer&gt; generateDigit(int[] nums, int count) &#123;</div><div class="line">        List&lt;Integer&gt; res = new ArrayList&lt;&gt;();</div><div class="line">        generateDigit(nums, count, 0, 0, res);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void generateDigit(int[] nums, int count, int pos, int sum, List&lt;Integer&gt; res) &#123;</div><div class="line">        if (count == 0) &#123;</div><div class="line">            res.add(sum);</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = pos; i &lt; nums.length; i++) &#123;</div><div class="line">            generateDigit(nums, count - 1, i + 1, sum + nums[i], res);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之全排列和全组合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之全排列和全组合/" itemprop="url">算法-全排列和全组合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="全排列"><a href="#全排列" class="headerlink" title="全排列"></a>全排列</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><ul>
<li><p>输入一个字符串，求字符串包含元素（含重复，比如aab的情况）的所有排列可能。</p>
</li>
<li><p>例如：输入abc,所有排列组合包括: abc, acb, bac, bca, cab, cba。</p>
</li>
</ul>
<h2 id="递归解法"><a href="#递归解法" class="headerlink" title="递归解法"></a>递归解法</h2><ul>
<li><p>思路：如果输入为abcdef，则首先确定排列的第一个字母，有6中可能，如果选定a,则其后接bcdef的全排列，明显适用于递归结题。结题思路为第一个字母分别选定所有可能的情况，然后对剩下的字母进行递归。递归终止条件为选定的字母的下标为字符串长度-1。</p>
</li>
<li><p>实现</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">public class AllSort &#123;</div><div class="line">    private static ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public static void main(String[] args) throws IOException &#123;</div><div class="line">        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</div><div class="line">        String str = br.readLine();</div><div class="line">        Permutation(str.toCharArray(), str.length(), 0);</div><div class="line">        System.out.println(list.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void Permutation(char[] chars, int strLen, int curIndex) &#123;</div><div class="line">        //如果到最后一个数，将排好的加入到list中</div><div class="line">        if (curIndex == strLen - 1) &#123;</div><div class="line">            list.add(new String(chars));</div><div class="line">        &#125; else &#123;</div><div class="line">            for (int i = curIndex; i &lt;= strLen - 1; i++) &#123;</div><div class="line">                //去重，避免相同数字的交换造成最终结果存在重复</div><div class="line">                if (i == curIndex || chars[i] != chars[curIndex]) &#123;</div><div class="line">                    //依次交换开头字母与后面的进行递归</div><div class="line">                    Swap(chars, i, curIndex);</div><div class="line">                    Permutation(chars, strLen, curIndex + 1);</div><div class="line">                    Swap(chars, i, curIndex);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void Swap(char[] chars, int i, int curIndex) &#123;</div><div class="line">        char tmp = chars[i];</div><div class="line">        chars[i] = chars[curIndex];</div><div class="line">        chars[curIndex] = tmp;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="字典序法"><a href="#字典序法" class="headerlink" title="字典序法"></a>字典序法</h2><ul>
<li>思想：将输入排序，如输入为1234，则其最小值为1234，然后下一次加入的值为除了1234以外，1,2,3,4组成的最小的值。获取方法为从末尾找第一个从右向左不递增的数a，然后找到从末尾开始从右向左第一个大于a的数，并将这两个数交换次序。然后将原来a的位置之后的字符串反序。也就是说1234，的下一个为1243，在下一个为1324..直到字符串从右向左递增为止。</li>
</ul>
<p>实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">public class AllSort &#123;</div><div class="line">    private static ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public static void main(String[] args) throws IOException &#123;</div><div class="line">        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</div><div class="line">        String str = br.readLine();</div><div class="line">        PermutationWithDictionary(str.toCharArray(), str.length());</div><div class="line">        System.out.println(list.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void Swap(char[] chars, int i, int curIndex) &#123;</div><div class="line">        char tmp = chars[i];</div><div class="line">        chars[i] = chars[curIndex];</div><div class="line">        chars[curIndex] = tmp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void PermutationWithDictionary(char[] chars, int strLen) &#123;</div><div class="line">        //对字符数组进行排序</div><div class="line">        Arrays.sort(chars);</div><div class="line"></div><div class="line">        while (true) &#123;</div><div class="line">            int j;</div><div class="line">            int index = 0;</div><div class="line">            //找到从右向左第一个不是非递增元素</div><div class="line">            for (j = strLen - 2; j &gt;= 0; j--) &#123;</div><div class="line">                if (chars[j] &lt; chars[j+1])&#123;</div><div class="line">                    index = j;</div><div class="line">                    break;</div><div class="line">                &#125; else if (j == 0)&#123;</div><div class="line">                    return;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            //与从右向左第一个大于这个元素的元素交换</div><div class="line">            for (j = strLen - 1; j &gt;= 0; j--) &#123;</div><div class="line">                if (chars[j] &gt; chars[index]) &#123;</div><div class="line">                    break;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            //交换这两个值</div><div class="line">            Swap(chars, index, j);</div><div class="line">            //对非递增元素位置后面的数组进行逆序排序</div><div class="line">            Reverse(chars, index+1);</div><div class="line">            list.add(new String(chars));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void Reverse(char[] chars, int index) &#123;</div><div class="line">        int k = index, j = chars.length-1;</div><div class="line">        while (k &lt; j) &#123;</div><div class="line">            Swap(chars,k,j);</div><div class="line">            k++;</div><div class="line">            j--;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="全组合"><a href="#全组合" class="headerlink" title="全组合"></a>全组合</h1><ul>
<li>题目描述：输入一个字符串，求字符的所有组合。如abc,则输出可能为a,b,c,ab,ac,bc,abc。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">public class AllCombine &#123;</div><div class="line">    static ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public static void main(String[] args) throws IOException &#123;</div><div class="line">        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</div><div class="line">        String str = br.readLine();</div><div class="line">        combinetion(str.toCharArray(), str.length());</div><div class="line">        System.out.println(list.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void combinetion(char[] chars, int length) &#123;</div><div class="line">       if (chars == null || length == 0)</div><div class="line">           return;</div><div class="line">        List&lt;Character&gt; array = new ArrayList&lt;&gt;();</div><div class="line">        //n中情况分别考虑</div><div class="line">        for (int i = 1; i &lt;= length; i++) &#123;</div><div class="line">            combine(chars, 0, i, array);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 从字符数组中index以后挑选number个数加入list</div><div class="line">     * @param chars 输入的字符数组</div><div class="line">     * @param index 开始字符下标</div><div class="line">     * @param number</div><div class="line">     * @param array</div><div class="line">     */</div><div class="line">    private static void combine(char[] chars, int index, int number, List&lt;Character&gt; array) &#123;</div><div class="line">        if (number == 0) &#123;</div><div class="line">            //递归终止条件，判断是为了去重</div><div class="line">            if (!list.contains(array.toString())) &#123;</div><div class="line">                list.add(array.toString());</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if (index == chars.length) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        //取当前元素，并考察递归选取n-1个元素的情况</div><div class="line">        array.add(chars[index]);</div><div class="line">        combine(chars, index+1, number - 1, array);</div><div class="line">        array.remove((Character) chars[index]);</div><div class="line">        //不取当前元素，考察后面选取n个元素</div><div class="line">        combine(chars, index+1, number, array);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>基于位图：假定元素有n个，则最终结果组合为2^n-1个，我们使用位操作方法：假设元素原本为123，则1表示取该元素，0表示不取该元素。000是没有意义是，则选取的对应如下：<br>001,010,100,011,101,110,111-&gt;a,b,c,bc,ac,ab,abc。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">public class AllCombine1 &#123;</div><div class="line">    static ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    public static void main(String[] args) throws IOException &#123;</div><div class="line">        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</div><div class="line">        String str = br.readLine();</div><div class="line">        combinetion(str.toCharArray());</div><div class="line">        System.out.println(list.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static void combinetion(char[] chars) &#123;</div><div class="line">        if (chars == null || chars.length == 0)</div><div class="line">            return;</div><div class="line">        int len = chars.length;</div><div class="line">        //n=2^len</div><div class="line">        int n = 1&lt;&lt;len;</div><div class="line">        for (int i = 1; i &lt; n; i++) &#123;</div><div class="line">            StringBuilder sb = new StringBuilder();</div><div class="line">            for (int j = 0; j &lt; len; j++) &#123;</div><div class="line">                int temp = i;</div><div class="line">                if ((temp &amp; (1&lt;&lt;j)) != 0)</div><div class="line">                    sb.append(chars[j]);</div><div class="line">            &#125;</div><div class="line">            list.add(sb.toString());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之二维矩阵各点到0值的距离/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之二维矩阵各点到0值的距离/" itemprop="url">算法-二维矩阵各点到0值的距离</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="算法之二维矩阵各点到0值的距离"><a href="#算法之二维矩阵各点到0值的距离" class="headerlink" title="算法之二维矩阵各点到0值的距离"></a>算法之二维矩阵各点到0值的距离</h1><ul>
<li>给定一个矩阵，返回各个节点到0点位置的最短路径</li>
</ul>
<p>如:<br>        {0,1,1,1}<br>        {1,1,1,0}<br>        {1,0,1,1}</p>
<p>返回:<br>        [0, 1, 2, 1]<br>        [1, 1, 1, 0]<br>        [1, 0, 1, 1]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> tmp;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.LinkedList;</div><div class="line"><span class="keyword">import</span> java.util.Queue;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Created by cdx0312</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][<span class="number">4</span>];</div><div class="line">        arr[<span class="number">0</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</div><div class="line">        arr[<span class="number">1</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</div><div class="line">        arr[<span class="number">2</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</div><div class="line">        <span class="keyword">int</span>[][] res = getResult(arr);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</div><div class="line">            System.out.println(Arrays.toString(res[i]));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] getResult(<span class="keyword">int</span>[][] arr) &#123;</div><div class="line">        <span class="keyword">int</span> M = arr.length;</div><div class="line">        <span class="keyword">int</span> N = arr[<span class="number">0</span>].length;</div><div class="line">        Queue&lt;Point&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (arr[i][j] == <span class="number">0</span>)</div><div class="line">                    queue.offer(<span class="keyword">new</span> Point(i, j));</div><div class="line">                <span class="keyword">else</span></div><div class="line">                    arr[i][j] = Integer.MAX_VALUE;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</div><div class="line">            Point point = queue.poll();</div><div class="line">            <span class="keyword">int</span> x = point.x, y = point.y;</div><div class="line">            <span class="keyword">int</span> target = arr[x][y];</div><div class="line">            <span class="keyword">if</span> (x &gt;= <span class="number">1</span> &amp;&amp; arr[x-<span class="number">1</span>][y] &gt; target + <span class="number">1</span>) &#123;</div><div class="line">                arr[x - <span class="number">1</span>][y] = arr[x][y] + <span class="number">1</span>;</div><div class="line">                queue.offer(<span class="keyword">new</span> Point(x-<span class="number">1</span>, y));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (x &lt; M - <span class="number">1</span> &amp;&amp; arr[x+<span class="number">1</span>][y] &gt; target + <span class="number">1</span>) &#123;</div><div class="line">                arr[x + <span class="number">1</span>][y] = arr[x][y] + <span class="number">1</span>;</div><div class="line">                queue.offer(<span class="keyword">new</span> Point(x+<span class="number">1</span>, y));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (y &gt;= <span class="number">1</span> &amp;&amp; arr[x][y-<span class="number">1</span>] &gt; target + <span class="number">1</span>) &#123;</div><div class="line">                arr[x][y - <span class="number">1</span>] = arr[x][y] + <span class="number">1</span>;</div><div class="line">                queue.offer(<span class="keyword">new</span> Point(x, y-<span class="number">1</span>));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (y &lt; N - <span class="number">1</span> &amp;&amp; arr[x][y+<span class="number">1</span>] &gt; target + <span class="number">1</span>) &#123;</div><div class="line">                arr[x][y + <span class="number">1</span>] = arr[x][y] + <span class="number">1</span>;</div><div class="line">                queue.offer(<span class="keyword">new</span> Point(x, y+<span class="number">1</span>));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> x;</div><div class="line">        <span class="keyword">int</span> y;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.x = x;</div><div class="line">            <span class="keyword">this</span>.y = y;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之二叉树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之二叉树/" itemprop="url">算法-二叉树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>算法中关于二叉树的有很多，将最近做的关于二叉树相关的算法整理下，以备查看。</p>
<h1 id="Path-Sum问题"><a href="#Path-Sum问题" class="headerlink" title="Path Sum问题"></a>Path Sum问题</h1><h2 id="Path-Sum-112"><a href="#Path-Sum-112" class="headerlink" title="Path Sum 112"></a>Path Sum 112</h2><p>给定一个二叉树和一个sum值，返回true如果存在一个从根节点到叶子节点的路径，否则返回false。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class PathSum_112 &#123;</div><div class="line">    public boolean hasPathSum(TreeNode root, int sum) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return false;</div><div class="line">        if (root.left == null &amp;&amp; root.right == null)</div><div class="line">            return sum == root.val;</div><div class="line">        return hasPathSum(root.left, sum - root.val) || hasPathSum(root.right, sum - root.val);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Path-SumII-113"><a href="#Path-SumII-113" class="headerlink" title="Path SumII 113"></a>Path SumII 113</h2><p>给定一个二叉树和一个sum值，找到所有的从根节点到叶子节点的路径和为sum的路径并返回。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.linkedList.ListNode;</div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class PathSumII_113 &#123;</div><div class="line">    public List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, int sum) &#123;</div><div class="line">        List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</div><div class="line">        getPathSum(root, sum, res,list);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * @param root 跟节点</div><div class="line">     * @param sum 和</div><div class="line">     * @param res 返回的二维数组</div><div class="line">     * @param list 单个路径</div><div class="line">     */</div><div class="line">    private void getPathSum(TreeNode root, int sum, List&lt;List&lt;Integer&gt;&gt; res, List&lt;Integer&gt; list) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return;</div><div class="line">        list.add(root.val);</div><div class="line">        //递归到叶子节点进行判断，决定是否将当前list添加到列表中，不是叶子节点则继续递归左子树和右子树。</div><div class="line">        if (root.left == null &amp;&amp; root.right == null &amp;&amp; sum == root.val) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            list.remove(list.size() - 1);</div><div class="line">            return;</div><div class="line">        &#125; else &#123;</div><div class="line">            getPathSum(root.left, sum - root.val, res, list);</div><div class="line">            getPathSum(root.right, sum - root.val, res, list);</div><div class="line">        &#125;</div><div class="line">        //添加完记得删除，回溯上一个状态。</div><div class="line">        list.remove(list.size() - 1);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Path-SumIII-437"><a href="#Path-SumIII-437" class="headerlink" title="Path SumIII 437"></a>Path SumIII 437</h2><p>给定一个二叉树，节点值可以为负数，找到路径和等于sum的路径的个数，其中路径不需要从根节点开始，也不需要从叶子节点终止。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class PathSumIII_437 &#123;</div><div class="line">    public int pathSum(TreeNode root, int sum) &#123;</div><div class="line">        int res = 0;</div><div class="line">        if (root == null)</div><div class="line">            return res;</div><div class="line">        res = findPath(root, sum);</div><div class="line">        res += pathSum(root.left, sum);</div><div class="line">        res += pathSum(root.right ,sum);</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int findPath(TreeNode root, int sum) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        int res = 0;</div><div class="line">        if (root.val == sum)</div><div class="line">            res++;</div><div class="line">        return res + findPath(root.left, sum - root.val) + findPath(root.right, sum - root.val);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="树的深度问题"><a href="#树的深度问题" class="headerlink" title="树的深度问题"></a>树的深度问题</h1><h2 id="树的最大深度问题"><a href="#树的最大深度问题" class="headerlink" title="树的最大深度问题"></a>树的最大深度问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class MaximunDepthOfBinaryTree_104 &#123;</div><div class="line">    public int maxDepth(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        int leftMaxDepth = maxDepth(root.left);</div><div class="line">        int rightMaxDepth = maxDepth(root.right);</div><div class="line">        return Math.max(leftMaxDepth, rightMaxDepth) + 1;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="树的最小深度"><a href="#树的最小深度" class="headerlink" title="树的最小深度"></a>树的最小深度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class MinimumDepthOfBinaryTree_111 &#123;</div><div class="line">    public int minDepth(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        if (root.left == null)</div><div class="line">            return 1 + minDepth(root.right);</div><div class="line">        if (root.right == null)</div><div class="line">            return 1 + minDepth(root.left);</div><div class="line">        return Math.min(minDepth(root.left), minDepth(root.right)) + 1;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二叉树的最早祖先节点"><a href="#二叉树的最早祖先节点" class="headerlink" title="二叉树的最早祖先节点"></a>二叉树的最早祖先节点</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) &#123;</div><div class="line">    if (root == null || root == p || root == q)</div><div class="line">        return root;</div><div class="line">    TreeNode left = lowestCommonAncestor(root.left, p, q);</div><div class="line">    TreeNode right = lowestCommonAncestor(root.right, p, q);</div><div class="line">    if (left != null &amp;&amp; right != null)</div><div class="line">        return root;</div><div class="line">    return left != null ? left : right;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二叉搜索树的最早祖先节点"><a href="#二叉搜索树的最早祖先节点" class="headerlink" title="二叉搜索树的最早祖先节点"></a>二叉搜索树的最早祖先节点</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class LowestCommonAncestorOfABinarySearchTree_235 &#123;</div><div class="line">    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return null;</div><div class="line">        if (p.val &lt; root.val &amp;&amp; q.val &lt; root.val)</div><div class="line">            return lowestCommonAncestor(root.left, p, q);</div><div class="line">        else if (p.val &gt; root.val &amp;&amp; q.val &gt; root.val)</div><div class="line">            return lowestCommonAncestor(root.right, p, q);</div><div class="line">        return root;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二叉搜索树"><a href="#二叉搜索树" class="headerlink" title="二叉搜索树"></a>二叉搜索树</h1><h2 id="二叉搜索树第k小的节点"><a href="#二叉搜索树第k小的节点" class="headerlink" title="二叉搜索树第k小的节点"></a>二叉搜索树第k小的节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">import java.util.Stack;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class KthSmallestElementInaBST_230 &#123;</div><div class="line">    //堆栈方法</div><div class="line">    public int kthSmallest(TreeNode root, int k) &#123;</div><div class="line">        Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();</div><div class="line">        while (root != null) &#123;</div><div class="line">            stack .push(root);</div><div class="line">            root = root.left;</div><div class="line">        &#125;</div><div class="line">        while (k != 0) &#123;</div><div class="line">            TreeNode node = stack.pop();</div><div class="line">            k--;</div><div class="line">            if (k == 0)</div><div class="line">                return node.val;</div><div class="line">            TreeNode right = node.right;</div><div class="line">            while (right != null) &#123;</div><div class="line">                stack.push(right);</div><div class="line">                right = right.left;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return -1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //递归方法</div><div class="line">    public int kthSmallest1(TreeNode root, int k) &#123;</div><div class="line">        int count = countNodes(root.left);</div><div class="line">        if (k &lt;= count)</div><div class="line">            return kthSmallest(root.left, k);</div><div class="line">        else if (k &gt; count + 1)</div><div class="line">            return kthSmallest(root.right, k - 1 -count);</div><div class="line">        return root.val;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int countNodes(TreeNode left) &#123;</div><div class="line">        if (left == null)</div><div class="line">            return 0;</div><div class="line">        return 1 + countNodes(left.left) + countNodes(left.right);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="检验一棵树是否为二叉搜索树"><a href="#检验一棵树是否为二叉搜索树" class="headerlink" title="检验一棵树是否为二叉搜索树"></a>检验一棵树是否为二叉搜索树</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class ValidateBST_98 &#123;</div><div class="line">    public boolean isValidBST(TreeNode root) &#123;</div><div class="line">        return isValidBST(root, Long.MIN_VALUE, Long.MAX_VALUE);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isValidBST(TreeNode root, long minValue, long maxValue) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return true;</div><div class="line">        if (root.val &gt;= maxValue || root.val &lt;= minValue)</div><div class="line">            return false;</div><div class="line">        return isValidBST(root.left,minValue, root.val) &amp;&amp; isValidBST(root.right, root.val, maxValue);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="从二叉搜索树里面删除一个节点"><a href="#从二叉搜索树里面删除一个节点" class="headerlink" title="从二叉搜索树里面删除一个节点"></a>从二叉搜索树里面删除一个节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class DeleteNodeInABST_450 &#123;</div><div class="line">    public TreeNode deleteNode(TreeNode root, int key) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return null;</div><div class="line">        if (key &lt; root.val)</div><div class="line">            root.left = deleteNode(root.left, key);</div><div class="line">        else if (key &gt; root.val)</div><div class="line">            root.right = deleteNode(root.right, key);</div><div class="line">        else &#123;</div><div class="line">            if (root.left == null) &#123;</div><div class="line">                return root.right;</div><div class="line">            &#125;else if (root.right == null) &#123;</div><div class="line">                return root.left;</div><div class="line">            &#125;</div><div class="line">            TreeNode min = find(root.right);</div><div class="line">            root.val = min.val;</div><div class="line">            root.right = deleteNode(root.right, root.val);</div><div class="line">        &#125;</div><div class="line">        return root;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private TreeNode find(TreeNode root) &#123;</div><div class="line">        while (root.left != null)</div><div class="line">            root = root.left;</div><div class="line">        return root;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="判断一颗树是否为平衡二叉树"><a href="#判断一颗树是否为平衡二叉树" class="headerlink" title="判断一颗树是否为平衡二叉树"></a>判断一颗树是否为平衡二叉树</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class BalancedBinaryTree_110 &#123;</div><div class="line">    public boolean isBalanced(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return true;</div><div class="line">        int left = getHeight(root.left);</div><div class="line">        int right = getHeight(root.right);</div><div class="line">        return Math.abs(right - left) &lt; 2 &amp;&amp; isBalanced(root.left) &amp;&amp; isBalanced(root.right);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int getHeight(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        return 1 + Math.max(getHeight(root.left), getHeight(root.right));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="将一个有序队列转换成平衡二叉树"><a href="#将一个有序队列转换成平衡二叉树" class="headerlink" title="将一个有序队列转换成平衡二叉树"></a>将一个有序队列转换成平衡二叉树</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/10</div><div class="line"> */</div><div class="line">public class ConvertSortedArrayToBST_108 &#123;</div><div class="line">    public TreeNode sortedArrayToBST(int[] nums) &#123;</div><div class="line">        if (nums == null || nums.length == 0)</div><div class="line">            return null;</div><div class="line">        return help(nums, 0, nums.length-1);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private TreeNode help(int[] nums, int low, int high) &#123;</div><div class="line">        if (low &gt; high)</div><div class="line">            return null;</div><div class="line">        int mid = (low + high) / 2;</div><div class="line">        TreeNode root = new TreeNode(nums[mid]);</div><div class="line">        root.left = help(nums, low, mid - 1);</div><div class="line">        root.right = help(nums, mid + 1, high);</div><div class="line">        return root;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="计算一个完全二叉树的节点数"><a href="#计算一个完全二叉树的节点数" class="headerlink" title="计算一个完全二叉树的节点数"></a>计算一个完全二叉树的节点数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">import java.util.LinkedList;</div><div class="line">import java.util.Queue;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class CountCompleteTreeNode_222 &#123;</div><div class="line">    public int countNodes(TreeNode root) &#123;</div><div class="line">        int h = getHeight(root);</div><div class="line">        int nodes = 0;</div><div class="line">        while (root != null) &#123;</div><div class="line">            if (getHeight(root.right) == h - 1)&#123;</div><div class="line">                nodes += 1 &lt;&lt; h;</div><div class="line">                root = root.right;</div><div class="line">            &#125; else &#123;</div><div class="line">                nodes += 1 &lt;&lt; h - 1;</div><div class="line">                root = root.left;</div><div class="line">            &#125;</div><div class="line">            h--;</div><div class="line">        &#125;</div><div class="line">        return nodes;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private int getHeight(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return -1;</div><div class="line">        return 1 + getHeight(root.left);</div><div class="line">    &#125;</div><div class="line">    //队列</div><div class="line">    public int countNodes1(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;();</div><div class="line">        queue.add(root);</div><div class="line">        int count = 1;</div><div class="line">        while (!queue.isEmpty()) &#123;</div><div class="line">            TreeNode tmp = queue.poll();</div><div class="line">            if (tmp.val != -1) &#123;</div><div class="line">                tmp.val = -1;</div><div class="line">                if (tmp.left != null) &#123;</div><div class="line">                    queue.offer(tmp.left);</div><div class="line">                    count++;</div><div class="line">                &#125;</div><div class="line">                if (tmp.right != null) &#123;</div><div class="line">                    queue.offer(tmp.right);</div><div class="line">                    count++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return count;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="反转二叉树"><a href="#反转二叉树" class="headerlink" title="反转二叉树"></a>反转二叉树</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class InverseBinaryTree_226 &#123;</div><div class="line">    public TreeNode invertTree(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return null;</div><div class="line">        invertTree(root.left);</div><div class="line">        invertTree(root.right);</div><div class="line">        TreeNode tmp = root.left;</div><div class="line">        root.left = root.right;</div><div class="line">        root.right = tmp;</div><div class="line">        return root;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="相等的树"><a href="#相等的树" class="headerlink" title="相等的树"></a>相等的树</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class SameTree_100 &#123;</div><div class="line">    public boolean isSameTree(TreeNode p, TreeNode q) &#123;</div><div class="line">        if (p == null &amp;&amp; q == null)</div><div class="line">            return true;</div><div class="line">        if (p == null || q == null)</div><div class="line">            return false;</div><div class="line">        if (p.val == q.val)</div><div class="line">            return isSameTree(p.left,q.left) &amp;&amp; isSameTree(p.right, q.right);</div><div class="line">        else</div><div class="line">            return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="左叶子节点的和"><a href="#左叶子节点的和" class="headerlink" title="左叶子节点的和"></a>左叶子节点的和</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class SumOfLeftLeaves_404 &#123;</div><div class="line">    public int sumOfLeftLeaves(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        if (root.left != null &amp;&amp; root.left.left == null &amp;&amp; root.left.right == null)</div><div class="line">            return root.left.val + sumOfLeftLeaves(root.right);</div><div class="line">        return sumOfLeftLeaves(root.left) + sumOfLeftLeaves(root.right);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="根节点到所有节点的和"><a href="#根节点到所有节点的和" class="headerlink" title="根节点到所有节点的和"></a>根节点到所有节点的和</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.linkedList.ListNode;</div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class SumRootToLeafNumbers_129 &#123;</div><div class="line">    public int sumNumbers(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</div><div class="line">        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</div><div class="line">        getPathSum(root, res, list);</div><div class="line">        int result = 0;</div><div class="line">        for (List&lt;Integer&gt; list1 : res) &#123;</div><div class="line">            int tmp = 0;</div><div class="line">            for (Integer i : list1) &#123;</div><div class="line">                tmp = tmp * 10 + i;</div><div class="line">            &#125;</div><div class="line">            result += tmp;</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    private void getPathSum(TreeNode root,List&lt;List&lt;Integer&gt;&gt; res, List&lt;Integer&gt; list) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return;</div><div class="line">        list.add(root.val);</div><div class="line">        if (root.left == null &amp;&amp; root.right == null) &#123;</div><div class="line">            res.add(new ArrayList&lt;&gt;(list));</div><div class="line">            list.remove(list.size() - 1);</div><div class="line">            return;</div><div class="line">        &#125; else &#123;</div><div class="line">            getPathSum(root.left, res, list);</div><div class="line">            getPathSum(root.right, res, list);</div><div class="line">        &#125;</div><div class="line">        list.remove(list.size() - 1);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int sumNumbers1(TreeNode root) &#123;</div><div class="line">        return sumNumbers(root, 0);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int sumNumbers(TreeNode root, int sum) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return 0;</div><div class="line">        sum = sum * 10 + root.val;</div><div class="line">        if (root.left == null &amp;&amp; root.right == null) &#123;</div><div class="line">            return sum;</div><div class="line">        &#125;</div><div class="line">        return sumNumbers(root.left, sum) + sumNumbers(root.right, sum);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="镜像树问题"><a href="#镜像树问题" class="headerlink" title="镜像树问题"></a>镜像树问题</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">package leetcode.binaryTree;</div><div class="line"></div><div class="line">import leetcode.stack.TreeNode;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/9</div><div class="line"> */</div><div class="line">public class SymmetricTree_101 &#123;</div><div class="line">    public boolean isSymmetric(TreeNode root) &#123;</div><div class="line">        if (root == null)</div><div class="line">            return true;</div><div class="line">        return isSymmetricHelp(root.left, root.right);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isSymmetricHelp(TreeNode left, TreeNode right) &#123;</div><div class="line">        if (left == null &amp;&amp; right == null)</div><div class="line">            return true;</div><div class="line">        if (left == null || right == null)</div><div class="line">            return false;</div><div class="line">        if (left.val == right.val)</div><div class="line">            return isSymmetricHelp(left.left, right.right) &amp;&amp; isSymmetricHelp(left.right,right.left);</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/数据结构-两个栈实现一个队列以及两个队列实现一个栈/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/数据结构-两个栈实现一个队列以及两个队列实现一个栈/" itemprop="url">数据结构-两个栈实现一个队列和两个队列实现一个栈</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="两个栈实现一个队列"><a href="#两个栈实现一个队列" class="headerlink" title="两个栈实现一个队列"></a>两个栈实现一个队列</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">import java.util.Stack;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/13</div><div class="line"> */</div><div class="line">public class TwoStackImpQueue &#123;</div><div class="line">    private Stack&lt;Integer&gt; stack1 = new Stack&lt;&gt;();</div><div class="line">    private Stack&lt;Integer&gt; stack2 = new Stack&lt;&gt;();</div><div class="line"></div><div class="line">    public void push(int node) &#123;</div><div class="line">        stack1.push(node);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Integer pop() &#123;</div><div class="line">        if (stack2.size() &lt;= 0) &#123;</div><div class="line">            while (stack1.size() &gt; 0) &#123;</div><div class="line">                stack2.push(stack1.pop());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if (stack2.isEmpty()) &#123;</div><div class="line">            try &#123;</div><div class="line">                throw new Exception(&quot;queue is empty&quot;);</div><div class="line">            &#125; catch (Exception e)&#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return stack2.pop();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="两个队列实现一个栈"><a href="#两个队列实现一个栈" class="headerlink" title="两个队列实现一个栈"></a>两个队列实现一个栈</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">import java.util.LinkedList;</div><div class="line">import java.util.Queue;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/13</div><div class="line"> */</div><div class="line">public class TwoListImpStack &#123;</div><div class="line">    private Queue&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();</div><div class="line">    private Queue&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();</div><div class="line"></div><div class="line">    public void push(int node) &#123;</div><div class="line">        if (list1.isEmpty() &amp;&amp; list2.isEmpty())&#123;</div><div class="line">            list1.add(node);</div><div class="line">        &#125; else if (list1.isEmpty()) &#123;</div><div class="line">            list2.add(node);</div><div class="line">        &#125; else &#123;</div><div class="line">            list2.add(node);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Integer pop() &#123;</div><div class="line">        if (list1.isEmpty() &amp;&amp; list2.isEmpty())&#123;</div><div class="line">            try &#123;</div><div class="line">                throw new Exception(&quot;stack is Empty!&quot;);</div><div class="line">            &#125; catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125; else if (list1.isEmpty()) &#123;</div><div class="line">            while (list2.size() &gt; 1) &#123;</div><div class="line">                list1.add(list2.poll());</div><div class="line">            &#125;</div><div class="line">            return list2.poll();</div><div class="line">        &#125; else &#123;</div><div class="line">            while (list1.size() &gt; 1) &#123;</div><div class="line">                list2.add(list1.poll());</div><div class="line">            &#125;</div><div class="line">            return list1.poll();</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/算法/算法之BFS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/算法/算法之BFS/" itemprop="url">算法-BFS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="完美平方数"><a href="#完美平方数" class="headerlink" title="完美平方数"></a>完美平方数</h1><p>DP解法和图论解法，掌握DP的为准，参考图论解法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">package leetcode.BFSGraphic;</div><div class="line"></div><div class="line">import java.util.HashMap;</div><div class="line">import java.util.LinkedList;</div><div class="line">import java.util.Queue;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/8</div><div class="line"> */</div><div class="line">public class PerfectSquares_279 &#123;</div><div class="line">    public int numSquares(int n) &#123;</div><div class="line">        Queue&lt;Pair&gt; queue = new LinkedList&lt;&gt;();</div><div class="line">        queue.offer(new Pair(n, 0));</div><div class="line">        boolean[] visited = new boolean[n+1];</div><div class="line">        visited[n] = true;</div><div class="line">        while (!queue.isEmpty()) &#123;</div><div class="line">            Pair pair = queue.poll();</div><div class="line">            int num = pair.num;</div><div class="line">            int step = pair.step;</div><div class="line">            if (num == 0)</div><div class="line">                return step;</div><div class="line">            for (int i = 1; num - i * i &gt;= 0; i++) &#123;</div><div class="line">                if (!visited[num-i*i]) &#123;</div><div class="line">                    queue.offer(new Pair(num - i * i, step + 1));</div><div class="line">                    visited[num - i * i] = true;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return n;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * num:当前数</div><div class="line">     * step:n到num需要的步数</div><div class="line">     */</div><div class="line">    class Pair &#123;</div><div class="line">        int num;</div><div class="line">        int step;</div><div class="line">        public Pair(int num, int step) &#123;</div><div class="line">            this.num = num;</div><div class="line">            this.step = step;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="WordLadder"><a href="#WordLadder" class="headerlink" title="WordLadder"></a>WordLadder</h1><p>注释很清楚了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">package leetcode.BFSGraphic;</div><div class="line"></div><div class="line">import java.util.*;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by cdx0312</div><div class="line"> * 2018/4/8</div><div class="line"> */</div><div class="line">public class WordLadder_127 &#123;</div><div class="line">    /*</div><div class="line">        beginSet开始存放beginword，然后将经过一次变更字母之后可以编程的wordList中的字符串</div><div class="line">        放入beginSet，直到出现变换成最终的字符串。</div><div class="line">     */</div><div class="line">    public int ladderLength(String beginWord, String endWord, List&lt;String&gt; wordList) &#123;</div><div class="line">        Set&lt;String&gt; dict = new HashSet&lt;&gt;(wordList), qs = new HashSet&lt;&gt;(), qe = new HashSet&lt;&gt;(), vis = new HashSet&lt;&gt;();</div><div class="line">        qs.add(beginWord);</div><div class="line">        if (dict.contains(endWord))</div><div class="line">            qe.add(endWord); // all transformed words must be in dict (including endWord)</div><div class="line">        for (int len = 2; !qs.isEmpty(); len++) &#123;</div><div class="line">            Set&lt;String&gt; nq = new HashSet&lt;&gt;();</div><div class="line">            for (String w : qs) &#123;</div><div class="line">                for (int j = 0; j &lt; w.length(); j++) &#123;</div><div class="line">                    char[] ch = w.toCharArray();</div><div class="line">                    for (char c = &apos;a&apos;; c &lt;= &apos;z&apos;; c++) &#123;</div><div class="line">                        if (c == w.charAt(j))</div><div class="line">                            continue; // beginWord and endWord not the same, so bypass itself</div><div class="line">                        ch[j] = c;</div><div class="line">                        String nb = String.valueOf(ch);</div><div class="line">                        if (qe.contains(nb))</div><div class="line">                            return len; // meet from two ends</div><div class="line">                        if (dict.contains(nb) &amp;&amp; vis.add(nb))</div><div class="line">                            nq.add(nb); // not meet yet, vis is safe to use</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            qs = (nq.size() &lt; qe.size()) ? nq : qe; // switch to small one to traverse from other end</div><div class="line">            qe = (qs == nq) ? qe : nq;</div><div class="line">        &#125;</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/数据库/数据库整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/数据库/数据库整理/" itemprop="url">数据库整理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/database/" itemprop="url" rel="index">
                    <span itemprop="name">database</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是存储过程？有什么优缺点？"><a href="#什么是存储过程？有什么优缺点？" class="headerlink" title="什么是存储过程？有什么优缺点？"></a>什么是存储过程？有什么优缺点？</h1><p>存储过程是一些预编译的SQL语句。也就是说存储过程是一个记录集，它是由一些T-SQL语句组成的代码块，这些T-SQL语句代码像一个方法一样实现一些功能（比如对单表的CRUD），然后再给这个代码块取一个名字，在用到这个功能的时候调用就可以。</p>
<ul>
<li>存储过程是一个预编译的代码块，执行效率比较高</li>
<li>一个存储过程替代大量T-SQL语句，可以降低网络通信量，提高通信速率。</li>
<li>可以一定程度上确保数据安全。</li>
</ul>
<h1 id="索引是什么？有什么作用及优缺点？"><a href="#索引是什么？有什么作用及优缺点？" class="headerlink" title="索引是什么？有什么作用及优缺点？"></a>索引是什么？有什么作用及优缺点？</h1><ul>
<li><p>索引是对数据库表中一列或多列的值进行排序的结构，是帮助MySQL高效获取数据的数据结构。</p>
</li>
<li><p>索引就是加快检索表中数据的方法。数据库的索引类似于书籍的索引。在书籍中，索引允许用户不必翻阅整个书就能迅速地找到所需要的信息。在数据库中，索引也允许数据库程序迅速地找到表中的数据，而不必扫描整个数据库。</p>
</li>
<li><p>MySQL数据库几个基本的索引类型：</p>
<ul>
<li><p>普通索引：没有任何限制，最基本的索引，创建方式有以下几种</p>
<ul>
<li><p>直接创建索引：<code>CREATE INDEX index_name ON table(column(length))</code></p>
</li>
<li><p>修改表结构的方式添加索引：<code>ALTER TABLE table_name ADD INDEX index_name ON (column(length))</code></p>
</li>
<li><p>创建表的时候创建索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `table` (</div><div class="line">  `id` int(11) NOT NULL AUTO_INCREMENT ,</div><div class="line">  `title` char(255) CHARACTER NOT NULL ,</div><div class="line">  `content` text CHARACTER NULL ,</div><div class="line">  `time` int(10) NULL DEFAULT NULL ,</div><div class="line">  PRIMARY KEY (`id`),</div><div class="line">  INDEX index_name (title(length))</div><div class="line">  )</div></pre></td></tr></table></figure>
</li>
<li><p>删除索引：<code>DROP INDEX index_name ON table</code></p>
</li>
</ul>
</li>
<li><p>主键索引：一种特殊的唯一索引，一个表只能有一个主键，不允许有空值。一般在建表的同时创建主键索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `table` (</div><div class="line">    `id` int(11) NOT NULL AUTO_INCREMENT ,</div><div class="line">    `title` char(255) NOT NULL ,</div><div class="line">    PRIMARY KEY (`id`)</div><div class="line">);</div></pre></td></tr></table></figure>
</li>
<li><p>唯一索引：索引列的值必须是唯一的，允许有控制。如果是组合索引，则列的组合必须唯一，创建方式：</p>
<ul>
<li><p>创建唯一索引：<code>CREATE UNIQUE INDEX indexName ON table(column(length))</code></p>
</li>
<li><p>修改表结构的时候指定唯一索引：<code>ALTER TABLE table_name ADD UNIQUE indexName ON (column(length))</code>  </p>
</li>
<li><p>创建表的时候直接指定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `table` (</div><div class="line">    `id` int(11) NOT NULL AUTO_INCREMENT ,</div><div class="line">    `title` char(255) CHARACTER NOT NULL ,</div><div class="line">    `content` text CHARACTER NULL ,</div><div class="line">    `time` int(10) NULL DEFAULT NULL ,</div><div class="line">    UNIQUE indexName (title(length))</div><div class="line">);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>组合索引：多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用，使用组合索引时遵循最左前缀集合：<code>ALTER TABLE</code>table<code>ADD INDEX name_city_age (name,city,age);</code></p>
</li>
<li><p>全文索引:主要用来查找文本中的关键字，而不是直接参与索引中的值的比较。fulltext索引和其他索引不太一样，更像一个搜索引擎，而不是一个简单的where语句的参数匹配。fulltext索引配合match against操作使用，而不是一般的where语句加like。全文索引可以在建表，修改表，创建索引中使用，不过目前只有cahr,varchar,text列上可以创建全文索引。而当数据量较大时，将现有数据放入一个没有全局索引的表中，然后再create index创建全文索引，要比先为一张表创建全文索引然后再将数据写入速度快很多。</p>
<ul>
<li><p>创建表时添加全文索引:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `table` (</div><div class="line">    `id` int(11) NOT NULL AUTO_INCREMENT ,</div><div class="line">    `title` char(255) CHARACTER NOT NULL ,</div><div class="line">    `content` text CHARACTER NULL ,</div><div class="line">    `time` int(10) NULL DEFAULT NULL ,</div><div class="line">    PRIMARY KEY (`id`),</div><div class="line">    FULLTEXT (content)</div><div class="line">);</div></pre></td></tr></table></figure>
</li>
<li><p>修改表结构添加全文索引：<code>ALTER TABLE article ADD FULLTEXT index_content(content)</code></p>
</li>
<li><p>直接创建索引：<code>CREATE FULLTEXT INDEX index_content ON article(content)</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>优缺点：</p>
<ul>
<li>索引加快数据库的检索速度</li>
<li>索引降低了插入，删除，修改等维护任务的速度</li>
<li>唯一索引可以确保每一行数据的唯一性</li>
<li>通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能。</li>
<li>索引需要占物理和数据空间</li>
</ul>
</li>
</ul>
<h1 id="什么是事务？"><a href="#什么是事务？" class="headerlink" title="什么是事务？"></a>什么是事务？</h1><ul>
<li>事务是并发控制的基本单位。所谓的事务，它指的是一个操作序列，这些操作要么都执行，要么都不执行。它是一个不可分割的工作单位。事务是数据库维护数据一致性的单位，在每个事务结束时，都能保持数据的一致性。</li>
</ul>
<h1 id="数据库的乐观锁AND悲观锁是什么？"><a href="#数据库的乐观锁AND悲观锁是什么？" class="headerlink" title="数据库的乐观锁AND悲观锁是什么？"></a>数据库的乐观锁AND悲观锁是什么？</h1><ul>
<li>数据库管理系统DBMS中并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。</li>
<li>乐观锁和悲观锁是并发控制主要采用的技术手段：<ul>
<li>乐观锁：假定不会发生并发冲突，只在提交操作时检查是否违反数据完整性。</li>
<li>悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。</li>
</ul>
</li>
</ul>
<h1 id="使用索引查询一定能提高查询的性能吗？为什么？"><a href="#使用索引查询一定能提高查询的性能吗？为什么？" class="headerlink" title="使用索引查询一定能提高查询的性能吗？为什么？"></a>使用索引查询一定能提高查询的性能吗？为什么？</h1><ul>
<li>通常来说，通过索引查询数据比全表扫描要快。</li>
<li>但是索引需要空间来存储，也需要定期维护。每当有记录在表中增减或者索引列被修改时，索引本身也会被修改。意味着每条记录的insert，delete，update方法将会为此多付出4,5次的磁盘IO。</li>
<li>因为索引需要额外的存储空间和处理，那些不必要的索引反而会使查询反应时间变慢。使用索引不一定能提高查询性能。</li>
<li><p>索引范围性查找适用于两种情况：</p>
<ul>
<li>基于一个范围的检索，一般返回结果集小于表中记录的30%。</li>
<li>基于唯一性索引的检索。</li>
</ul>
</li>
</ul>
<h1 id="MySQL数据库索引失效的原因："><a href="#MySQL数据库索引失效的原因：" class="headerlink" title="MySQL数据库索引失效的原因："></a>MySQL数据库索引失效的原因：</h1><ul>
<li>对单字段建立了索引，where条件多字段</li>
<li>建立了联合索引，where条件单字段</li>
<li>对索引列运算，运算包括（+、-、*、/、！、&lt;&gt;、%、like’%_‘、or、in、exist）导致索引失效</li>
<li>类型错误，如字段类型为varchar，where条件用number</li>
<li>对应索引内部函数，这种情况下应该建立基于函数的索引</li>
<li>查询表的效率要比查询索引快的情况</li>
<li>is null索引失效，is not null betree索引生效。</li>
</ul>
<h1 id="说一下drop、delete、truncate的区别："><a href="#说一下drop、delete、truncate的区别：" class="headerlink" title="说一下drop、delete、truncate的区别："></a>说一下drop、delete、truncate的区别：</h1><ul>
<li>delete和truncate只删除表的数据不删除表的结构</li>
<li>速度来说：drop&gt;truncate&gt;delete</li>
<li>delete语句是dml，这个操作会放到rollback segment中，事务提交之后才生效。如果有相应的trigger，执行的时候将被出发。truncate和drop是ddl，操作立即生效，原数据不放到rollback segment中，不能回滚也不能触发trigger。</li>
</ul>
<h1 id="drop、delete、truncate的使用场景？"><a href="#drop、delete、truncate的使用场景？" class="headerlink" title="drop、delete、truncate的使用场景？"></a>drop、delete、truncate的使用场景？</h1><ul>
<li>drop，不再需要一张表时</li>
<li>delete，向删除部分数据行时，并带上where子句</li>
<li>truncate，保留表结构而删除所有数据的时候</li>
</ul>
<h1 id="超键，候选键，主键，外键分别是什么"><a href="#超键，候选键，主键，外键分别是什么" class="headerlink" title="超键，候选键，主键，外键分别是什么"></a>超键，候选键，主键，外键分别是什么</h1><table>
<thead>
<tr>
<th></th>
<th style="text-align:center">GET</th>
</tr>
</thead>
<tbody>
<tr>
<td>超键</td>
<td style="text-align:center">在关系中能唯一标识元组的属性集成为关系模式的超键。一个属性可以作为一个超键，多个属性组合在一起也可以作为一个超键。超键包含候选键和主键</td>
</tr>
<tr>
<td>候选键</td>
<td style="text-align:center">是最小的超键，即没有冗余元素的超键</td>
</tr>
<tr>
<td>主键</td>
<td style="text-align:center">数据库表中对存储数据对象给予唯一和完整标识的数据列或者属性的集合。一个数据列只能有一个主键，且主键的取值不能缺少，即不能为空值（null）</td>
</tr>
<tr>
<td>外键</td>
<td style="text-align:center">在一个表中存在另一个表的主键称为此表的外键</td>
</tr>
</tbody>
</table>
<h1 id="什么是视图？以及视图的使用场景？"><a href="#什么是视图？以及视图的使用场景？" class="headerlink" title="什么是视图？以及视图的使用场景？"></a>什么是视图？以及视图的使用场景？</h1><ul>
<li><p>视图是一张虚拟的表，具有和物理表相同的功能。可以对视图进行CRUD，视图通常是由一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易，相比多表查询。</p>
</li>
<li><p>只暴露部分字段给访问者，所以就建一个虚表，也就是一个视图。</p>
</li>
<li>查询的数据来源于不同的表，而查询者希望以统一的方式查询，这样可以建立一个视图，把多个表查询结果联合起来，查询者只需要直接从视图中获取数据，不必考虑数据来源于不同表中的差异。</li>
</ul>
<h1 id="数据库三范式"><a href="#数据库三范式" class="headerlink" title="数据库三范式"></a>数据库三范式</h1><ul>
<li><p>1NF：数据库表中的字段都是单一属性，不可再分。这个单一属性由基本类型构成，包括整形，实数，字符型，逻辑型，日期型等。</p>
</li>
<li><p>2NF：数据库表中不存在非关键字段对任意候选关键字段的部分依赖（部分依赖指的是存在组合关键字中的某些字段决定非关键字段的情况），也即所有非关键字段都完全依赖于任意一组候选关键字。</p>
</li>
<li><p>3NF：数据表中不存在非关键字段对任一候选关键字段的传递依赖。传递依赖指的数据库中不存在如下依赖关系：关键字段-&gt;非关键字段X-&gt;非关键字段Y</p>
</li>
</ul>
<h1 id="SQL语句总结"><a href="#SQL语句总结" class="headerlink" title="SQL语句总结"></a>SQL语句总结</h1><ol>
<li><p>SELECT：将数据从数据库中的表中取出，<code>SELECT &quot;列名&quot; FROM &quot;表名&quot;</code>。</p>
</li>
<li><p>DISTINCT：去重，在上述 SELECT 关键词后加上一个 DISTINCT 就可以去除选择出来的重复，从而完成求得这个表格中该字段有哪些不同的值的功能。语法为<code>SELECT DISTINCT &quot;列名&quot; FROM &quot;表名&quot;</code>。</p>
</li>
<li><p>WHERE：这个关键词可以帮助我们选择性地获取数据，而不是全取出来。语法为<code>SELECT &quot;列名&quot; FROM &quot;表名&quot; WHERE &quot;条件&quot;</code></p>
</li>
<li><p>AND OR：上例中的 WHERE 指令可以被用来由表格中有条件地选取资料。这个条件可能是简单的，也可能是复杂的。复杂条件是由二或多个简单条件透过 AND 或是 OR 的连接而成。语法为：<code>SELECT &quot;列名&quot;  FROM &quot;表名&quot;  WHERE &quot;简单条件&quot;  {[AND|OR] &quot;简单条件&quot;}+</code></p>
</li>
<li><p>IN：在SQL中，与 WHERE一起使用，我们事先已知道至少一个我们需要的值，而我们将这些知道的值都放入 IN  这个子句。语法为：<code>SELECT &quot;列名&quot;  FROM &quot;表名&quot;  WHERE &quot;列名&quot; IN (&#39;值一&#39;, &#39;值二&#39;, ...)</code>  </p>
</li>
<li><p>BETWEEN：IN 这个指令可以让我们依照一或数个不连续 (discrete)的值的限制之内获取数据，而 BETWEEN 则是让我们可以运用一个范围 (range)获取数据，语法为：<br><code>SELECT &quot;列名&quot;  FROM &quot;表名&quot; WHERE &quot;列名&quot; BETWEEN &#39;值一&#39; AND &#39;值二&#39;</code></p>
</li>
<li><p>LIKE：LIKE 是另一个在 WHERE子句中会用到的指令。LIKE依据一个模式(pattern)来找出我们要的数据。语法为：<br><code>SELECT &quot;列名&quot;  FROM &quot;表名&quot;  WHERE &quot;列名&quot; LIKE {模式}</code></p>
</li>
<li><p>ORDER BY：排序指令。语法为：<code>SELECT &quot;列名&quot;  FROM &quot;表名 [WHERE &quot;条件&quot;] ORDER BY &quot;列名&quot; [ASC, DESC]</code></p>
</li>
<li><p>函数: 函数允许我们能够对这些数字的型态存在的行或者列做运算，包括 AVG (平均)、COUNT (计数)、MAX (最大值)、MIN (最小值)、SUM (总合)。语法为：<code>SELECT &quot;函数名&quot;(&quot;列名&quot;) FROM &quot;表名&quot;</code></p>
</li>
<li><p>COUNT：这个关键词能够帮我我们统计有多少个数据被选出来，语法为：<code>SELECT COUNT(&quot;列名&quot;) FROM &quot;表名&quot;</code></p>
</li>
<li><p>GROUP BY：GROUP BY 语句用于结合合计函数，根据一个或多个列对结果集进行分组。语法为：<code>SELECT &quot;列1&quot;, SUM(&quot;列2&quot;)  FROM &quot;表名&quot;  GROUP BY &quot;列1&quot;</code></p>
</li>
<li><p>HAVING：该关键词可以帮助我们对函数产生的值来设定条件。语法为：<code>SELECT &quot;；列1&quot;, SUM(&quot;列2&quot;)  FROM &quot;表格名&quot;  GROUP BY &quot;列1&quot;  HAVING (函数条件)</code></p>
</li>
<li><p>ALIAS：我们可以通过ALIAS为列名称和表名称指定别名，语法为：<code>SELECT &quot;表格别名&quot;.&quot;列1&quot; &quot;；列1别名&quot;  FROM &quot;表格名&quot; &quot;表格别名&quot;</code></p>
</li>
</ol>
<ul>
<li>实战，数据库结构如下</li>
</ul>
<p>Student(S#,Sname,Sage,Ssex) 学生表<br>Course(C#,Cname,T#) 课程表<br>SC(S#,C#,score) 成绩表<br>Teacher(T#,Tname) 教师表</p>
<pre><code>1. 查询“001”课程比“002”课程成绩高的所有学生的学号：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT a.S# from (select s#,score from SC where C#=&apos;001&apos;) a,</div><div class="line">(select s#,score from SC where C#=&apos;002&apos;) b</div><div class="line">WHERE a.score &gt; b.score and a.S#=b.S#;</div></pre></td></tr></table></figure>

2. 查询平均成绩大于60分的同学的学号和平均成绩：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT S#, AVG(score)</div><div class="line">FROM SC</div><div class="line">GROUP by S# HAVING AVG(score) &gt; 60;</div></pre></td></tr></table></figure>

3. 查询所有同学的学号、姓名、选课数、总成绩:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select Student.S#, Student.Sname, COUNT(SC.C#), SUM(score)</div><div class="line">from Student left Outer join SC on Student.S#=SC.S#</div><div class="line">GROUP by Student.S#, Sname;</div></pre></td></tr></table></figure>

4. 查询姓“李”的老师的个数:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select COUNT(distinct(Tname))</div><div class="line">from Teacher</div><div class="line">WHERE Tname LIKE &apos;李%&apos;；</div></pre></td></tr></table></figure>

5. 查询没学过“叶平”老师课的同学的学号、姓名；

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select Student.S#,Student.Sname</div><div class="line">from Student</div><div class="line">where S# not in (select distinct( SC.S#) from SC,Course,Teacher where SC.C#=Course.C# and Teacher.T#=Course.T# and Teacher.Tname=’叶平’);</div></pre></td></tr></table></figure>

6. 查询学过“001”并且也学过编号“002”课程的同学的学号、姓名:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select Student.S#,Student.Sname</div><div class="line">from Student,SC</div><div class="line">where Student.S#=SC.S# and SC.C#=’001′and exists( Select * from SC as SC_2 where SC_2.S#=SC.S# and SC_2.C#=’002′);</div></pre></td></tr></table></figure>

7. 查询学过“叶平”老师所教的所有课的同学的学号、姓名:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">select S#,Sname</div><div class="line">from Student</div><div class="line">where S# in</div><div class="line">(select S#</div><div class="line">from SC ,Course ,Teacher</div><div class="line">where SC.C#=Course.C# and Teacher.T#=Course.T# and Teacher.Tname=’叶平’ group by S# having count(SC.C#)=(select count(C#) from Course,Teacher where Teacher.T#=Course.T# and Tname=’叶平’));</div></pre></td></tr></table></figure>

8. 查询所有课程成绩小于60分的同学的学号、姓名:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select S#,Sname</div><div class="line">from Student</div><div class="line">where S# not in (select Student.S# from Student,SC where S.S#=SC.S# and score&gt;60);</div></pre></td></tr></table></figure>

9. 查询没有学全所有课的同学的学号、姓名:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">select Student.S#,Student.Sname</div><div class="line">from Student,SC</div><div class="line">where Student.S#=SC.S#</div><div class="line">group by Student.S#,Student.Sname having count(C#) &lt;(select count(C#) from Course);</div></pre></td></tr></table></figure>

10. 查询至少有一门课与学号为“1001”的同学所学相同的同学的学号和姓名:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select S#,Sname</div><div class="line">from Student,SC</div><div class="line">where Student.S#=SC.S# and C# in （select C# from SC where S#=&apos;1001&apos;）;</div></pre></td></tr></table></figure>

11. 删除学习“叶平”老师课的SC表记录:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Delect SC</div><div class="line">from course ,Teacher</div><div class="line">where Course.C#=SC.C# and Course.T#= Teacher.T# and Tname=&apos;叶平&apos;;</div></pre></td></tr></table></figure>

12. 查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">SELECT L.C# 课程ID,L.score 最高分,R.score 最低分</div><div class="line">FROM SC L ,SC R</div><div class="line">WHERE L.C# = R.C#</div><div class="line">and</div><div class="line">L.score = (SELECT MAX(IL.score)</div><div class="line">FROM SC IL,Student IM</div><div class="line">WHERE IL.C# = L.C# and IM.S#=IL.S#</div><div class="line">GROUP BY IL.C#)</div><div class="line">and</div><div class="line">R.Score = (SELECT MIN(IR.score)</div><div class="line">FROM SC IR</div><div class="line">WHERE IR.C# = R.C#</div><div class="line">GROUP BY IR.C# );</div></pre></td></tr></table></figure>

  13. 查询学生平均成绩及其名次:
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">SELECT 1+(SELECT COUNT( distinct 平均成绩)</div><div class="line">FROM (SELECT S#,AVG(score) 平均成绩</div><div class="line">FROM SC</div><div class="line">GROUP BY S# ) T1</div><div class="line">WHERE 平均成绩 &gt; T2.平均成绩) 名次, S# 学生学号,平均成绩</div><div class="line">FROM (SELECT S#,AVG(score) 平均成绩 FROM SC GROUP BY S# ) T2</div><div class="line">ORDER BY 平均成绩 desc;</div></pre></td></tr></table></figure>

  14. 查询各科成绩前三名的记录:(不考虑成绩并列情况)

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">SELECT t1.S# as 学生ID,t1.C# as 课程ID,Score as 分数</div><div class="line">FROM SC t1</div><div class="line">WHERE score IN (SELECT TOP 3 score</div><div class="line">FROM SC</div><div class="line">WHERE t1.C#= C#</div><div class="line">ORDER BY score DESC)</div><div class="line">ORDER BY t1.C#;</div></pre></td></tr></table></figure>

  15. 查询每门功成绩最好的前两名
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">SELECT t1.S# as 学生ID,t1.C# as 课程ID,Score as 分数</div><div class="line">FROM SC t1</div><div class="line">WHERE score IN (SELECT TOP 2 score</div><div class="line">FROM SC</div><div class="line">WHERE t1.C#= C#</div><div class="line">ORDER BY score DESC )</div><div class="line">ORDER BY t1.C#;</div></pre></td></tr></table></figure>
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/java/多线程并发编程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/java/多线程并发编程/" itemprop="url">多线程并发编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-21T14:13:14+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/concurrent-programming/" itemprop="url" rel="index">
                    <span itemprop="name">concurrent programming</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="并发基础知识与核心知识"><a href="#并发基础知识与核心知识" class="headerlink" title="并发基础知识与核心知识"></a>并发基础知识与核心知识</h1><h2 id="并发与高并发"><a href="#并发与高并发" class="headerlink" title="并发与高并发"></a>并发与高并发</h2><ul>
<li>并发：同时拥有两个或者多个线程，如果程序在单核处理器上运行，多个线程将交替的换入或者换出内存，这些线程是同时存在的，每个线程处于执行过程中的某个状态，如果运行在多核处理器上，此时程序中的每个线程将被分到一个处理器核上，因此可以同时运行。</li>
<li>高并发：high concurrency是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指通过设计保证系统能够同时并行处理很多请求。</li>
</ul>
<h2 id="CPU多级缓存"><a href="#CPU多级缓存" class="headerlink" title="CPU多级缓存"></a>CPU多级缓存</h2><p><img src="/img/markdown-img-paste-20181030193947869.png" alt="CPU多级缓存"></p>
<ul>
<li>CPU的频率远远快与主存的速度，在处理器的时钟周期内，CPU需要等待主存，为了最大限度的利用CPU的性能，引入了Cache，环节CPU和内存之间速度的不匹配。</li>
<li><p>缓存的意义：</p>
<ul>
<li><p>时间局部性：如果某个数据被访问，那么在不久的将来它很可能再次被访问</p>
</li>
<li><p>空间局部性：如果某个数据被访问，那么与它相邻的数据很快也可能被访问</p>
</li>
</ul>
</li>
<li><p>缓存一致性-MESI：</p>
<ul>
<li><p>用于保证多个CPU cache之间缓存共享数据的一致性</p>
</li>
<li><p><img src="/img/markdown-img-paste-20181030195647642.png" alt></p>
<ul>
<li><p>M：修改，该缓存行只被缓存在缓存中，与CPU之间的数据是不同的，需要重新写入主存</p>
</li>
<li><p>E：独享，该缓存行只被缓存在缓存中，与CPU之间的数据一致</p>
</li>
<li><p>S：共享，该缓存行可能被多个CPU进行缓存</p>
</li>
<li><p>I：无效，有其他CPU修改了该缓存航</p>
</li>
<li><p>local read</p>
</li>
<li><p>local write</p>
</li>
<li><p>remote read</p>
</li>
<li><p>remote write</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>乱序执行优化：处理器为提高运算速度而做出违背代码原有顺序的优化</p>
</li>
<li><p>Java内存模型</p>
<ul>
<li><p>Heap：运行时数据区，可以动态分配内存大小，GC负责，存取速度相对较慢</p>
</li>
<li><p>Stack：存取速度较快，大小固定</p>
</li>
<li><p>当两个线程同时调用同一个对象的同一个方法，两个线程则拥有这个对象的私有拷贝</p>
<p><img src="/img/markdown-img-paste-20181030201239548.png" alt></p>
<p><img src="/img/markdown-img-paste-20181030202501137.png" alt="内存模型抽象图"></p>
</li>
<li><p>同步操作与规则：</p>
<ul>
<li><p>操作：</p>
<ul>
<li><p>lock：作用于主内存的变量，把一个变量标识为一个线程独占状态</p>
</li>
<li><p>unlock：作用于主内存的变量，把一个处于锁定状态的变量释放出来，释放后的变量才可以被其他线程锁定。</p>
</li>
<li><p>read：作用于主内存的变量，把一个变量值从主内存传输到线程的工作内存中，以便随后的load使用</p>
</li>
<li><p>load：作用于工作内存的变量，把read操作从主内存中得到的变量值放入到工作内存的变量副本中</p>
</li>
<li><p>use：作用于工作内存的变量，将工作内存中的一个变量值传递给执行引擎</p>
</li>
<li><p>assign：作用于工作内存的变量，把一个从执行引擎接收到的值赋值给工作内存的变量</p>
</li>
<li><p>store：作用于工作内存的变量，把工作内存中的一个变量的值传送到主内存中，以便随后的写入操作</p>
</li>
<li><p>write：作用于主内存的变量，把store操作从工作内存的中一个变量的值传送到主内存的变量中</p>
</li>
<li><p><img src="/img/markdown-img-paste-20181030203010624.png" alt></p>
</li>
</ul>
</li>
<li><p>规则：</p>
<ul>
<li><p>如果要把一个变量从主内存中复制到工作内存，就需要按顺序的执行read和load操作，如果把变量从工作内存中同步回主内存中，就要按顺序地执行store和write操作。但Java内存模型只要求上述操作必须按顺序执行，而没有保证必须是连续执行</p>
</li>
<li><p>不允许read和load，store和write操作之一单独出现</p>
</li>
<li><p>不允许一个线程丢弃它最近的assign操作，即变量在工作内存中改变了之后必须同步到主内存中</p>
</li>
<li><p>不允许一个线程无原因的把数据从工作内存同步回主内存中</p>
</li>
<li><p>一个新的变量只能在主内存中诞生，不允许在工作内存中直接使用一个未被初始化的变量。也就是对一个变量实施use和store操作之前，必须先执行过了assign和load操作</p>
</li>
<li><p>一个变量在同一时刻只允许一条线程对其进行lock操作，但是咯擦卡操作可以被同一条线程重复多次执行，多次lock之后，只有执行相同次数的unlock操作，变量才会被解锁。</p>
</li>
<li><p>如果对一个变量执行lock操作，将会清空工作内存中此变量的值，在执行引擎使用这个变量前需要重新执行load或assign操作初始化变量的值</p>
</li>
<li><p>如果一个变量事先没有被lock操作锁定，则不允许对它执行unlock操作，也不允许unlock一个被其他线程锁定的变量</p>
</li>
<li><p>对一个变量执行unlock操作之前，必须先把此变量同步到主内存中</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>并发的优势</p>
<ul>
<li><p>速度：同时处理多个请求，相应更快，复杂的操作可以分成多个进程同时进行</p>
</li>
<li><p>设计：程序设计在某些情况下会更简单，也可以有更多的选择</p>
</li>
<li><p>资源利用：CPU能够在等待IO的时候做一些其他事情</p>
</li>
</ul>
</li>
<li><p>并发的风险：</p>
<ul>
<li><p>安全性：多个线程共享数据时可能会产生与预期不相符的结果</p>
</li>
<li><p>活跃性：某个操作无法继续进行下去的时候，就会发生活跃性的问题，比如死锁问题，饥饿问题等</p>
</li>
<li><p>性能：线程过多会使得CPU频繁切换线程，调度时间增多，同步机制，消耗过多的内存</p>
</li>
</ul>
</li>
</ul>
<h1 id="并发的线程安全处理"><a href="#并发的线程安全处理" class="headerlink" title="并发的线程安全处理"></a>并发的线程安全处理</h1><h2 id="并发模拟"><a href="#并发模拟" class="headerlink" title="并发模拟"></a>并发模拟</h2><ul>
<li><p>PostMan</p>
</li>
<li><p>Apache Bench</p>
</li>
<li><p>JMeter</p>
</li>
<li><p>Semaphore、countdownLatch</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrencyTest</span> </span>&#123;</div><div class="line">    <span class="comment">// 请求总数</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> clientTotal = <span class="number">5000</span>;</div><div class="line">    <span class="comment">// 线程总数</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> threadTotal = <span class="number">200</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        ExecutorService es = Executors.newCachedThreadPool();</div><div class="line">        <span class="keyword">final</span> Semaphore semaphore = <span class="keyword">new</span> Semaphore(threadTotal);</div><div class="line">        <span class="keyword">final</span> CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(clientTotal);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; clientTotal; i++) &#123;</div><div class="line">            es.execute(() -&gt; &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    semaphore.acquire();</div><div class="line">                    add();</div><div class="line">                    semaphore.release();</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    log.error(<span class="string">"exception"</span>, e);</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">                countDownLatch.countDown();</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        countDownLatch.await();</div><div class="line">        log.info(<span class="string">"count:&#123;&#125;"</span>, count);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">        count++;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="线程安全性"><a href="#线程安全性" class="headerlink" title="线程安全性"></a>线程安全性</h2><p>当多个线程访问某个类时，不管运行时环境采用何种调度方式，或者这些进程将如何交替执行，并且在主调代码中不需要任何额外的同步或者协同，这个类都将表现出正确的行为，那么这个类时线程安全的。</p>
<ul>
<li><p>原子性：提供了互斥访问，同一个时刻只有一个线程对它进行操作</p>
<ul>
<li><p>Atomic包：CAS完成原子性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Slf</span>4j</div><div class="line"><span class="meta">@ThreadSafe</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountExample2</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> clientTotal = <span class="number">5000</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> threadTotal = <span class="number">10</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AtomicInteger count = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        ExecutorService es = Executors.newCachedThreadPool();</div><div class="line">        <span class="keyword">final</span> Semaphore semaphore = <span class="keyword">new</span> Semaphore(threadTotal);</div><div class="line">        <span class="keyword">final</span> CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(clientTotal);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>  i = <span class="number">0</span>; i &lt; clientTotal; i++) &#123;</div><div class="line">            es.execute(() -&gt; &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    semaphore.acquire();</div><div class="line">                    add();</div><div class="line">                    semaphore.release();</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    log.error(<span class="string">"exception"</span>, e);</div><div class="line">                &#125;</div><div class="line">                countDownLatch.countDown();</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        countDownLatch.await();</div><div class="line">        es.shutdown();</div><div class="line">        log.info(<span class="string">"count: &#123;&#125;"</span>, count);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">        count.incrementAndGet();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//21:20:18.403 [main] INFO com.imooc.concurentcy.example.count.CountExample2 - count: 5000</span></div></pre></td></tr></table></figure>
<ul>
<li><p>AtomicXXX：CAS、Unsafe.compareAndSwapInt</p>
</li>
<li><p>AtomicLong、LongAddr</p>
</li>
<li><p>AtomicReference、AtomicReferenceFieldUpdater</p>
</li>
<li><p>AtomicStampReference：CAS的ABA问题</p>
</li>
</ul>
</li>
<li><p>锁</p>
<ul>
<li><p>synchronized，关键字，依赖JVM，不可中断的锁，适合竞争不激烈，可读性好</p>
<ul>
<li><p>修饰代码块，作用于调用的对象</p>
</li>
<li><p>修饰方法，整个方法，作用于对象</p>
</li>
<li><p>修饰静态方法，整个静态方法，作用于所有对象</p>
</li>
<li><p>修饰类，作用于所有对象</p>
</li>
</ul>
</li>
<li><p>Lock：依赖特殊的CPU指令，可中断锁，多样化同步，适合竞争激烈时能维持常态</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>可见性：一个线程对主内存的数据的修改可以及时的被其他线程观察到</p>
<ul>
<li><p>导致共享变量在线程间不可见的原因</p>
<ul>
<li><p>线程交叉执行</p>
</li>
<li><p>重排序结合线程交叉执行</p>
</li>
<li><p>共享变量更新后的值没有在工作内存与主内存间及时更新</p>
</li>
</ul>
</li>
<li><p>JMM关于synchronized的规定：</p>
<ul>
<li><p>线程解锁前，必须把共享变量的值，刷新到主内存中</p>
</li>
<li><p>线程加锁时，将清空工作内存中共享变量的值，从而使用共享变量时需要从主内存中重新读取最新的值</p>
</li>
</ul>
</li>
<li><p>volatile，通过内存屏障和禁止重排序优化来实现：</p>
<ul>
<li><p>对volatile变量写操作时，会在写操作后加入一条store屏障指令，将本地内存中的共享变量值刷新到主内存</p>
</li>
<li><p>对volatile变量读操作时，会在读操作前键入一条load屏障指令，从主内存中读取共享变量</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>有序性：一个线程观察其他线程中的指令的执行顺序，由于指令重排序的存在，该观察结果一般杂乱无序</p>
<ul>
<li><p>Java内存模型中，允许编译器和处理器对指令进行重排序，但是重排序过程不会影响到单线程程序的执行，但是会影响多线程并发执行的正确性</p>
</li>
<li><p>volatile，synchronized，Lock</p>
</li>
<li><p>Happenes-Before原则</p>
<ul>
<li><p>程序次序原则：一个程序内，按照代码顺序，书写在前面的操作先行发生于书写在后面的操作</p>
</li>
<li><p>锁定规则：一个unlock操作线性发生于后面对同一个锁的Lock操作</p>
</li>
<li><p>volatile变量规则：对一个变量的写操作先行发生于后面对这个变量的读操作</p>
</li>
<li><p>传递规则：如果操作A先行发生于操作B，操作B先行发生于操作C，操作A先与操作C</p>
</li>
<li><p>线程启动规则：Thread对象的start方法先行发生于此线程的每一个动作</p>
</li>
<li><p>线程中断规则：对线程的interrupt方法的调用先行发生于被中断线程的代码检测到的中断事件的发生</p>
</li>
<li><p>线程终结规则：线程中所有的操作都先行发生于线程的终止检测</p>
</li>
<li><p>对象终结规则：一个对象的初始化完成先行发生于finalize()方法的开始</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="安全发布对象"><a href="#安全发布对象" class="headerlink" title="安全发布对象"></a>安全发布对象</h2><ol>
<li><p>发布对象：使一个对象能够被当前范围之外的代码所使用</p>
</li>
<li><p>对象逸出：一种错误的发布，一个对象没有构造完成就被其他线程所见</p>
</li>
<li><p>安全发布对象</p>
<ul>
<li><p>在静态初始化函数中初始化一个对象的引用</p>
</li>
<li><p>将对象的引用保存到volatile类型域或者AtomicReference对象中</p>
</li>
<li><p>将对象的引用保存到某个正确构造对象的final类型域中</p>
</li>
<li><p>将对象的引用保存到一个由锁保护的域中</p>
</li>
</ul>
</li>
</ol>
<h2 id="线程安全策略"><a href="#线程安全策略" class="headerlink" title="线程安全策略"></a>线程安全策略</h2><ol>
<li><p>不可变对象–String类型</p>
<ul>
<li><p>条件</p>
<ul>
<li><p>对象创建以后其状态不能修改</p>
</li>
<li><p>对象所有的域都是final类型</p>
</li>
<li><p>对象时正确创建的，创建过程中this引用没有逸出</p>
</li>
</ul>
</li>
<li><p>final关键字</p>
<ul>
<li><p>修饰类：不能被继承，String，Integer，Long</p>
</li>
<li><p>修饰方法：锁定方法不能被继承类修改，早期效率更高</p>
</li>
<li><p>修饰变量：</p>
<ul>
<li><p>基本数据类型变量，数值在初始化之后不可被修改</p>
</li>
<li><p>引用类型变量，初始化之后不能再指向另外一个对象，对象里面的值时可以进行修改的</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImmutableExample1</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Integer a = <span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String b = <span class="string">"2"</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Map&lt;Integer, Integer&gt; map = Maps.newHashMap();</div><div class="line"></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        map.put(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">        map.put(<span class="number">3</span>,<span class="number">4</span>);</div><div class="line">        map.put(<span class="number">5</span>,<span class="number">6</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"><span class="comment">//        a = 2;</span></div><div class="line"><span class="comment">//        b = "a";</span></div><div class="line"><span class="comment">//        map = Maps.newTreeMap();</span></div><div class="line">        log.info(<span class="string">"&#123;&#125;"</span>, map.get(<span class="number">1</span>));</div><div class="line">        map.put(<span class="number">1</span>,<span class="number">4</span>);</div><div class="line">        log.info(<span class="string">"&#123;&#125;"</span>, map.get(<span class="number">1</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">final</span> <span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line"><span class="comment">//        a = 1;</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 17:04:10.511 [main] INFO com.imooc.concurentcy.example.immutable.ImmutableExample1 - 2</span></div><div class="line"><span class="comment"> * 17:04:10.517 [main] INFO com.imooc.concurentcy.example.immutable.ImmutableExample1 - 4</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Collections.unmodifiableXXX:Collection, List, Set, Map…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImmutableExample2</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Integer a = <span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String b = <span class="string">"2"</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Integer&gt; map = Maps.newHashMap();</div><div class="line"></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        map.put(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">        map.put(<span class="number">3</span>,<span class="number">4</span>);</div><div class="line">        map.put(<span class="number">5</span>,<span class="number">6</span>);</div><div class="line">        map = Collections.unmodifiableMap(map);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"><span class="comment">//        a = 2;</span></div><div class="line"><span class="comment">//        b = "a";</span></div><div class="line"><span class="comment">//        map = Maps.newTreeMap();</span></div><div class="line">        log.info(<span class="string">"&#123;&#125;"</span>, map.get(<span class="number">1</span>));</div><div class="line">        map.put(<span class="number">1</span>,<span class="number">4</span>);</div><div class="line">        log.info(<span class="string">"&#123;&#125;"</span>, map.get(<span class="number">1</span>));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Exception in thread "main" java.lang.UnsupportedOperationException</span></div><div class="line"><span class="comment"> * 17:02:41.546 [main] INFO com.imooc.concurentcy.example.immutable.ImmutableExample2 - 2</span></div><div class="line"><span class="comment"> * 	at java.util.Collections$UnmodifiableMap.put(Collections.java:1457)</span></div><div class="line"><span class="comment"> * 	at com.imooc.concurentcy.example.immutable.ImmutableExample2.main(ImmutableExample2.java:34)</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
</li>
<li><p>Guava：ImmutableXXX:Collection, List, Set, Map…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImmutableExample3</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> ImmutableList list = ImmutableList.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> ImmutableSet set = ImmutableSet.copyOf(list);</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> ImmutableMap&lt;Integer, Integer&gt; map = ImmutableMap.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> ImmutableMap&lt;Integer, Integer&gt; map2 = ImmutableMap.&lt;Integer, Integer&gt;builder().put(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line">            .put(<span class="number">3</span>,<span class="number">4</span>).put(<span class="number">5</span>,<span class="number">6</span>).build();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"><span class="comment">//        list.add(4);</span></div><div class="line"><span class="comment">//        Exception in thread "main" java.lang.UnsupportedOperationException</span></div><div class="line"><span class="comment">//        at com.google.common.collect.ImmutableCollection.add(ImmutableCollection.java:222)</span></div><div class="line"><span class="comment">//        at com.imooc.concurentcy.example.immutable.ImmutableExample3.main(ImmutableExample3.java:26)</span></div><div class="line">        map.put(<span class="number">6</span>,<span class="number">7</span>);</div><div class="line">        map2.put(<span class="number">7</span>,<span class="number">8</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>线程封闭</p>
<ul>
<li><p>Ad-hoc线程封闭：程序控制是实现</p>
</li>
<li><p>堆栈封闭：局部变量，无并发问题</p>
</li>
<li><p>ThreadLocal线程封闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestHolder</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> ThreadLocal&lt;Long&gt; requesetHolder = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Long id)</span> </span>&#123;</div><div class="line">        requesetHolder.set(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> requesetHolder.get();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</div><div class="line">        requesetHolder.remove();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>线程不安全的类与写法</p>
<ul>
<li><p>StringBuilder-&gt;StringBuffer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Slf</span>4j</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringExample1</span> </span>&#123;</div><div class="line">    <span class="comment">// 请求总数</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> clientTotal = <span class="number">5000</span>;</div><div class="line"></div><div class="line">    <span class="comment">// 同时并发执行的线程数</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> threadTotal = <span class="number">200</span>;</div><div class="line"></div><div class="line"><span class="comment">//    public static StringBuilder  sb = new StringBuilder();</span></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StringBuffer  sb = <span class="keyword">new</span> StringBuffer();</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        ExecutorService executorService = Executors.newCachedThreadPool();</div><div class="line">        <span class="keyword">final</span> Semaphore semaphore = <span class="keyword">new</span> Semaphore(threadTotal);</div><div class="line">        <span class="keyword">final</span> CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(clientTotal);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; clientTotal ; i++) &#123;</div><div class="line">            executorService.execute(() -&gt; &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    semaphore.acquire();</div><div class="line">                    update();</div><div class="line">                    semaphore.release();</div><div class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                    log.error(<span class="string">"exception"</span>, e);</div><div class="line">                &#125;</div><div class="line">                countDownLatch.countDown();</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        countDownLatch.await();</div><div class="line">        executorService.shutdown();</div><div class="line">        log.info(<span class="string">"count:&#123;&#125;"</span>, sb.length());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</div><div class="line">        sb.append(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>SimpleDateFormate-JodaTime</p>
</li>
<li><p>ArrayList，HashSet，HashMap等集合类</p>
</li>
</ul>
</li>
<li><p>同步容器</p>
<ul>
<li><p>Vector,Stack</p>
</li>
<li><p>HashTable:key和value不能为null</p>
</li>
<li><p>Collections.synchronizedXXX(List, Set, Map)</p>
</li>
</ul>
</li>
<li><p>并发容器</p>
<ul>
<li><p>ArrayList-&gt;CopyOnWriteArrayList</p>
<ul>
<li><p>读写分离</p>
</li>
<li><p>保证最终一致性</p>
</li>
<li><p>通过另外开辟空间来解决并发冲突</p>
</li>
</ul>
</li>
<li><p>HashSet,TreeSet-&gt;CopyOnWriteArraySet,ConcurrentSkipListSet</p>
</li>
<li><p>HashMap,TreeMap-&gt;ConcurrentHashMap,ConcurrentSkipListMap</p>
</li>
<li><p>JUC的实际构成：<br><img src="/img/markdown-img-paste-20181101154059310.png" alt></p>
</li>
</ul>
</li>
</ol>
<h2 id="J-U-C之AQS"><a href="#J-U-C之AQS" class="headerlink" title="J.U.C之AQS"></a>J.U.C之AQS</h2><h3 id="AQS-AbstractQueuedSynchronizer"><a href="#AQS-AbstractQueuedSynchronizer" class="headerlink" title="AQS-AbstractQueuedSynchronizer"></a>AQS-AbstractQueuedSynchronizer</h3><p><img src="/img/markdown-img-paste-20181101155018876.png" alt></p>
<ul>
<li><p>使用Node实现FIFO队列，可以用于构建锁或者其他同步装置的基础框架</p>
</li>
<li><p>利用一个int类型表示状态</p>
</li>
<li><p>使用方法是继承</p>
</li>
<li><p>子类通过继承并通过实现其方法管理其状态，也就是acquire方法和release方法</p>
</li>
<li><p>可以同时实现排他锁和共享锁模式</p>
</li>
</ul>
<h3 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a>CountDownLatch</h3><h3 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a>Semaphore</h3><h3 id="CyclicBarrier"><a href="#CyclicBarrier" class="headerlink" title="CyclicBarrier"></a>CyclicBarrier</h3><h3 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h3><ol>
<li><p>ReentrantLock和synchronized的区别</p>
<ul>
<li><p>可重入性，都可以</p>
</li>
<li><p>锁的实现，synchronized是依赖于JVM</p>
</li>
<li><p>性能：优化之后差不多</p>
</li>
<li><p>功能区别</p>
</li>
</ul>
</li>
<li><p>ReenTrantLock独有的功能：</p>
<ul>
<li><p>可以执行公平锁还是非公平锁</p>
</li>
<li><p>提供一个Condition类，可以分组唤醒需要唤醒的线程</p>
</li>
<li><p>可以终端等待锁的线程的机制</p>
</li>
</ul>
</li>
<li><p>StampLock–读，写，乐观读三种模式</p>
</li>
</ol>
<h3 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h3><h3 id="FutureTask"><a href="#FutureTask" class="headerlink" title="FutureTask"></a>FutureTask</h3><ul>
<li><p>Callable和Runnable接口对比</p>
<ul>
<li><p>run,call</p>
</li>
<li><p>返回值</p>
</li>
</ul>
</li>
<li><p>Future接口–获取线程运行状态和结果</p>
</li>
<li><p>FutureTask</p>
<ul>
<li><p>Runnable</p>
</li>
<li><p>Future</p>
</li>
</ul>
</li>
</ul>
<h3 id="BlockingQueue"><a href="#BlockingQueue" class="headerlink" title="BlockingQueue"></a>BlockingQueue</h3><p>阻塞队列中的操作：</p>
<p><img src="/img/markdown-img-paste-20181102152907971.png" alt></p>
<ul>
<li><p>ArrayBlockingQueue</p>
</li>
<li><p>DelayQueue</p>
</li>
<li><p>LinkedBlockingQueue</p>
</li>
<li><p>PriorityBlockingQueue</p>
</li>
<li><p>SynchronousQueue</p>
</li>
</ul>
<h2 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h2><ul>
<li><p>new Thread的弊端</p>
<ul>
<li><p>性能差</p>
</li>
<li><p>线程缺乏统一管理，可能无限制的新建线程，相互竞争，有可能OOM</p>
</li>
<li><p>缺少更多功能，</p>
</li>
</ul>
</li>
<li><p>线程池的好处</p>
<ul>
<li><p>重用存在的线程，减少对象的创建，销毁的开销，性能好</p>
</li>
<li><p>可以有效的控制最大并发线程数，提高系统资源利用率，同时可以避免过多资源竞争，避免阻塞</p>
</li>
<li><p>提供定期执行，定时执行，单线程，并发数控制等功能</p>
</li>
</ul>
</li>
<li><p>ThreadPoolExecutor</p>
<ul>
<li><p>corePoolSize</p>
</li>
<li><p>maximumPoolSize</p>
</li>
<li><p>workQueue-阻塞队列</p>
</li>
<li><p>keepAliveTime</p>
</li>
<li><p>unit</p>
</li>
<li><p>threadFactory</p>
</li>
<li><p>rejectHandler</p>
</li>
</ul>
</li>
<li><p>线程池的状态</p>
<ul>
<li><p>running</p>
</li>
<li><p>shutdown</p>
</li>
<li><p>stop</p>
</li>
<li><p>tidying</p>
</li>
<li><p>terminated</p>
</li>
</ul>
<p><img src="/img/markdown-img-paste-20181102155642312.png" alt="线程池状态"></p>
</li>
<li><p>提供的方法</p>
<ul>
<li><p>execute</p>
</li>
<li><p>submit 有返回值 execute+future</p>
</li>
<li><p>shutdown</p>
</li>
<li><p>shutdownNow</p>
</li>
<li><p>getTaskCount：获取一致性和未执行的任务总数</p>
</li>
<li><p>getCompletedTaskCount</p>
</li>
<li><p>getPoolSize</p>
</li>
<li><p>getActiveCount</p>
</li>
</ul>
</li>
<li><p>四种线程池</p>
<ul>
<li><p>Executors.newCachedThreadPool</p>
</li>
<li><p>Executors.newFixedThreadPool</p>
</li>
<li><p>Executors.newScheduledhreadPool</p>
</li>
<li><p>Executors.newSingleThreadExecutor</p>
</li>
</ul>
</li>
<li><p>合理配置</p>
<ul>
<li><p>CPU密集型任务，需要尽量压榨CPU，参考值可以设置为CPU的核数+1</p>
</li>
<li><p>IO密集型任务，参考值可以设置为2*CPU的核数</p>
</li>
</ul>
</li>
</ul>
<h2 id="并发扩展"><a href="#并发扩展" class="headerlink" title="并发扩展"></a>并发扩展</h2><h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><ul>
<li><p>必要条件</p>
<ul>
<li><p>互斥条件</p>
</li>
<li><p>请求和保持条件：对已经获取的资源不释放</p>
</li>
<li><p>不剥夺条件</p>
</li>
<li><p>环路等待条件：循环等待</p>
</li>
</ul>
</li>
<li><p>死锁实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> flag = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object o1 = <span class="keyword">new</span> Object();</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object o2 = <span class="keyword">new</span> Object();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        log.info(<span class="string">"flag : &#123;&#125;"</span>, flag);</div><div class="line">        <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span> (o1) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">500</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">synchronized</span> (o2) &#123;</div><div class="line">                    log.info(<span class="string">"1"</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span> (o2) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">500</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">synchronized</span> (o1) &#123;</div><div class="line">                    log.info(<span class="string">"0"</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        DeadLock td1 = <span class="keyword">new</span> DeadLock();</div><div class="line">        DeadLock td2 = <span class="keyword">new</span> DeadLock();</div><div class="line">        td1.flag = <span class="number">1</span>;</div><div class="line">        td2.flag = <span class="number">0</span>;</div><div class="line">        <span class="comment">//td1,td2都处于可执行状态，但JVM线程调度先执行哪个线程是不确定的。</span></div><div class="line">        <span class="comment">//td2的run()可能在td1的run()之前运行</span></div><div class="line">        <span class="keyword">new</span> Thread(td1).start();</div><div class="line">        <span class="keyword">new</span> Thread(td2).start();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>死锁避免方法：</p>
<ul>
<li><p>加锁顺序</p>
</li>
<li><p>加锁时限，超时释放机制</p>
</li>
<li><p>死锁检测</p>
</li>
</ul>
</li>
</ul>
<h2 id="多线程并发的最佳实践"><a href="#多线程并发的最佳实践" class="headerlink" title="多线程并发的最佳实践"></a>多线程并发的最佳实践</h2><ul>
<li><p>使用本地变量</p>
</li>
<li><p>使用不可变类</p>
</li>
<li><p>最小化锁的作用于范围：s = 1 / (1 - a + a / n);</p>
</li>
<li><p>使用线程池的Executor,而不是直接new Thread</p>
</li>
<li><p>宁可使用同步也不要使用线程的wait和notify方法</p>
</li>
<li><p>使用blockingQueue实现生产-消费模式</p>
</li>
<li><p>使用并发集合而不是使用加了锁的同步集合</p>
</li>
<li><p>使用Semaphore创建有界的访问</p>
</li>
<li><p>宁可使用同步代码块，也不使用同步的方法</p>
</li>
<li><p>避免使用静态变量</p>
</li>
</ul>
<h1 id="高并发处理思路及手段"><a href="#高并发处理思路及手段" class="headerlink" title="高并发处理思路及手段"></a>高并发处理思路及手段</h1><h2 id="扩容"><a href="#扩容" class="headerlink" title="扩容"></a>扩容</h2><ul>
<li><p>垂直扩容：提高系统部件能力，如加大内存</p>
</li>
<li><p>水平扩容：增加更多系统成员来实现，如增加机器</p>
</li>
<li><p>数据库扩容</p>
<ul>
<li><p>读操作扩展：memcache，redis,CDN缓存等</p>
</li>
<li><p>写操作扩展：Cassandra,Hbase等</p>
</li>
</ul>
</li>
</ul>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><ul>
<li><p>缓存特征</p>
<ul>
<li><p>缓存命中率：命中数 / (命中数+未命中数)</p>
</li>
<li><p>最大空间：缓存清空策略</p>
<ul>
<li><p>FIFO：淘汰最先创建的数据</p>
</li>
<li><p>LFU：最少使用次数，清除使用次数最少的数据</p>
</li>
<li><p>LRU：淘汰最远使用的数据的时间戳-热点数据</p>
</li>
<li><p>过期时间：过期时间最长的</p>
</li>
<li><p>Random：随机淘汰</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>影响缓存命中率的因素</p>
<ul>
<li><p>业务场景和业务需求-读写</p>
</li>
<li><p>缓存的设计(粒度和过期策略)</p>
</li>
<li><p>缓存的容量和基础设施</p>
</li>
<li><p>缓存节点故障等问题–一致性哈希算法</p>
</li>
</ul>
</li>
<li><p>缓存分类和应用场景：</p>
<ul>
<li><p>本地缓存：编程实现，Guava Cache</p>
</li>
<li><p>分布式缓存：Memcached，Redis</p>
</li>
</ul>
</li>
<li><p>Redis</p>
<p><img src="/img/markdown-img-paste-20181102185614826.png" alt="redis核心对象"></p>
</li>
<li><p>高并发场景下存在的问题</p>
<ul>
<li><p>缓存一致性</p>
<p><img src="/img/markdown-img-paste-2018110219583022.png" alt></p>
</li>
<li><p>缓存并发问题</p>
<p><img src="/img/markdown-img-paste-20181102195850302.png" alt></p>
</li>
<li><p>缓存穿透问题</p>
<p><img src="/img/markdown-img-paste-20181102195945446.png" alt></p>
<ul>
<li>缓存空对象</li>
</ul>
</li>
<li><p>缓存雪崩现象</p>
<p><img src="/img/markdown-img-paste-20181102200153487.png" alt></p>
</li>
</ul>
</li>
</ul>
<h2 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h2><ul>
<li><p>消息队列特性</p>
<ul>
<li><p>业务无关：只做消息分发</p>
</li>
<li><p>FIFO：先到先出</p>
</li>
<li><p>容灾：节点的动态增删和消息的持久化</p>
</li>
<li><p>性能：吞吐量提升，系统内部通信效率提高</p>
</li>
</ul>
</li>
<li><p>消息队列的好处</p>
<ul>
<li><p>业务解耦</p>
</li>
<li><p>最终一致性</p>
</li>
<li><p>广播</p>
</li>
<li><p>错峰与流控</p>
</li>
</ul>
</li>
<li><p>队列实例</p>
<ul>
<li><p>Kafka</p>
<p><img src="/img/markdown-img-paste-2018110315153084.png" alt></p>
<ul>
<li><p>高性能，跨语言，分布式发布订阅消息队列系统</p>
</li>
<li><p>快速持久化,O(1)</p>
</li>
<li><p>高吞吐</p>
</li>
<li><p>分布式系统</p>
</li>
<li><p>支持Hadoop数据加载</p>
</li>
</ul>
</li>
<li><p>RabbitMQ</p>
<p><img src="/img/markdown-img-paste-20181103151950629.png" alt></p>
</li>
</ul>
</li>
</ul>
<h2 id="应用拆分-解决单个服务器处理上限的问题"><a href="#应用拆分-解决单个服务器处理上限的问题" class="headerlink" title="应用拆分-解决单个服务器处理上限的问题"></a>应用拆分-解决单个服务器处理上限的问题</h2><ul>
<li><p>应用拆分原则</p>
<ul>
<li><p>业务优先</p>
</li>
<li><p>循序渐进</p>
</li>
<li><p>兼顾技术：重构，分层</p>
</li>
<li><p>可靠测试</p>
</li>
</ul>
</li>
<li><p>拆分过程中的关注点</p>
<ul>
<li><p>应用之间的通信：RPC or 消息队列 or …</p>
</li>
<li><p>应用之间的数据库设计：每个应用单独库</p>
</li>
<li><p>避免事务操作跨应用</p>
</li>
</ul>
</li>
<li><p>应用拆分</p>
<ul>
<li><p>服务化-Dubbo</p>
<p><img src="/img/markdown-img-paste-20181103155755996.png" alt="dubbo架构"></p>
</li>
<li><p>微服务-springcloud</p>
<p><img src="/img/markdown-img-paste-20181103155932871.png" alt="微服务架构"></p>
</li>
</ul>
</li>
</ul>
<h2 id="应用限流"><a href="#应用限流" class="headerlink" title="应用限流"></a>应用限流</h2><ul>
<li><p>算法</p>
<ul>
<li><p>计数器法-滑动窗口的低精度情况</p>
<p><img src="/img/markdown-img-paste-2018110316453581.png" alt="计数器法"></p>
</li>
<li><p>滑动窗口</p>
<p><img src="/img/markdown-img-paste-20181103164650199.png" alt="滑动窗口"></p>
</li>
<li><p>漏桶算法-leaky Bucket</p>
<p><img src="/img/markdown-img-paste-20181103164807626.png" alt="漏桶算法"></p>
</li>
<li><p>令牌桶算法-token Bucket-允许流量一定程度的突发</p>
<p><img src="/img/markdown-img-paste-2018110316490416.png" alt="令牌桶算法"></p>
</li>
</ul>
</li>
</ul>
<h2 id="服务降级"><a href="#服务降级" class="headerlink" title="服务降级"></a>服务降级</h2><ul>
<li><p>服务降级：设置默认返回，解决处理不了的请求。</p>
<ul>
<li><p>自动降级：超时，失败次数，故障，限流</p>
</li>
<li><p>人工降级：秒杀，双11大促等</p>
</li>
</ul>
</li>
<li><p>服务熔断：过载保护</p>
</li>
</ul>
<h2 id="数据库分库分表"><a href="#数据库分库分表" class="headerlink" title="数据库分库分表"></a>数据库分库分表</h2><ul>
<li><p>数据库瓶颈</p>
<ul>
<li><p>单个库的数据量上限（1-2T)</p>
</li>
<li><p>单个数据库服务压力过大，读写瓶颈：多个库</p>
</li>
<li><p>单个表的数据量过大：分表</p>
</li>
</ul>
</li>
<li><p>数据库切库</p>
<ul>
<li>读写分离，降低主库的压力，多个从库通过负载均衡来调节</li>
</ul>
</li>
<li><p>数据库分表-单个表的数据量过大</p>
<ul>
<li><p>横向分表：同样结构的不同数据的表，id取模划分</p>
</li>
<li><p>纵向分表：将本来可以在一个表的内容认为的划分为多个表，根据不同列的数据的活跃数量等进行分配</p>
</li>
</ul>
</li>
</ul>
<h2 id="高可用"><a href="#高可用" class="headerlink" title="高可用"></a>高可用</h2><ul>
<li><p>任务调度系统分布式：elastic-job + zookeeper</p>
</li>
<li><p>主备切换：Apache curator + zookeeper分布式锁实现</p>
</li>
<li><p>监控报警机制</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.gif"
              alt="cdx" />
          
            <p class="site-author-name" itemprop="name">cdx</p>
            <p class="site-description motion-element" itemprop="description">Be a better man!</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">96</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/cdx0312" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:cdxu0312@outlook.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cdx</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
