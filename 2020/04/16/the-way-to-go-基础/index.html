<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="go," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="前言
go语言诞生条件

更快的开发速度
优越的多核工作
更好的网络编程环境
享受开发过程


go语言追求短小精悍


第一章 Go语言的起源发展与普及起源与发展
起源于07年，09年正式发布，Robert Griesemer， Rob Pike, Ken Thompson
2019/11/10 完全开源Linux和MacOSX
2010/1/8 当选2009年年度语言
2010/5 谷歌开始使">
<meta property="og:type" content="article">
<meta property="og:title" content="the way to go 基础篇">
<meta property="og:url" content="http://yoursite.com/2020/04/16/the-way-to-go-基础/index.html">
<meta property="og:site_name" content="小黄">
<meta property="og:description" content="前言
go语言诞生条件

更快的开发速度
优越的多核工作
更好的网络编程环境
享受开发过程


go语言追求短小精悍


第一章 Go语言的起源发展与普及起源与发展
起源于07年，09年正式发布，Robert Griesemer， Rob Pike, Ken Thompson
2019/11/10 完全开源Linux和MacOSX
2010/1/8 当选2009年年度语言
2010/5 谷歌开始使">
<meta property="og:updated_time" content="2020-04-16T06:34:51.038Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="the way to go 基础篇">
<meta name="twitter:description" content="前言
go语言诞生条件

更快的开发速度
优越的多核工作
更好的网络编程环境
享受开发过程


go语言追求短小精悍


第一章 Go语言的起源发展与普及起源与发展
起源于07年，09年正式发布，Robert Griesemer， Rob Pike, Ken Thompson
2019/11/10 完全开源Linux和MacOSX
2010/1/8 当选2009年年度语言
2010/5 谷歌开始使">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/04/16/the-way-to-go-基础/"/>





  <title>the way to go 基础篇 | 小黄</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小黄</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">黄小黄的幸福生活！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-java">
          <a href="/Java/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Java
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/16/the-way-to-go-基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">the way to go 基础篇</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-16T14:16:48+08:00">
                2020-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li><p>go语言诞生条件</p>
<ol>
<li>更快的开发速度</li>
<li>优越的多核工作</li>
<li>更好的网络编程环境</li>
<li>享受开发过程</li>
</ol>
</li>
<li><p>go语言追求短小精悍</p>
</li>
</ul>
<h1 id="第一章-Go语言的起源发展与普及"><a href="#第一章-Go语言的起源发展与普及" class="headerlink" title="第一章 Go语言的起源发展与普及"></a>第一章 Go语言的起源发展与普及</h1><h2 id="起源与发展"><a href="#起源与发展" class="headerlink" title="起源与发展"></a>起源与发展</h2><ol>
<li>起源于07年，09年正式发布，Robert Griesemer， Rob Pike, Ken Thompson</li>
<li>2019/11/10 完全开源Linux和MacOSX</li>
<li>2010/1/8 当选2009年年度语言</li>
<li>2010/5 谷歌开始使用</li>
<li>2011/5/5 Google App Engine支持Go语言</li>
<li>几个网址<ul>
<li>官网 golang.org</li>
<li>github.com/golang/go<br>*</li>
</ul>
</li>
</ol>
<h2 id="语言的主要特性和发展的环境和影响因素"><a href="#语言的主要特性和发展的环境和影响因素" class="headerlink" title="语言的主要特性和发展的环境和影响因素"></a>语言的主要特性和发展的环境和影响因素</h2><ul>
<li>go语言追求快速编译（Java)，高效执行(C++)，易于开发(动态语言）</li>
<li>go语言是一门类型安全和内容安全的编程语言</li>
<li>go语言存在指针，但是不允许指针运算</li>
<li>对于并发编程，网络编程支持极好-goroutine</li>
<li>go语言依赖管理采用分包进行</li>
<li>go语言和Java一样有GC机制</li>
<li>go install部署第三方包</li>
</ul>
<h2 id="指导设计原则"><a href="#指导设计原则" class="headerlink" title="指导设计原则"></a>指导设计原则</h2><ul>
<li>go语言关键字25个</li>
<li>go语言编码规范-<a href="https://golang.org/ref/spec" target="_blank" rel="external">https://golang.org/ref/spec</a></li>
</ul>
<h2 id="语言特性"><a href="#语言特性" class="headerlink" title="语言特性"></a>语言特性</h2><ul>
<li>go语言在本质上支持并发编程</li>
<li>go语言没有类的概念，用interface来实现多态</li>
<li>go语言是类型安全的语言，使用静态类型</li>
<li>go语言是强类型语言</li>
<li>go语言支持交叉编译</li>
<li>go语言代码和字符串的编码方式都是utf-8，支持国际化</li>
</ul>
<h2 id="语言用途"><a href="#语言用途" class="headerlink" title="语言用途"></a>语言用途</h2><ul>
<li>go语言用于web服务器，存储集群，分布式场景，游戏服务</li>
<li>go语言的目标是时限CEP, complex Event Process</li>
<li>go语言不适合开发实时性要求高的软件</li>
</ul>
<h2 id="特性缺失"><a href="#特性缺失" class="headerlink" title="特性缺失"></a>特性缺失</h2><ul>
<li>不支持函数重载和操作符重载</li>
<li>不支持隐式转换</li>
<li>不支持类和类型的继承</li>
<li>不支持变体类型</li>
<li>不支持动态加载代码</li>
<li>不支持动态链接库</li>
<li>不支持泛型</li>
<li>通过recover和panic来替代异常机制</li>
<li>不支持静态变量</li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul>
<li>简化问题，易于学习</li>
<li>内存管理，语法简洁，易于使用</li>
<li>快速编译，高效开发</li>
<li>高效执行</li>
<li>并发支持，轻松驾驭</li>
<li>静态类型</li>
<li>标准类库，规范统一</li>
<li>易于部署</li>
</ul>
<h1 id="第二章-安装与运行环境"><a href="#第二章-安装与运行环境" class="headerlink" title="第二章 安装与运行环境"></a>第二章 安装与运行环境</h1><h2 id="平台与架构"><a href="#平台与架构" class="headerlink" title="平台与架构"></a>平台与架构</h2><ul>
<li>编译器支持的平台：<ul>
<li>Linux</li>
<li>FreeBSD</li>
<li>Mac OS X</li>
</ul>
</li>
<li>编译器<ul>
<li>gc</li>
<li>gccgo</li>
</ul>
</li>
</ul>
<h2 id="Go环境变量"><a href="#Go环境变量" class="headerlink" title="Go环境变量"></a>Go环境变量</h2><ul>
<li>$GOROOT：go的安装位置</li>
<li>$GOARCH：机器的处理器架构</li>
<li>$GOOS：操作系统</li>
<li>$GOBIN：编译器和链接器的安装位置</li>
<li>$GOPATH：包含多个Go语言远吗文件，包文件和可执行文件，src，pkg，bin三个目录</li>
<li>$GOARM：ARM专用</li>
<li>$GOMAXPROCS：设置可用的处理器核数</li>
</ul>
<h2 id="Linux安装go"><a href="#Linux安装go" class="headerlink" title="Linux安装go"></a>Linux安装go</h2><ol>
<li><p>Linux下通过<code>$HOME/.bashrc</code>来自定义环境</p>
<ul>
<li>首先配置GOROOT：<code>export GOROOT=$HOME/go</code></li>
<li>配置path：<code>export PATH=$PATH:$GOROOT/bin</code></li>
<li>配置工作路径：<code>export GOPATH=$HOME/Applications/Go</code></li>
<li><code>source ~/.bashrc</code>生效</li>
<li><code>go env</code>查看</li>
</ul>
</li>
<li><p>go源码获取</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget https://storage.googleapis.com/golang/go&lt;VERSION&gt;.src.tar.gz</div><div class="line">tar -zxvf go&lt;VERSION&gt;.src.tar.gz</div><div class="line">sudo mv go $GOROOT</div><div class="line">cd $GOROOT/src</div><div class="line">./all.bash</div></pre></td></tr></table></figure>
</li>
<li><p>go version查看版本信息</p>
</li>
</ol>
<h2 id="安装目录"><a href="#安装目录" class="headerlink" title="安装目录"></a>安装目录</h2><pre><code>.
├── CONTRIBUTING.md
├── CONTRIBUTORS
├── PATENTS
├── VERSION
├── api
├── bin     // 可执行文件
├── doc     // 文档
├── favicon.ico
├── lib     // 文档模板
├── misc    // 编辑器相关内容
├── pkg
├── robots.txt
├── src     // 完整源码
└── test
</code></pre><h2 id="go-runtime"><a href="#go-runtime" class="headerlink" title="go runtime"></a>go runtime</h2><ul>
<li>runtime相当于Java的虚拟机，负责内存分配，垃圾回收，栈处理，goroutine，channel，slice，map，reflect等</li>
<li>go的gc采用标记-清除回收器</li>
</ul>
<h1 id="第三章-Go开发环境的基本要求"><a href="#第三章-Go开发环境的基本要求" class="headerlink" title="第三章 Go开发环境的基本要求"></a>第三章 Go开发环境的基本要求</h1><h2 id="调试器"><a href="#调试器" class="headerlink" title="调试器"></a>调试器</h2><ol>
<li>打印语句，print，println,fmt.Println,fmt.Printf</li>
<li>%+v, %#v,%T打印实例的不同信息</li>
<li>使用panic获取堆栈信息</li>
<li>defer关键字来跟踪代码执行</li>
<li>go build 编译</li>
<li>go install 编译并安装</li>
</ol>
<h2 id="格式化代码-gofmt"><a href="#格式化代码-gofmt" class="headerlink" title="格式化代码 - gofmt"></a>格式化代码 - gofmt</h2><ul>
<li><code>gofmt -r &#39;(a) -&gt; a&#39; –w *.go</code></li>
<li><code>gofmt -r &#39;a[n:len(a)] -&gt; a[n:]&#39; –w *.go</code></li>
<li>参考-<a href="http://golang.org/cmd/gofmt/" target="_blank" rel="external">http://golang.org/cmd/gofmt/</a></li>
</ul>
<h2 id="代码文档-go-doc"><a href="#代码文档-go-doc" class="headerlink" title="代码文档 - go doc"></a>代码文档 - go doc</h2><ul>
<li>go doc package 获取包的文档注释，例如：go doc fmt 会显示使用 godoc 生成的 fmt 包的文档注释。</li>
<li>go doc package/subpackage 获取子包的文档注释，例如：go doc container/list。</li>
<li>go doc package function 获取某个函数在某个包中的文档注释，例如：go doc fmt Printf 会显示有关 fmt.Printf() 的使用说明</li>
</ul>
<h1 id="第四章-语言的核心结构和技术"><a href="#第四章-语言的核心结构和技术" class="headerlink" title="第四章 语言的核心结构和技术"></a>第四章 语言的核心结构和技术</h1><h2 id="文件名、关键字与标识符"><a href="#文件名、关键字与标识符" class="headerlink" title="文件名、关键字与标识符"></a>文件名、关键字与标识符</h2><ul>
<li>文件名以<code>.go</code>结尾</li>
<li><code>_</code>空白标识符</li>
<li>go的25个关键字</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">关键字</th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">break</td>
<td style="text-align:center">default</td>
<td style="text-align:center">func</td>
<td style="text-align:center">interface</td>
<td style="text-align:center">selcet</td>
</tr>
<tr>
<td style="text-align:center">case</td>
<td style="text-align:center">defer</td>
<td style="text-align:center">go</td>
<td style="text-align:center">map</td>
<td style="text-align:center">struct</td>
</tr>
<tr>
<td style="text-align:center">chan</td>
<td style="text-align:center">else</td>
<td style="text-align:center">goto</td>
<td style="text-align:center">package</td>
<td style="text-align:center">switch</td>
</tr>
<tr>
<td style="text-align:center">const</td>
<td style="text-align:center">fallthrough</td>
<td style="text-align:center">if</td>
<td style="text-align:center">range</td>
<td style="text-align:center">type</td>
</tr>
<tr>
<td style="text-align:center">continue</td>
<td style="text-align:center">for</td>
<td style="text-align:center">import</td>
<td style="text-align:center">return</td>
<td style="text-align:center">var</td>
</tr>
</tbody>
</table>
<ul>
<li>36个预定义标识符，函数</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">预定义标识符</th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">append</td>
<td style="text-align:center">bool</td>
<td style="text-align:center">byte</td>
<td style="text-align:center">cap</td>
<td style="text-align:center">close</td>
<td style="text-align:center">complex</td>
<td style="text-align:center">complex64</td>
<td style="text-align:center">complex128</td>
<td style="text-align:center">unit16</td>
</tr>
<tr>
<td style="text-align:center">copy</td>
<td style="text-align:center">false</td>
<td style="text-align:center">float32</td>
<td style="text-align:center">float64</td>
<td style="text-align:center">image</td>
<td style="text-align:center">int</td>
<td style="text-align:center">int8</td>
<td style="text-align:center">int16</td>
<td style="text-align:center">uint32</td>
</tr>
<tr>
<td style="text-align:center">int32</td>
<td style="text-align:center">int64</td>
<td style="text-align:center">iota</td>
<td style="text-align:center">len</td>
<td style="text-align:center">make</td>
<td style="text-align:center">new</td>
<td style="text-align:center">nil</td>
<td style="text-align:center">panic</td>
<td style="text-align:center">unit64</td>
</tr>
<tr>
<td style="text-align:center">print</td>
<td style="text-align:center">println</td>
<td style="text-align:center">real</td>
<td style="text-align:center">recover</td>
<td style="text-align:center">string</td>
<td style="text-align:center">true</td>
<td style="text-align:center">uint</td>
<td style="text-align:center">uint8</td>
<td style="text-align:center">uintptr</td>
</tr>
</tbody>
</table>
<ul>
<li>go程序一般由关键字，常量，变量，运算符，类型和函数组成</li>
<li>分隔符 <code>(), [], {}</code></li>
<li>标点<code>.、,、;、:、...</code>等，但是不用<code>;</code>结尾</li>
</ul>
<h2 id="Go程序的基本结构要素"><a href="#Go程序的基本结构要素" class="headerlink" title="Go程序的基本结构要素"></a>Go程序的基本结构要素</h2><h3 id="包-package"><a href="#包-package" class="headerlink" title="包-package"></a>包-package</h3><ul>
<li>包是结构化的一种方式，每个程序都有包的概念组成，一个包可以由多个.go文件组成</li>
<li>在源文件的第一行指明这个文件属于哪个包</li>
<li>一个包的源文件必须一起编译，包是编译的单元</li>
<li>对一个包进行更改或者重新编译，所有引用了这个包的客户端程序都必须全部重新编译</li>
<li>go中包模型采用显示依赖关系机制来打到快速变异的目的</li>
<li><p>包引入</p>
<pre><code><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="keyword">import</span> <span class="string">"os"</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"os"</span></div><div class="line">)</div></pre></td></tr></table></figure>
</code></pre></li>
<li><p>包名不是以<code>.</code>或者<code>/</code>开头，会在全局文件进行查找，以<code>./</code>开头会在相对目录中查找,以<code>/</code>开头会在绝对路径中查找</p>
</li>
<li>可见性规则：标识符的大小写区别</li>
<li>包可以用别名进行区分</li>
</ul>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><ul>
<li><p>定义格式</p>
<pre><code><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">functionName</span><span class="params">(parameter_list)</span> <span class="params">(return_value_list)</span></span> &#123;</div><div class="line">   …</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre></li>
<li><p>go语言是以<code>;</code>作为语句的结尾，只是由编译器自动完成</p>
</li>
<li>内部包命名遵循驼峰命名法，外部调用的遵循Pascal命名法</li>
<li>程序正常退出代码为0，异常退出代码为1</li>
</ul>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><ul>
<li><code>//</code> - 单行注释</li>
<li><code>/*  */</code> - 多行注释</li>
<li>每个包都应该有注释，package关键字之前的注释默认为对包的说明</li>
<li>全局作用于的类型、变量、常量、函数、对象都应该有一个合理的注释</li>
</ul>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><ul>
<li>类型定义了某个变量的值的集合和可对其进行操作的集合</li>
<li>基础类型：int、float、bool、string、</li>
<li>复合类型：struct、array、slice、map、channel</li>
<li>描述行为的：interface</li>
<li>函数可以作为类型返回</li>
</ul>
<h3 id="go程序的一般结构"><a href="#go程序的一般结构" class="headerlink" title="go程序的一般结构"></a>go程序的一般结构</h3><ul>
<li>完成包的导入</li>
<li>常量，变量，类型的定义或声明</li>
<li>如果存在init函数，对改函数进行定义，每个含有该函数的文件都会先执行init函数</li>
<li>如果包为main包，则定义main函数</li>
<li><p>定义其他的函数，首先是类型的方法，函数名字可以按照字母顺序来排列</p>
</li>
<li><p>go语言执行顺序：</p>
<ul>
<li>按顺序导入所有被main包引入的其他包</li>
<li>如果包中引入了其他包，递归执行包的引入</li>
<li>最新引入的包首先开始常量和变量的初始化</li>
<li>init</li>
<li>main</li>
</ul>
</li>
</ul>
<h3 id="类型抓换"><a href="#类型抓换" class="headerlink" title="类型抓换"></a>类型抓换</h3><ul>
<li>显示转换</li>
<li><code>a := b(a)</code></li>
</ul>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><ul>
<li>const关键字定义</li>
<li>类型：bool，int，float，complex，string</li>
<li><code>const Pi = 3.1415926</code></li>
<li>常量的值必须在编译时就能够确定</li>
<li>数字型的常量是没有大小和符号的，不会溢出</li>
<li>iota特性</li>
</ul>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li><p>实例<br>  <code>var a string</code></p>
  <figure class="highlight plain"><figcaption><span>(</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">    a int</div><div class="line">    b bool</div><div class="line">    str string</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>变量被声明之后，系统会自动赋给该变量零值0，0.0， false，’’， nil</p>
</li>
<li>驼峰命名法</li>
<li>全局变量和局部变量</li>
<li><p>变量的声明和赋值可以一起进行</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">15</span></div><div class="line"><span class="keyword">var</span> b = <span class="literal">false</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">"Go says hello to the world!"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> (</div><div class="line">	a = <span class="number">15</span></div><div class="line">	b = <span class="literal">false</span></div><div class="line">	str = <span class="string">"Go says hello to the world!"</span></div><div class="line">	numShips = <span class="number">50</span></div><div class="line">	city <span class="keyword">string</span></div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>通过runtime获取运行环境</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">   <span class="string">"runtime"</span></div><div class="line">	<span class="string">"os"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> goos <span class="keyword">string</span> = runtime.GOOS</div><div class="line">	fmt.Printf(<span class="string">"The operating system is: %s\n"</span>, goos)</div><div class="line">	path := os.Getenv(<span class="string">"PATH"</span>)</div><div class="line">	fmt.Printf(<span class="string">"Path is %s\n"</span>, path)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="值类型和引用类型"><a href="#值类型和引用类型" class="headerlink" title="值类型和引用类型"></a>值类型和引用类型</h3><ul>
<li>指针 &amp;i</li>
<li>一个引用类型的变量r1存储的是r1的值所在的内存地址，或内存地址中第一个字所在的位置</li>
<li>go语言中指针，slice，maps，channel都是引用类型</li>
</ul>
<h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><ul>
<li>fmt.Printf</li>
<li>%s-字符串</li>
<li>%v-类型默认输出格式</li>
<li>%T-类型</li>
</ul>
<h3 id="赋值操作符"><a href="#赋值操作符" class="headerlink" title=":=赋值操作符"></a><code>:=</code>赋值操作符</h3><ul>
<li><code>a := 50</code>,类型会自动判断</li>
<li>函数体内的首选方案，但是不能用于全局变量</li>
<li><code>a, b, c := 5, 5.5, &quot;5&quot;</code></li>
<li>a, b = b, a 交换值</li>
<li><code>_</code>抛弃不要的值</li>
</ul>
<h3 id="init函数"><a href="#init函数" class="headerlink" title="init函数"></a>init函数</h3><ul>
<li>不能被人为调用</li>
<li>执行优先级高于main</li>
<li>每个源文件只包含一个init函数</li>
<li>init中可以定义变量，检查数据，调用后台goroutine</li>
</ul>
<h2 id="基本类型和运算符"><a href="#基本类型和运算符" class="headerlink" title="基本类型和运算符"></a>基本类型和运算符</h2><h3 id="bool类型"><a href="#bool类型" class="headerlink" title="bool类型"></a>bool类型</h3><ul>
<li><code>var b bool = true</code></li>
<li><code>==</code>, <code>!=</code></li>
<li>go语言只有类型相同的两个值才可以进行比较</li>
<li><code>!、&amp;&amp;、||</code>，其中<code>&amp;&amp;</code>和<code>||</code></li>
<li>布尔值的命名推荐以is开头，如isSorted，isFinished等</li>
</ul>
<h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><ul>
<li>int，uint - 4个字节或者8个字节</li>
<li><p>uintptr - 存放一个指针的长度</p>
</li>
<li><p>整数：</p>
<ul>
<li>int8（-128 -&gt; 127）</li>
<li>int16（-32768 -&gt; 32767）</li>
<li>int32（-2,147,483,648 -&gt; 2,147,483,647）</li>
<li>int64（-9,223,372,036,854,775,808 -&gt; 9,223,372,036,854,775,807）</li>
</ul>
</li>
<li>无符号整数：<ul>
<li>uint8（0 -&gt; 255）</li>
<li>uint16（0 -&gt; 65,535）</li>
<li>uint32（0 -&gt; 4,294,967,295）</li>
<li>uint64（0 -&gt; 18,446,744,073,709,551,615）</li>
</ul>
</li>
<li><p>浮点型（IEEE-754 标准）：</p>
<ul>
<li>float32（+- 1e-45 -&gt; +- 3.4 * 1e38）</li>
<li>float64（+- 5 <em> 1e-324 -&gt; 107 </em> 1e308</li>
</ul>
</li>
<li><p>前缀0表示8进制数</p>
</li>
<li>前缀0x表示16进制数</li>
<li>e表示10的次方</li>
<li>go语言中变量之间不可以混用，常量可以，变量之间需要显示转换</li>
<li><p>格式化占位符</p>
<ul>
<li>%d - 整数</li>
<li>%x,%X - 16进制数字</li>
<li>%g - 浮点数</li>
<li>%f - 输出浮点数</li>
<li>%e - 输出科学计数法数</li>
<li>%n.mg - 数字n精确到m位</li>
</ul>
</li>
<li><p>位运算 - 用于整数类型的变量，并且要求变量等长</p>
<ul>
<li>按位与<code>&amp;</code></li>
<li>按位或<code>|</code></li>
<li>按位异或<code>^</code></li>
<li>位清除<code>&amp;^</code>将指定位置上的值设置为0</li>
<li>按位补足<code>^</code></li>
<li>位左移<code>&lt;&lt;</code></li>
<li>位右移<code>&gt;&gt;</code></li>
</ul>
</li>
<li><p>逻辑运算符</p>
<ul>
<li>==</li>
<li>!=</li>
<li>&lt;</li>
<li>&lt;=</li>
<li>&gt;</li>
<li><blockquote>
<p>=</p>
</blockquote>
</li>
</ul>
</li>
<li><p>算数运算符</p>
<ul>
<li>+</li>
<li>-</li>
<li>*</li>
<li>/</li>
<li>%</li>
<li>-=</li>
<li>+=</li>
<li>*=</li>
<li>/=</li>
<li>++，–等操作可以用于语句，但是不可以用于表达式 a[i] = b[i++]是不允许的</li>
</ul>
</li>
<li><p>随机数 - rand包</p>
</li>
</ul>
<h3 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">优先级 	运算符</div><div class="line"> 7 		^ !</div><div class="line"> 6 		* / % &lt;&lt; &gt;&gt; &amp; &amp;^</div><div class="line"> 5 		+ - | ^</div><div class="line"> 4 		== != &lt; &lt;= &gt;= &gt;</div><div class="line"> 3 		&lt;-</div><div class="line"> 2 		&amp;&amp;</div><div class="line"> 1 		||</div></pre></td></tr></table></figure>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><ul>
<li><code>type TZ int</code> TZ是int的别名</li>
<li>别名不会拥有原类型的方法</li>
</ul>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul>
<li>utf-8编码中每个字符占据字节数不确定，go中字符可能占据1-4个字节</li>
<li>go语言支持两种字面值<ul>
<li>解释字符串<ul>
<li><code>\n</code></li>
<li><code>\r</code></li>
<li><code>\t</code></li>
<li><code>\u</code></li>
<li><code>\\</code></li>
</ul>
</li>
<li>非解释字符串-普通字符串</li>
</ul>
</li>
<li>获取字符串的字节内容：str[i]</li>
<li>拼接符<code>+</code></li>
<li>效率： bytes.Buffer &gt; strings.Join &gt; +</li>
</ul>
<h2 id="strings和strconv包"><a href="#strings和strconv包" class="headerlink" title="strings和strconv包"></a>strings和strconv包</h2><h3 id="前缀和后缀"><a href="#前缀和后缀" class="headerlink" title="前缀和后缀"></a>前缀和后缀</h3><ul>
<li><p>HasPrefix - 前缀</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// HasPrefix tests whether the string s begins with prefix.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">HasPrefix</span><span class="params">(s, prefix <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(s) &gt;= <span class="built_in">len</span>(prefix) &amp;&amp; s[<span class="number">0</span>:<span class="built_in">len</span>(prefix)] == prefix</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>HasSuffix - 后缀</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// HasSuffix tests whether the string s ends with suffix.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">HasSuffix</span><span class="params">(s, suffix <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(s) &gt;= <span class="built_in">len</span>(suffix) &amp;&amp; s[<span class="built_in">len</span>(s)-<span class="built_in">len</span>(suffix):] == suffix</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="字符串包含关系"><a href="#字符串包含关系" class="headerlink" title="字符串包含关系"></a>字符串包含关系</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Contains reports whether substr is within s.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Contains</span><span class="params">(s, substr <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> Index(s, substr) &gt;= <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="判断子字符串或字符在父字符串中出现的位置"><a href="#判断子字符串或字符在父字符串中出现的位置" class="headerlink" title="判断子字符串或字符在父字符串中出现的位置"></a>判断子字符串或字符在父字符串中出现的位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">// Index returns the index of the first instance of substr in s, or -1 if substr is not present in s.</div><div class="line">func Index(s, substr string) int &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// LastIndex returns the index of the last instance of substr in s, or -1 if substr is not present in s.</div><div class="line">func LastIndex(s, substr string) int &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// IndexRune returns the index of the first instance of the Unicode code point</div><div class="line">// r, or -1 if rune is not present in s.</div><div class="line">// If r is utf8.RuneError, it returns the first instance of any</div><div class="line">// invalid UTF-8 byte sequence.</div><div class="line">func IndexRune(s string, r rune) int &#123;</div><div class="line">	switch &#123;</div><div class="line">	case 0 &lt;= r &amp;&amp; r &lt; utf8.RuneSelf:</div><div class="line">		return IndexByte(s, byte(r))</div><div class="line">	case r == utf8.RuneError:</div><div class="line">		for i, r := range s &#123;</div><div class="line">			if r == utf8.RuneError &#123;</div><div class="line">				return i</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		return -1</div><div class="line">	case !utf8.ValidRune(r):</div><div class="line">		return -1</div><div class="line">	default:</div><div class="line">		return Index(s, string(r))</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="字符串替换"><a href="#字符串替换" class="headerlink" title="字符串替换"></a>字符串替换</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Replace returns a copy of the string s with the first n</span></div><div class="line"><span class="comment">// non-overlapping instances of old replaced by new.</span></div><div class="line"><span class="comment">// If old is empty, it matches at the beginning of the string</span></div><div class="line"><span class="comment">// and after each UTF-8 sequence, yielding up to k+1 replacements</span></div><div class="line"><span class="comment">// for a k-rune string.</span></div><div class="line"><span class="comment">// If n &lt; 0, there is no limit on the number of replacements.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Replace</span><span class="params">(s, old, <span class="built_in">new</span> <span class="keyword">string</span>, n <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> old == <span class="built_in">new</span> || n == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> s <span class="comment">// avoid allocation</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// Compute number of replacements.</span></div><div class="line">	<span class="keyword">if</span> m := Count(s, old); m == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> s <span class="comment">// avoid allocation</span></div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> n &lt; <span class="number">0</span> || m &lt; n &#123;</div><div class="line">		n = m</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// Apply replacements to buffer.</span></div><div class="line">	t := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="built_in">len</span>(s)+n*(<span class="built_in">len</span>(<span class="built_in">new</span>)-<span class="built_in">len</span>(old)))</div><div class="line">	w := <span class="number">0</span></div><div class="line">	start := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</div><div class="line">		j := start</div><div class="line">		<span class="keyword">if</span> <span class="built_in">len</span>(old) == <span class="number">0</span> &#123;</div><div class="line">			<span class="keyword">if</span> i &gt; <span class="number">0</span> &#123;</div><div class="line">				_, wid := utf8.DecodeRuneInString(s[start:])</div><div class="line">				j += wid</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			j += Index(s[start:], old)</div><div class="line">		&#125;</div><div class="line">		w += <span class="built_in">copy</span>(t[w:], s[start:j])</div><div class="line">		w += <span class="built_in">copy</span>(t[w:], <span class="built_in">new</span>)</div><div class="line">		start = j + <span class="built_in">len</span>(old)</div><div class="line">	&#125;</div><div class="line">	w += <span class="built_in">copy</span>(t[w:], s[start:])</div><div class="line">	<span class="keyword">return</span> <span class="keyword">string</span>(t[<span class="number">0</span>:w])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="重复字符串"><a href="#重复字符串" class="headerlink" title="重复字符串"></a>重复字符串</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Repeat returns a new string consisting of count copies of the string s.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// It panics if count is negative or if</span></div><div class="line"><span class="comment">// the result of (len(s) * count) overflows.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Repeat</span><span class="params">(s <span class="keyword">string</span>, count <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="修改字符串大小写"><a href="#修改字符串大小写" class="headerlink" title="修改字符串大小写"></a>修改字符串大小写</h3><ul>
<li>strings.ToLower(s) string</li>
<li>strings.ToUpper(s) string</li>
</ul>
<h3 id="修剪字符串"><a href="#修剪字符串" class="headerlink" title="修剪字符串"></a>修剪字符串</h3><ul>
<li>strings.TrimSpcae(s)-剔除字符串开头和结尾的空白</li>
<li>strings.Trim(s, “cut”)-剔除字符串开头和结尾的指定字符</li>
<li>TrimLeft,TrimRight</li>
</ul>
<h3 id="分割字符串"><a href="#分割字符串" class="headerlink" title="分割字符串"></a>分割字符串</h3><ul>
<li>strings.Fields(s) - 根据空白字符分割</li>
<li>strigns.Split(s, sep) - 根据sep来分割字符串</li>
</ul>
<h3 id="拼接slice到字符串"><a href="#拼接slice到字符串" class="headerlink" title="拼接slice到字符串"></a>拼接slice到字符串</h3><ul>
<li>strings.Join(sl []string, sep string) string - 将slice使用分隔符sep来拼接成一个字符串</li>
</ul>
<h3 id="从字符串中读取内容"><a href="#从字符串中读取内容" class="headerlink" title="从字符串中读取内容"></a>从字符串中读取内容</h3><ul>
<li>strings.NewReader(str)</li>
<li>Read()</li>
<li>ReadByte()</li>
<li>ReadRune()</li>
</ul>
<h3 id="字符串和其他类型的转换"><a href="#字符串和其他类型的转换" class="headerlink" title="字符串和其他类型的转换"></a>字符串和其他类型的转换</h3><ul>
<li>strconv.Itoa(i int) string - int转换成字符串</li>
<li>strconv.FormatFloat() string</li>
<li>strconv.Atoi(s string) (int, error) 字符串到int</li>
<li>strconv.ParseFloat(s string, bitSize int) (f float, err error)</li>
</ul>
<h2 id="时间和日期"><a href="#时间和日期" class="headerlink" title="时间和日期"></a>时间和日期</h2><ul>
<li>time包</li>
<li>time.Now</li>
<li>time.Day()</li>
<li>time.Minute()</li>
<li>time.Duration()</li>
</ul>
<h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><ul>
<li>取地址符<code>&amp;</code></li>
<li>一个指针变量可以指向任何一个值的内存地址</li>
<li>通过指针来实现对原来变量值的修改</li>
<li>指针可以用来传递变量的引用，而不是变量的值的拷贝，节省开销</li>
</ul>
<h1 id="第五章-控制结构"><a href="#第五章-控制结构" class="headerlink" title="第五章 控制结构"></a>第五章 控制结构</h1><h2 id="5-1-if-else结构"><a href="#5-1-if-else结构" class="headerlink" title="5.1 if-else结构"></a>5.1 if-else结构</h2><pre><code><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> condition1 &#123;</div><div class="line">	<span class="comment">// do something</span></div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> condition2 &#123;</div><div class="line">	<span class="comment">// do something else</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="comment">// catch-all or default</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre><ul>
<li>判断一个字符串是否为空</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>  str == <span class="string">""</span> &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="built_in">len</span>(str) == <span class="number">0</span> &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断go运行的操作系统</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> runtime.GOOS == <span class="string">"windows"</span> &#123;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="测试多返回值函数的错误"><a href="#测试多返回值函数的错误" class="headerlink" title="测试多返回值函数的错误"></a>测试多返回值函数的错误</h2><ul>
<li>程序应该在最接近的位置检查所有相关的错误</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">value, err := pack1.Function1(param1)</div><div class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</div><div class="line">	fmt.Printf(<span class="string">"An error occured in pack1.Function1 with parameter %v"</span>, param1)</div><div class="line">	<span class="keyword">return</span> err</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> value, ok := readData(); ok &#123;</div><div class="line">…</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="switch结构"><a href="#switch结构" class="headerlink" title="switch结构"></a>switch结构</h2><ul>
<li>使用fallthrough表示执行完当前分支之后继续执行后续分支</li>
<li>分支之间没有break关键字</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> num <span class="keyword">int</span> = <span class="number">100</span></div><div class="line"></div><div class="line">    <span class="keyword">switch</span> num &#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">98</span>, <span class="number">99</span>:</div><div class="line">            fmt.Println(<span class="string">".."</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">100</span>:</div><div class="line">            fmt.Println(<span class="string">".."</span>)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">            fmt.Println(<span class="string">".."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>无初始值</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> num1 <span class="keyword">int</span> = <span class="number">7</span></div><div class="line"></div><div class="line">	<span class="keyword">switch</span> &#123;</div><div class="line">	    <span class="keyword">case</span> num1 &lt; <span class="number">0</span>:</div><div class="line">		    fmt.Println(<span class="string">"Number is negative"</span>)</div><div class="line">	    <span class="keyword">case</span> num1 &gt; <span class="number">0</span> &amp;&amp; num1 &lt; <span class="number">10</span>:</div><div class="line">		    fmt.Println(<span class="string">"Number is between 0 and 10"</span>)</div><div class="line">	    <span class="keyword">default</span>:</div><div class="line">		    fmt.Println(<span class="string">"Number is 10 or greater"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>包含一个初始化语句</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> a, b := x[i], y[j] &#123;</div><div class="line">	<span class="keyword">case</span> a &lt; b: t = <span class="number">-1</span></div><div class="line">	<span class="keyword">case</span> a == b: t = <span class="number">0</span></div><div class="line">	<span class="keyword">case</span> a &gt; b: t = <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="for结构"><a href="#for结构" class="headerlink" title="for结构"></a>for结构</h2><ul>
<li>基于计数器的迭代</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</div><div class="line">	fmt.Printf(<span class="string">"This is the %d iteration\n"</span>, i)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>基于条件判断的迭代</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i &gt;= <span class="number">0</span> &#123;</div><div class="line">	i = i - <span class="number">1</span></div><div class="line">	fmt.Printf(<span class="string">"The variable i is now: %d\n"</span>, i)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>无线循环 - 服务器</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> t, err = p.Token(); err == <span class="literal">nil</span>; t, err = p.Token() &#123;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>for-range结构</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	str := <span class="string">"Go is a beautiful language!"</span></div><div class="line">	fmt.Printf(<span class="string">"The length of str is: %d\n"</span>, <span class="built_in">len</span>(str))</div><div class="line">	<span class="keyword">for</span> pos, char := <span class="keyword">range</span> str &#123;</div><div class="line">		fmt.Printf(<span class="string">"Character on position %d is: %c \n"</span>, pos, char)</div><div class="line">	&#125;</div><div class="line">	fmt.Println()</div><div class="line">	str2 := <span class="string">"Chinese: 日本語"</span></div><div class="line">	fmt.Printf(<span class="string">"The length of str2 is: %d\n"</span>, <span class="built_in">len</span>(str2))</div><div class="line">	<span class="keyword">for</span> pos, char := <span class="keyword">range</span> str2 &#123;</div><div class="line">    	fmt.Printf(<span class="string">"character %c starts at byte position %d\n"</span>, char, pos)</div><div class="line">	&#125;</div><div class="line">	fmt.Println()</div><div class="line">	fmt.Println(<span class="string">"index int(rune) rune    char bytes"</span>)</div><div class="line">	<span class="keyword">for</span> index, <span class="keyword">rune</span> := <span class="keyword">range</span> str2 &#123;</div><div class="line">    	fmt.Printf(<span class="string">"%-2d      %d      %U '%c' % X\n"</span>, index, <span class="keyword">rune</span>, <span class="keyword">rune</span>, <span class="keyword">rune</span>, []<span class="keyword">byte</span>(<span class="keyword">string</span>(<span class="keyword">rune</span>)))</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="break与continue"><a href="#break与continue" class="headerlink" title="break与continue"></a>break与continue</h2><ul>
<li>break关键字可以退出for循环</li>
<li>break只会退出一层</li>
<li>continue会忽略剩余的循环体跳入下一次循环</li>
</ul>
<h2 id="标签与goto"><a href="#标签与goto" class="headerlink" title="标签与goto"></a>标签与goto</h2><ul>
<li>标签作用于外部循环</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line"></div><div class="line">LABEL1:</div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= <span class="number">5</span>; i++ &#123;</div><div class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt;= <span class="number">5</span>; j++ &#123;</div><div class="line">			<span class="keyword">if</span> j == <span class="number">4</span> &#123;</div><div class="line">				<span class="keyword">continue</span> LABEL1</div><div class="line">			&#125;</div><div class="line">			fmt.Printf(<span class="string">"i is: %d, and j is: %d\n"</span>, i, j)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>goto和标签可以来模仿循环</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	i:=<span class="number">0</span></div><div class="line">	HERE:</div><div class="line">		<span class="built_in">print</span>(i)</div><div class="line">		i++</div><div class="line">		<span class="keyword">if</span> i==<span class="number">5</span> &#123;</div><div class="line">			<span class="keyword">return</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">goto</span> HERE</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="第六章-函数"><a href="#第六章-函数" class="headerlink" title="第六章 函数"></a>第六章 函数</h1><h2 id="6-1-简介"><a href="#6-1-简介" class="headerlink" title="6.1 简介"></a>6.1 简介</h2><ul>
<li>函数是基本的代码块</li>
<li>main写在文件的前面</li>
<li>函数主要是为了代码重用</li>
<li>最后一行或者return退出函数</li>
<li>go中包含三种函数<ul>
<li>普通带有名字的函数</li>
<li>匿名函数或者lambda函数</li>
<li>方法</li>
</ul>
</li>
<li>出了main，init函数之外，其他所有函数都可以有参数和返回值</li>
<li>参数，返回值，及其类型称为函数签名-和其他语言一致</li>
<li>函数可以将其他函数作为它的参数，类型相符合就可以</li>
<li>go语言不允许函数重载</li>
<li>函数是一等公民</li>
<li>函数可以相互比较，引用相同就相等</li>
<li>go语言不支持泛型</li>
</ul>
<h2 id="6-2-函数参数与返回值"><a href="#6-2-函数参数与返回值" class="headerlink" title="6.2 函数参数与返回值"></a>6.2 函数参数与返回值</h2><ul>
<li>函数可以接收参数供自己使用，也可以返回零个或者多个值</li>
<li>go语言默认值传递</li>
<li>go语言通过指针来实现引用传递，实际上指针也是变量类型，有自己的地址和值，只是指针的值指向一个变量的地址，按引用传递可以理解为按值传递，传递的值就是指针的值。</li>
<li>slice，map,interface,channel默认引用传递</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Printf(<span class="string">"Multiply 2 * 5 * 6 = %d\n"</span>, MultiPly3Nums(<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>))</div><div class="line">    <span class="comment">// var i1 int = MultiPly3Nums(2, 5, 6)</span></div><div class="line">    <span class="comment">// fmt.Printf("MultiPly 2 * 5 * 6 = %d\n", i1)</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">MultiPly3Nums</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>, c <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    <span class="comment">// var product int = a * b * c</span></div><div class="line">    <span class="comment">// return product</span></div><div class="line">    <span class="keyword">return</span> a * b * c</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="命名的返回值"><a href="#命名的返回值" class="headerlink" title="命名的返回值"></a>命名的返回值</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> num <span class="keyword">int</span> = <span class="number">10</span></div><div class="line"><span class="keyword">var</span> numx2, numx3 <span class="keyword">int</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    numx2, numx3 = getX2AndX3(num)</div><div class="line">    PrintValues()</div><div class="line">    numx2, numx3 = getX2AndX3_2(num)</div><div class="line">    PrintValues()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintValues</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Printf(<span class="string">"num = %d, 2x num = %d, 3x num = %d\n"</span>, num, numx2, numx3)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getX2AndX3</span><span class="params">(input <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">2</span> * input, <span class="number">3</span> * input</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getX2AndX3_2</span><span class="params">(input <span class="keyword">int</span>)</span> <span class="params">(x2 <span class="keyword">int</span>, x3 <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">    x2 = <span class="number">2</span> * input</div><div class="line">    x3 = <span class="number">3</span> * input</div><div class="line">    <span class="comment">// return x2, x3</span></div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>尽量使用命名返回值：会使得代码清晰，更简短，可读性更好。</li>
</ul>
<h3 id="空白符"><a href="#空白符" class="headerlink" title="空白符"></a>空白符</h3><ul>
<li>空白符用来丢弃一些不需要的值</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> i1 <span class="keyword">int</span></div><div class="line">    <span class="keyword">var</span> f1 <span class="keyword">float32</span></div><div class="line">    i1, _, f1 = ThreeValues()</div><div class="line">    fmt.Printf(<span class="string">"The int: %d, the float: %f \n"</span>, i1, f1)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">ThreeValues</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">float32</span>)</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">5</span>, <span class="number">6</span>, <span class="number">7.5</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="改变外部变量"><a href="#改变外部变量" class="headerlink" title="改变外部变量"></a>改变外部变量</h3><ul>
<li>指针传递不仅可以节省内存，而且赋予函数改变外部变量的能力</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// this function changes reply:</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Multiply</span><span class="params">(a, b <span class="keyword">int</span>, reply *<span class="keyword">int</span>)</span></span> &#123;</div><div class="line">    *reply = a * b</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    n := <span class="number">0</span></div><div class="line">    reply := &amp;n</div><div class="line">    Multiply(<span class="number">10</span>, <span class="number">5</span>, reply)</div><div class="line">    fmt.Println(<span class="string">"Multiply:"</span>, *reply) <span class="comment">// Multiply: 50</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="6-3-传递变长参数"><a href="#6-3-传递变长参数" class="headerlink" title="6.3 传递变长参数"></a>6.3 传递变长参数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	x := min(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>)</div><div class="line">	fmt.Printf(<span class="string">"The minimum is: %d\n"</span>, x)</div><div class="line">	slice := []<span class="keyword">int</span>&#123;<span class="number">7</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>&#125;</div><div class="line">	x = min(slice...)</div><div class="line">	fmt.Printf(<span class="string">"The minimum in the slice is: %d"</span>, x)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(s ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(s)==<span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span></div><div class="line">	&#125;</div><div class="line">	min := s[<span class="number">0</span>]</div><div class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s &#123;</div><div class="line">		<span class="keyword">if</span> v &lt; min &#123;</div><div class="line">			min = v</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> min</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="6-4-defer和追踪"><a href="#6-4-defer和追踪" class="headerlink" title="6.4 defer和追踪"></a>6.4 defer和追踪</h2><ul>
<li>defer语句在函数结束之前才开始执行，适用于资源的释放等操作，类似于finally</li>
<li>defer的语句会按顺序接收参数，只是执行在最后</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">a</span><span class="params">()</span></span> &#123;</div><div class="line">	i := <span class="number">0</span></div><div class="line">	<span class="keyword">defer</span> fmt.Println(i)</div><div class="line">	i++</div><div class="line">	<span class="keyword">return</span></div><div class="line">&#125; <span class="comment">// print 0</span></div></pre></td></tr></table></figure>
<ul>
<li>多个defer语句，类似栈，先出现后执行</li>
<li>关闭文件流，解锁，打印最终报告，关闭数据库连接</li>
<li>defer可以实现代码追踪，在进入和离开函数时打印日志</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">trace</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</div><div class="line">	fmt.Println(<span class="string">"entering:"</span>, s)</div><div class="line">	<span class="keyword">return</span> s</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">un</span><span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</div><div class="line">	fmt.Println(<span class="string">"leaving:"</span>, s)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">a</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">defer</span> un(trace(<span class="string">"a"</span>))</div><div class="line">	fmt.Println(<span class="string">"in a"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">b</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">defer</span> un(trace(<span class="string">"b"</span>))</div><div class="line">	fmt.Println(<span class="string">"in b"</span>)</div><div class="line">	a()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	b()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="6-5-内置函数"><a href="#6-5-内置函数" class="headerlink" title="6.5 内置函数"></a>6.5 内置函数</h2><table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">close</td>
<td style="text-align:center">用于管道通信</td>
</tr>
<tr>
<td style="text-align:center">len</td>
<td style="text-align:center">返回某个类型的长度或数量，如字符串，数组，切片，map和管道</td>
</tr>
<tr>
<td style="text-align:center">cap</td>
<td style="text-align:center">返回某个类型的最大容量，如切片，map</td>
</tr>
<tr>
<td style="text-align:center">new</td>
<td style="text-align:center">用于值类型和用户定义的类型的创建</td>
</tr>
<tr>
<td style="text-align:center">make</td>
<td style="text-align:center">用于内置类型的创建</td>
</tr>
<tr>
<td style="text-align:center">copy，append</td>
<td style="text-align:center">用于复制和连接切片</td>
</tr>
<tr>
<td style="text-align:center">panic，recover</td>
<td style="text-align:center">错误处理机制</td>
</tr>
<tr>
<td style="text-align:center">print, println</td>
<td style="text-align:center">底层打印函数</td>
</tr>
<tr>
<td style="text-align:center">complex， real imag</td>
<td style="text-align:center">复数操作</td>
</tr>
</tbody>
</table>
<h2 id="6-6-递归函数"><a href="#6-6-递归函数" class="headerlink" title="6.6 递归函数"></a>6.6 递归函数</h2><ul>
<li>自身调用</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fib</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="params">(res <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> n &lt;= <span class="number">1</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>递归的一个问题在于栈溢出</li>
<li>go语言中可以使用相互调用的递归函数</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	fmt.Printf(<span class="string">"%d is even: is %t\n"</span>, <span class="number">16</span>, even(<span class="number">16</span>)) <span class="comment">// 16 is even: is true</span></div><div class="line">	fmt.Printf(<span class="string">"%d is odd: is %t\n"</span>, <span class="number">17</span>, odd(<span class="number">17</span>))</div><div class="line">	<span class="comment">// 17 is odd: is true</span></div><div class="line">	fmt.Printf(<span class="string">"%d is odd: is %t\n"</span>, <span class="number">18</span>, odd(<span class="number">18</span>))</div><div class="line">	<span class="comment">// 18 is odd: is false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">even</span><span class="params">(nr <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> nr == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">true</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> odd(RevSign(nr) - <span class="number">1</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">odd</span><span class="params">(nr <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> nr == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> even(RevSign(nr) - <span class="number">1</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">RevSign</span><span class="params">(nr <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> nr &lt; <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> -nr</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> nr</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="6-7-将函数作为参数"><a href="#6-7-将函数作为参数" class="headerlink" title="6.7 将函数作为参数"></a>6.7 将函数作为参数</h2><ul>
<li>go语言中函数可以作为其他函数的参数进行传递，然后在其他函数内调用执行，称为回调函数</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	callback(<span class="number">1</span>, Add)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(a, b <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">	fmt.Printf(<span class="string">"The sum of %d and %d is: %d\n"</span>, a, b, a+b)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">callback</span><span class="params">(y <span class="keyword">int</span>, f <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span>)</span> &#123;</div><div class="line">	f(y, <span class="number">2</span>) <span class="comment">// this becomes Add(1, 2)</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexFunc</span><span class="params">(s <span class="keyword">string</span>, f <span class="keyword">func</span>(<span class="keyword">rune</span>)</span> <span class="title">bool</span>, <span class="title">truth</span> <span class="title">bool</span>) <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">for</span> i, r := <span class="keyword">range</span> s &#123;</div><div class="line">		<span class="keyword">if</span> f(r) == truth &#123;</div><div class="line">			<span class="keyword">return</span> i</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">-1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-8-闭包"><a href="#6-8-闭包" class="headerlink" title="6.8 闭包"></a>6.8 闭包</h3><ul>
<li>不给函数起名，而是将函数指针赋值给某个变量，通过这个变量来实现函数的调用</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</div><div class="line">		sum := <span class="number">0</span></div><div class="line">		<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">1e6</span>; i++ &#123;</div><div class="line">			sum += i</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">print</span>(sum)</div><div class="line">	&#125;()</div><div class="line"></div><div class="line">	f()</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</div><div class="line">		g := <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123; fmt.Printf(<span class="string">"%d "</span>, i) &#125; <span class="comment">//此例子中只是为了演示匿名函数可分配不同的内存地址，在现实开发中，不应该把该部分信息放置到循环中。</span></div><div class="line">		g(i)</div><div class="line">		fmt.Printf(<span class="string">" - g is of type %T and has value %v\n"</span>, g, g)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>匿名函数可以被赋值给变量作为值来使用</li>
<li>defer关键字和匿名函数配合使用来改变函数的命名返回值</li>
<li>匿名函数被称为闭包，被允许调用定义在其他环境的变量。</li>
<li>一个函数闭包继承了函数所声明时的作用域</li>
</ul>
<h2 id="闭包应用-将函数作为返回值"><a href="#闭包应用-将函数作为返回值" class="headerlink" title="闭包应用-将函数作为返回值"></a>闭包应用-将函数作为返回值</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="comment">// make an Add2 function, give it a name p2, and call it:</span></div><div class="line">	p2 := Add2()</div><div class="line">	fmt.Printf(<span class="string">"Call Add2 for 3 gives: %v\n"</span>, p2(<span class="number">3</span>))</div><div class="line">	<span class="comment">// make a special Adder function, a gets value 2:</span></div><div class="line">	TwoAdder := Adder(<span class="number">2</span>)</div><div class="line">	fmt.Printf(<span class="string">"The result is: %v\n"</span>, TwoAdder(<span class="number">3</span>))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add2</span><span class="params">()</span> <span class="title">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">		<span class="keyword">return</span> b + <span class="number">2</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Adder</span><span class="params">(a <span class="keyword">int</span>)</span> <span class="title">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">		<span class="keyword">return</span> a + b</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> f = Adder()</div><div class="line">	fmt.Print(f(<span class="number">1</span>), <span class="string">" - "</span>)</div><div class="line">	fmt.Print(f(<span class="number">20</span>), <span class="string">" - "</span>)</div><div class="line">	fmt.Print(f(<span class="number">300</span>))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Adder</span><span class="params">()</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> x <span class="keyword">int</span></div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(delta <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">		x += delta</div><div class="line">		<span class="keyword">return</span> x</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>x中的值是可以被保存的</li>
<li>在闭包中使用到的变量可以在函数体内声明，也可以在函数体外声明</li>
</ul>
<h2 id="使用闭包调试"><a href="#使用闭包调试" class="headerlink" title="使用闭包调试"></a>使用闭包调试</h2><ul>
<li>runtime中的函数Caller提供了文件和行数的信息，可以用闭包来实现调试定位</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">where := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</div><div class="line">	_, file, line, _ := runtime.Caller(<span class="number">1</span>)</div><div class="line">	log.Printf(<span class="string">"%s:%d"</span>, file, line)</div><div class="line">&#125;</div><div class="line">where()</div><div class="line"><span class="comment">// some code</span></div><div class="line">where()</div><div class="line"><span class="comment">// some more code</span></div><div class="line">where()</div></pre></td></tr></table></figure>
<h2 id="计算函数执行时间"><a href="#计算函数执行时间" class="headerlink" title="计算函数执行时间"></a>计算函数执行时间</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">start := time.Now()</div><div class="line">longCalculation()</div><div class="line">end := time.Now()</div><div class="line">delta := end.Sub(start)</div><div class="line">fmt.Printf(<span class="string">"longCalculation took this amount of time: %s\n"</span>, delta)</div></pre></td></tr></table></figure>
<h2 id="通过内存缓存来提升性能"><a href="#通过内存缓存来提升性能" class="headerlink" title="通过内存缓存来提升性能"></a>通过内存缓存来提升性能</h2><ul>
<li>内存缓存来避免重复计算，如斐波那契，空间换时间</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">	<span class="string">"time"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> LIM = <span class="number">41</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> fibs [LIM]<span class="keyword">uint64</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> result <span class="keyword">uint64</span> = <span class="number">0</span></div><div class="line">	start := time.Now()</div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; LIM; i++ &#123;</div><div class="line">		result = fibonacci(i)</div><div class="line">		fmt.Printf(<span class="string">"fibonacci(%d) is: %d\n"</span>, i, result)</div><div class="line">	&#125;</div><div class="line">	end := time.Now()</div><div class="line">	delta := end.Sub(start)</div><div class="line">	fmt.Printf(<span class="string">"longCalculation took this amount of time: %s\n"</span>, delta)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="params">(res <span class="keyword">uint64</span>)</span></span> &#123;</div><div class="line">	<span class="comment">// memoization: check if fibonacci(n) is already known in array:</span></div><div class="line">	<span class="keyword">if</span> fibs[n] != <span class="number">0</span> &#123;</div><div class="line">		res = fibs[n]</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> n &lt;= <span class="number">1</span> &#123;</div><div class="line">		res = <span class="number">1</span></div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		res = fibonacci(n<span class="number">-1</span>) + fibonacci(n<span class="number">-2</span>)</div><div class="line">	&#125;</div><div class="line">	fibs[n] = res</div><div class="line">	<span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="第七章-数组和切片"><a href="#第七章-数组和切片" class="headerlink" title="第七章 数组和切片"></a>第七章 数组和切片</h1><h2 id="声明和初始化"><a href="#声明和初始化" class="headerlink" title="声明和初始化"></a>声明和初始化</h2><ul>
<li>数组长度是数组类型的一种</li>
<li>数组长度最大为2Gb</li>
<li>数组声明 <code>var identifier [len]type</code></li>
<li>数组声明之后所有元素会默认为零值</li>
<li>数组遍历用for循环，range更好</li>
<li>数组可以用new来创建，创建之后返回的是数组的地址，而不是数组的值</li>
</ul>
<h2 id="数组常量"><a href="#数组常量" class="headerlink" title="数组常量"></a>数组常量</h2><ul>
<li><code>var arr = [5]{18, 10, 12, 19, 23}</code></li>
<li><code>var arr = [...]{18, 10, 12, 19, 23}</code></li>
<li><code>var arr = [5]string{3: &quot;aa&quot;, 4: &quot;bb&quot;}</code>  - {“”. “”, “”, aa, bb}</li>
</ul>
<h2 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">const</span> (</div><div class="line">	WIDTH  = <span class="number">1920</span></div><div class="line">	HEIGHT = <span class="number">1080</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">type</span> pixel <span class="keyword">int</span></div><div class="line"><span class="keyword">var</span> screen [WIDTH][HEIGHT]pixel</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">for</span> y := <span class="number">0</span>; y &lt; HEIGHT; y++ &#123;</div><div class="line">		<span class="keyword">for</span> x := <span class="number">0</span>; x &lt; WIDTH; x++ &#123;</div><div class="line">			screen[x][y] = <span class="number">0</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="将数组传递给函数"><a href="#将数组传递给函数" class="headerlink" title="将数组传递给函数"></a>将数组传递给函数</h2><ul>
<li>为了降低内存的消耗，传递数组指针或者切片</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	array := [<span class="number">3</span>]<span class="keyword">float64</span>&#123;<span class="number">7.0</span>, <span class="number">8.5</span>, <span class="number">9.1</span>&#125;</div><div class="line">	x := Sum(&amp;array) <span class="comment">// Note the explicit address-of operator</span></div><div class="line">	<span class="comment">// to pass a pointer to the array</span></div><div class="line">	fmt.Printf(<span class="string">"The sum of the array is: %f"</span>, x)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(a *[3]<span class="keyword">float64</span>)</span> <span class="params">(sum <span class="keyword">float64</span>)</span></span> &#123;</div><div class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> a &#123; <span class="comment">// derefencing *a to get back to the array is not necessary!</span></div><div class="line">		sum += v</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-2-切片"><a href="#7-2-切片" class="headerlink" title="7.2 切片"></a>7.2 切片</h2><ul>
<li>切片是对数组一个连续片段的引用</li>
<li>切片可以索引，可以len</li>
<li>切片是一个长度可变的数组</li>
<li>cap函数来计算切片的最大容量 0 &lt;= len(s) &lt;= cap(s)</li>
<li>切片是引用，不耗内存，效率更高</li>
<li>声明格式 <code>var identifier []type</code></li>
<li>切片在未初始化之前是nil，长度为0</li>
<li>切片的初始化格式是：<code>var slice1 []type = arr1[start:end]</code> 前闭后开</li>
<li>切片可以扩展到其上限</li>
<li>切片初始化：<code>var x = []int{2, 3, 4, 7, 11}</code></li>
<li>切片只能向后移</li>
<li>不要用指针指向切片，因为切片本身就是一个指针</li>
</ul>
<h3 id="将切片传递给函数"><a href="#将切片传递给函数" class="headerlink" title="将切片传递给函数"></a>将切片传递给函数</h3><ul>
<li>与传递数组相比，节省内存开销，同时函数具备了改变外部变量的能力</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(a []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	s := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</div><div class="line">		s += a[i]</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> arr = [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</div><div class="line">	sum(arr[:])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="make创建切片"><a href="#make创建切片" class="headerlink" title="make创建切片"></a>make创建切片</h3><ul>
<li><code>var slice []type = make(type[], len)</code>，在创建切片的同时创建好相关数组</li>
<li>make需要两个参数，元素类型和元素个数</li>
</ul>
<h3 id="make和new的区别"><a href="#make和new的区别" class="headerlink" title="make和new的区别"></a>make和new的区别</h3><ul>
<li>new为每个新的类型T分配一片内存，初始化零值并返回类型为*T的内存地址，适用于数组和结构体</li>
<li>make返回一个类型为T的初始值，适合创建slice，map和channel</li>
<li>new分配内存，make函数初始化</li>
</ul>
<h3 id="bytes包"><a href="#bytes包" class="headerlink" title="bytes包"></a>bytes包</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> buffer bytes.Buffer</div><div class="line"><span class="keyword">for</span> &#123;</div><div class="line">	<span class="keyword">if</span> s, ok := getNextString(); ok &#123; <span class="comment">//method getNextString() not shown here</span></div><div class="line">		buffer.WriteString(s)</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">break</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">fmt.Print(buffer.String(), <span class="string">"\n"</span>)</div></pre></td></tr></table></figure>
<ul>
<li>字符串串联效率更高</li>
</ul>
<h2 id="7-3-for-range结构"><a href="#7-3-for-range结构" class="headerlink" title="7.3 for-range结构"></a>7.3 for-range结构</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> idx, value := <span class="keyword">range</span> slice &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>idx是数组或者切片的索引</li>
<li>value是索引对应的值</li>
<li><p>_忽略不需要的idx或者value</p>
</li>
<li><p>多维切片下的for-range</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> row := <span class="keyword">range</span> screen &#123;</div><div class="line">	<span class="keyword">for</span> column := <span class="keyword">range</span> screen[row] &#123;</div><div class="line">		screen[row][column] = <span class="number">1</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-4-切片重组"><a href="#7-4-切片重组" class="headerlink" title="7.4 切片重组"></a>7.4 切片重组</h2><p><code>slice1 := make([]type, start_length, capacity)</code></p>
<ul>
<li>切片可以反复扩展直到占据整个数组</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	slice1 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">10</span>)</div><div class="line">	<span class="comment">// load the slice, cap(slice1) is 10:</span></div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">cap</span>(slice1); i++ &#123;</div><div class="line">		slice1 = slice1[<span class="number">0</span>:i+<span class="number">1</span>]</div><div class="line">		slice1[i] = i</div><div class="line">		fmt.Printf(<span class="string">"The length of slice is %d\n"</span>, <span class="built_in">len</span>(slice1))</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// print the slice:</span></div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(slice1); i++ &#123;</div><div class="line">		fmt.Printf(<span class="string">"Slice at %d is %d\n"</span>, i, slice1[i])</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-5-切片的复制与追加"><a href="#7-5-切片的复制与追加" class="headerlink" title="7.5 切片的复制与追加"></a>7.5 切片的复制与追加</h2><ul>
<li>先创建再拷贝</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	sl_from := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</div><div class="line">	sl_to := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</div><div class="line"></div><div class="line">	n := <span class="built_in">copy</span>(sl_to, sl_from)</div><div class="line">	fmt.Println(sl_to)</div><div class="line">	fmt.Printf(<span class="string">"Copied %d elements\n"</span>, n) <span class="comment">// n == 3</span></div><div class="line"></div><div class="line">	sl3 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</div><div class="line">	sl3 = <span class="built_in">append</span>(sl3, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line">	fmt.Println(sl3)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>append方法追加切片并返回新的切片</li>
</ul>
<h2 id="7-6-字符串、数组和切片的应用"><a href="#7-6-字符串、数组和切片的应用" class="headerlink" title="7.6 字符串、数组和切片的应用"></a>7.6 字符串、数组和切片的应用</h2><ul>
<li><p>字符串生成切片 - <code>c := []byte(s)</code></p>
</li>
<li><p>获取字符串的某一部分 - substr := str[start:end]</p>
</li>
<li><p>字符串和切片的内存结构，字符串是一个双字结构，地址指针和长度值</p>
</li>
<li><p>go语言中字符串是不可变的，但是可以通过切片操作来改变字符串</p>
</li>
<li><p>append函数常见操作</p>
<ul>
<li>切片追加 - <code>a = append(a, b...)</code></li>
<li>切片复制 - <code>b = make([]Tm len(a))  copy(b, a)</code></li>
<li>删除索引i的元素 - <code>a = append(a[:i], a [i+1:])</code></li>
<li>切除切片 a 中从索引 i 至 j 位置的元素 - <code>a = append(a[:i], a[j:]...)</code></li>
<li>为切片 a 扩展 j 个元素长度 - <code>a = append(a, make([]T, j)...)</code></li>
<li>在索引 i 的位置插入元素 x - <code>a = append(a[:i], append([]T{x}, a[i:]...)...)</code></li>
<li>在索引 i 的位置插入长度为 j 的新切片 - <code>a = append(a[:i], append(make([]T, j), a[i:]...)...)</code></li>
<li>在索引 i 的位置插入切片 b 的所有元素 - <code>a = append(a[:i], append(b, a[i:]...)...)</code></li>
<li>取出位于切片 a 最末尾的元素 x - <code>x, a = a[len(a)-1], a[:len(a)-1]</code></li>
<li>将元素 x 追加到切片 a - <code>a = append(a, x)</code></li>
</ul>
</li>
<li><p>底层数组没有切片引用的时候会被回收</p>
</li>
</ul>
<h1 id="第八章-Map"><a href="#第八章-Map" class="headerlink" title="第八章 Map"></a>第八章 Map</h1><h2 id="8-1-声明和初始化"><a href="#8-1-声明和初始化" class="headerlink" title="8.1 声明和初始化"></a>8.1 声明和初始化</h2><h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><ul>
<li><code>var map1 map[keyType]valueType</code></li>
<li><code>var map1 map[string]int</code></li>
<li>map可以动态增长</li>
<li>未初始化的map是nil</li>
<li>key可以是string，int，float</li>
<li>value可以是任意类型的</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> mapLit <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></div><div class="line">	<span class="comment">//var mapCreated map[string]float32</span></div><div class="line">	<span class="keyword">var</span> mapAssigned <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></div><div class="line"></div><div class="line">	mapLit = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">"one"</span>: <span class="number">1</span>, <span class="string">"two"</span>: <span class="number">2</span>&#125;</div><div class="line">	mapCreated := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float32</span>)</div><div class="line">	mapAssigned = mapLit</div><div class="line"></div><div class="line">	mapCreated[<span class="string">"key1"</span>] = <span class="number">4.5</span></div><div class="line">	mapCreated[<span class="string">"key2"</span>] = <span class="number">3.14159</span></div><div class="line">	mapAssigned[<span class="string">"two"</span>] = <span class="number">3</span></div><div class="line"></div><div class="line">	fmt.Printf(<span class="string">"Map literal at \"one\" is: %d\n"</span>, mapLit[<span class="string">"one"</span>])</div><div class="line">	fmt.Printf(<span class="string">"Map created at \"key2\" is: %f\n"</span>, mapCreated[<span class="string">"key2"</span>])</div><div class="line">	fmt.Printf(<span class="string">"Map assigned at \"two\" is: %d\n"</span>, mapLit[<span class="string">"two"</span>])</div><div class="line">	fmt.Printf(<span class="string">"Map literal at \"ten\" is: %d\n"</span>, mapLit[<span class="string">"ten"</span>])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>map是引用类型，内存用make方法来分配，不要用new</li>
<li><p>map的初始化 - <code>map := make(map[string]float32)</code></p>
</li>
<li><p>map容量 - cap会自动+1扩张</p>
</li>
</ul>
<h2 id="测试键值对是否存在及删除元素"><a href="#测试键值对是否存在及删除元素" class="headerlink" title="测试键值对是否存在及删除元素"></a>测试键值对是否存在及删除元素</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> _, ok := <span class="keyword">map</span>[key1]; ok &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p><code>delete(map1, key1)</code></p>
</li>
<li><p><code>for key, value := range map1 {}</code></p>
</li>
</ul>
<h2 id="map类型的切片"><a href="#map类型的切片" class="headerlink" title="map类型的切片"></a>map类型的切片</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="comment">// Version A:</span></div><div class="line">	items := <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>, <span class="number">5</span>)</div><div class="line">	<span class="keyword">for</span> i:= <span class="keyword">range</span> items &#123;</div><div class="line">		items[i] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>, <span class="number">1</span>)</div><div class="line">		items[i][<span class="number">1</span>] = <span class="number">2</span></div><div class="line">	&#125;</div><div class="line">	fmt.Printf(<span class="string">"Version A: Value of items: %v\n"</span>, items)</div><div class="line"></div><div class="line">	<span class="comment">// Version B: NOT GOOD!</span></div><div class="line">	items2 := <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>, <span class="number">5</span>)</div><div class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> items2 &#123;</div><div class="line">		item = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>, <span class="number">1</span>) <span class="comment">// item is only a copy of the slice element.</span></div><div class="line">		item[<span class="number">1</span>] = <span class="number">2</span> <span class="comment">// This 'item' will be lost on the next iteration.</span></div><div class="line">	&#125;</div><div class="line">	fmt.Printf(<span class="string">"Version B: Value of items: %v\n"</span>, items2)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="8-5-map排序"><a href="#8-5-map排序" class="headerlink" title="8.5 map排序"></a>8.5 map排序</h2><ul>
<li>将key或者value拷贝到切片</li>
<li>对切片排序</li>
<li>根据切片打印map</li>
</ul>
<h1 id="第九章-包-package"><a href="#第九章-包-package" class="headerlink" title="第九章 包 package"></a>第九章 包 package</h1><h2 id="9-1-标准库概述"><a href="#9-1-标准库概述" class="headerlink" title="9.1 标准库概述"></a>9.1 标准库概述</h2><ul>
<li>unsafe：C/C++中调用的类型不安全的包</li>
<li>syscall-os-os/exec：底层接口包</li>
<li>archive/tar,zip-compress：文件压缩解压缩</li>
<li>fmt：格式化输入输出</li>
<li>io：基本输入输出</li>
<li>bufio：缓冲输入输出</li>
<li>path/filepath：操作在当前系统中的目标文件名路径</li>
<li>flag：对命令行参数的操作</li>
<li>strings：字符串操作</li>
<li>strconv：字符串类型转换</li>
<li>unicode：Unicode类型字符串功能</li>
<li>regexp：正则</li>
<li>bytes：字符型分片操作</li>
<li>index/suffixarray：子字符串快速查询</li>
<li>math：基本数学函数</li>
<li>math/cmath：对复数的操作</li>
<li>math/rand：随机数</li>
<li>sort：排序</li>
<li>math/big：大数</li>
<li>container-list-ring-heap：集合操作</li>
<li>list：双链表</li>
<li>ring：环形链表</li>
<li>time：日期和时间的基本操作</li>
<li>log：记录程序运行时产生的日志</li>
<li>encoding/json：读取并解码和写入并编码json数据</li>
<li>encoding/xml：xml解析器</li>
<li>text/template：数据驱动模板</li>
<li>net：网络的基本操作</li>
<li>http：可扩展的http服务器和基础客户端</li>
<li>html：html5解析器</li>
<li>runtime：go程序运行时的交互操作</li>
<li>reflect：反射</li>
</ul>
<h2 id="9-2-regexp包"><a href="#9-2-regexp包" class="headerlink" title="9.2 regexp包"></a>9.2 regexp包</h2><ul>
<li>简单模式使用Match方法</li>
</ul>
<p><code>ok, _ := regexp.Match(pattern, []byte(searchIn))</code><br><code>ok, _ := regexp.MatchString(pattern, searchIn)</code></p>
<ul>
<li>通过Compile方法返回Regrep对象进行匹配</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//目标字符串</span></div><div class="line">searchIn := <span class="string">"John: 2578.34 William: 4567.23 Steve: 5632.18"</span></div><div class="line">pat := <span class="string">"[0-9]+.[0-9]+"</span> <span class="comment">//正则</span></div><div class="line"></div><div class="line">f := <span class="function"><span class="keyword">func</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span>&#123;</div><div class="line">   	v, _ := strconv.ParseFloat(s, <span class="number">32</span>)</div><div class="line">   	<span class="keyword">return</span> strconv.FormatFloat(v * <span class="number">2</span>, <span class="string">'f'</span>, <span class="number">2</span>, <span class="number">32</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ok, _ := regexp.Match(pat, []<span class="keyword">byte</span>(searchIn)); ok &#123;</div><div class="line">   fmt.Println(<span class="string">"Match Found!"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">re, _ := regexp.Compile(pat)</div><div class="line"><span class="comment">//将匹配到的部分替换为"##.#"</span></div><div class="line">str := re.ReplaceAllString(searchIn, <span class="string">"##.#"</span>)</div><div class="line">fmt.Println(str)</div><div class="line"><span class="comment">//参数为函数时</span></div><div class="line">str2 := re.ReplaceAllStringFunc(searchIn, f)</div><div class="line">fmt.Println(str2)</div></pre></td></tr></table></figure>
<h2 id="9-3-锁和sync包"><a href="#9-3-锁和sync包" class="headerlink" title="9.3 锁和sync包"></a>9.3 锁和sync包</h2><ul>
<li>sync.Mutex是一个互斥锁，保证临界区同一个时间只有一个线程进入</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span>  <span class="string">"sync"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Info <span class="keyword">struct</span> &#123;</div><div class="line">	mu sync.Mutex</div><div class="line">	<span class="comment">// ... other fields, e.g.: Str string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Update</span><span class="params">(info *Info)</span></span> &#123;</div><div class="line">	info.mu.Lock()</div><div class="line">    <span class="comment">// critical section:</span></div><div class="line">    info.Str = <span class="comment">// new value</span></div><div class="line">    <span class="comment">// end critical section</span></div><div class="line">    info.mu.Unlock()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>RWMutex锁：可以通过RLock方法来允许同一时间多个线程读取变量，一个线程写变量</li>
</ul>
<h2 id="精密计算和big包"><a href="#精密计算和big包" class="headerlink" title="精密计算和big包"></a>精密计算和big包</h2><ul>
<li>整数的高精度计算提供了big包</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Here are some calculations with bigInts:</span></div><div class="line">im := big.NewInt(math.MaxInt64)</div><div class="line">in := im</div><div class="line">io := big.NewInt(<span class="number">1956</span>)</div><div class="line">ip := big.NewInt(<span class="number">1</span>)</div><div class="line">ip.Mul(im, in).Add(ip, im).Div(ip, io)</div><div class="line">fmt.Printf(<span class="string">"Big Int: %v\n"</span>, ip)</div><div class="line"><span class="comment">// Here are some calculations with bigInts:</span></div><div class="line">rm := big.NewRat(math.MaxInt64, <span class="number">1956</span>)</div><div class="line">rn := big.NewRat(<span class="number">-1956</span>, math.MaxInt64)</div><div class="line">ro := big.NewRat(<span class="number">19</span>, <span class="number">56</span>)</div><div class="line">rp := big.NewRat(<span class="number">1111</span>, <span class="number">2222</span>)</div><div class="line">rq := big.NewRat(<span class="number">1</span>, <span class="number">1</span>)</div><div class="line">rq.Mul(rm, rn).Add(rq, ro).Mul(rq, rp)</div><div class="line">fmt.Printf(<span class="string">"Big Rat: %v\n"</span>, rq)</div></pre></td></tr></table></figure>
<h2 id="自定义包和可见性"><a href="#自定义包和可见性" class="headerlink" title="自定义包和可见性"></a>自定义包和可见性</h2><ul>
<li>import导入包，路径名或者URL地址</li>
<li>导入外部安装包：<code>go install codesite/..</code>,安装在GOROOT/src/目录下</li>
<li>程序的初始化在于导入包，初始化main包然后调用main函数</li>
<li>init函数不能被调用</li>
</ul>
<h2 id="godoc"><a href="#godoc" class="headerlink" title="godoc"></a>godoc</h2><ul>
<li>命令行执行 <code>godoc -http=:6060 -goroot=&quot;.&quot;</code>其中<code>.</code>是当前路径，会在127.0.0.1：6060中看到本地go的注释</li>
</ul>
<h2 id="go-install"><a href="#go-install" class="headerlink" title="go install"></a>go install</h2><ul>
<li>go install是go中自动包安装工具</li>
<li><code>go installl uc</code>会将uc.a包安装到pkg目录下</li>
<li>也可以用gomake来安装</li>
<li>go test测试</li>
</ul>
<h2 id="git打包和安装"><a href="#git打包和安装" class="headerlink" title="git打包和安装"></a>git打包和安装</h2><ul>
<li>安装到GitHub</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git init</div><div class="line">git add .</div><div class="line">git commit -m &quot;&quot;</div><div class="line">git remote add origin git@github.com:NNN/uc.git</div><div class="line">git push -u origin master</div></pre></td></tr></table></figure>
<ul>
<li>从GitHub安装 - <code>go get github.com/xxx/xx</code></li>
</ul>
<h2 id="外部库的使用"><a href="#外部库的使用" class="headerlink" title="外部库的使用"></a>外部库的使用</h2><ol>
<li>下载并安装外部库-go install</li>
<li>GOPATH是否有，包会被下载到<code>$GOPATH/PKG/&quot;machine_arch&quot;/</code></li>
</ol>
<h1 id="第十章-结构和方法"><a href="#第十章-结构和方法" class="headerlink" title="第十章 结构和方法"></a>第十章 结构和方法</h1><ul>
<li>go通过类型别名和结构体的形式支持用户自定义类型</li>
<li>结构体是复合类型，new来创建</li>
<li>数据称为字段fields</li>
</ul>
<h2 id="10-1-结构体定义"><a href="#10-1-结构体定义" class="headerlink" title="10.1 结构体定义"></a>10.1 结构体定义</h2><ul>
<li>结构体的定义方法：</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> identifier <span class="keyword">struct</span> &#123;</div><div class="line">    field1 type1</div><div class="line">    field2 type2</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> T <span class="keyword">struct</span>&#123;a, b <span class="keyword">int</span>&#125;</div></pre></td></tr></table></figure>
<ul>
<li>数组可以看做使用下标的结构体</li>
<li>new函数给结构体分配内存，返回已分配内存的指针</li>
<li>var t T，此时t是T的一个实例/对象</li>
<li>结构体打印和%v效果一样</li>
<li>结构体变量和指针都可以通过<code>.</code>来选择字段值</li>
<li><code>p := Point{}</code>是实例，<code>p := &amp;Point{}是指针</code></li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</div><div class="line">    firstName   <span class="keyword">string</span></div><div class="line">    lastName    <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">upPerson</span><span class="params">(p *Person)</span></span> &#123;</div><div class="line">    p.firstName = strings.ToUpper(p.firstName)</div><div class="line">    p.lastName = strings.ToUpper(p.lastName)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// 1-struct as a value type:</span></div><div class="line">    <span class="keyword">var</span> pers1 Person</div><div class="line">    pers1.firstName = <span class="string">"Chris"</span></div><div class="line">    pers1.lastName = <span class="string">"Woodward"</span></div><div class="line">    upPerson(&amp;pers1)</div><div class="line">    fmt.Printf(<span class="string">"The name of the person is %s %s\n"</span>, pers1.firstName, pers1.lastName)</div><div class="line"></div><div class="line">    <span class="comment">// 2—struct as a pointer:</span></div><div class="line">    pers2 := <span class="built_in">new</span>(Person)</div><div class="line">    pers2.firstName = <span class="string">"Chris"</span></div><div class="line">    pers2.lastName = <span class="string">"Woodward"</span></div><div class="line">    (*pers2).lastName = <span class="string">"Woodward"</span>  <span class="comment">// 这是合法的</span></div><div class="line">    upPerson(pers2)</div><div class="line">    fmt.Printf(<span class="string">"The name of the person is %s %s\n"</span>, pers2.firstName, pers2.lastName)</div><div class="line"></div><div class="line">    <span class="comment">// 3—struct as a literal:</span></div><div class="line">    pers3 := &amp;Person&#123;<span class="string">"Chris"</span>,<span class="string">"Woodward"</span>&#125;</div><div class="line">    upPerson(pers3)</div><div class="line">    fmt.Printf(<span class="string">"The name of the person is %s %s\n"</span>, pers3.firstName, pers3.lastName)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>go的内存布局，结构体和其字段在内存中是连续存在的，性能更好，空间换时间</p>
</li>
<li><p>递归结构体，链表，树的实现</p>
</li>
<li><p>结构体可以和他别名进行类型转换</p>
</li>
</ul>
<h2 id="10-2-使用工厂方法创建结构体实例"><a href="#10-2-使用工厂方法创建结构体实例" class="headerlink" title="10.2 使用工厂方法创建结构体实例"></a>10.2 使用工厂方法创建结构体实例</h2><ul>
<li>工厂方法以new或者New开头</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> File <span class="keyword">struct</span> &#123;</div><div class="line">	fd <span class="keyword">int</span></div><div class="line">	name <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewFile</span><span class="params">(fd <span class="keyword">int</span>, name <span class="keyword">string</span>)</span> *<span class="title">File</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> fd &lt; <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> &amp;File&#123;fd, name&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>推荐使用工厂方法来创建结构体，结构体字段就可以定义为私有的，OO思想</li>
</ul>
<h2 id="10-3-使用自定义包中的结构体"><a href="#10-3-使用自定义包中的结构体" class="headerlink" title="10.3 使用自定义包中的结构体"></a>10.3 使用自定义包中的结构体</h2><p>直接import就OK了</p>
<h2 id="10-4-带标签的结构体"><a href="#10-4-带标签的结构体" class="headerlink" title="10.4 带标签的结构体"></a>10.4 带标签的结构体</h2><ul>
<li>结构体中的字段出了名字和类型之外，还有一个可选的标签</li>
<li>标签是附属于字段的字符串，文档注释等操作</li>
<li>reflect可以取到tag</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> TagType <span class="keyword">struct</span> &#123; <span class="comment">// tags</span></div><div class="line">	field1 <span class="keyword">bool</span>   <span class="string">"An important answer"</span></div><div class="line">	field2 <span class="keyword">string</span> <span class="string">"The name of the thing"</span></div><div class="line">	field3 <span class="keyword">int</span>    <span class="string">"How much there are"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="10-5-匿名字段和内嵌结构体"><a href="#10-5-匿名字段和内嵌结构体" class="headerlink" title="10.5 匿名字段和内嵌结构体"></a>10.5 匿名字段和内嵌结构体</h2><ul>
<li>字段没有名字，只有类型</li>
<li>匿名字段可以是结构体</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> innerS <span class="keyword">struct</span> &#123;</div><div class="line">	in1 <span class="keyword">int</span></div><div class="line">	in2 <span class="keyword">int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> outerS <span class="keyword">struct</span> &#123;</div><div class="line">	b    <span class="keyword">int</span></div><div class="line">	c    <span class="keyword">float32</span></div><div class="line">	<span class="keyword">int</span>  <span class="comment">// anonymous field</span></div><div class="line">	innerS <span class="comment">//anonymous field</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>实际上一个结构体对每一个类型最多有一个匿名字段，通过struct.type获取</p>
</li>
<li><p>内嵌结构体的概念类似于继承</p>
</li>
<li><p>内外的结构体命名冲突，外层的名字会覆盖内层的名字，同级别冲突报错</p>
</li>
</ul>
<h2 id="10-6-方法"><a href="#10-6-方法" class="headerlink" title="10.6 方法"></a>10.6 方法</h2><ul>
<li><p>go方法是作用在接收者上的一个函数，接收者是某个类型的变量</p>
</li>
<li><p>接收者可以是任何对象除了interface</p>
</li>
<li><p>go中类型的代码和绑定在它上面的方法的代码可以不放置在一起，只要是同一个包就可以</p>
</li>
<li><p>方法集</p>
</li>
<li><p>方法不允许重载</p>
</li>
<li><p>定义格式 <code>func (_ receiver_type) methodName(parameter_list) (return_value_list) { ... }</code></p>
</li>
<li><p>接收者可以理解为Java中的this</p>
</li>
</ul>
<h3 id="函数和方法的区别"><a href="#函数和方法的区别" class="headerlink" title="函数和方法的区别"></a>函数和方法的区别</h3><ul>
<li>函数将变量作为参数，方法在变量上被调用</li>
<li>接收者需要显示命名</li>
<li>receiver_type必须和方法同包</li>
<li>类型和方法之间的关联由接收者来建立</li>
<li>方法没有和结构体混合，表明数据和方法是独立的</li>
</ul>
<h3 id="指针或值作为接收者"><a href="#指针或值作为接收者" class="headerlink" title="指针或值作为接收者"></a>指针或值作为接收者</h3><ul>
<li><p>一般来说接收者都是类型的指针，效率更高</p>
</li>
<li><p>指针方法和值方法都可以在指针或非指针上被调用</p>
</li>
<li><p>未导出的结构体的对象通过setter\getter来修改和获取</p>
</li>
</ul>
<h3 id="内嵌类型的方法和继承"><a href="#内嵌类型的方法和继承" class="headerlink" title="内嵌类型的方法和继承"></a>内嵌类型的方法和继承</h3><ul>
<li>匿名类型被内嵌时，其可见方法也同样被内嵌，等价于外部结构继承了这些方法</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Engine <span class="keyword">interface</span> &#123;</div><div class="line">    Start()</div><div class="line">    Stop</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Car <span class="keyword">interface</span> <span class="keyword">struct</span> &#123;</div><div class="line">    Engine</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Car)</span> <span class="title">GoToWorkIn</span><span class="params">()</span></span> &#123;</div><div class="line">    c.Start()</div><div class="line">    c.Stop()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>方法可以被外层结构体覆盖</li>
</ul>
<h3 id="如何在类型中嵌入功能"><a href="#如何在类型中嵌入功能" class="headerlink" title="如何在类型中嵌入功能"></a>如何在类型中嵌入功能</h3><ul>
<li><p>两种方法</p>
<ul>
<li>聚合：包含一个所需要功能的具体字段</li>
<li>内嵌：内嵌需要的功能类型</li>
</ul>
</li>
<li><p>聚合</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Log <span class="keyword">struct</span> &#123;</div><div class="line">    msg <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Customer <span class="keyword">struct</span> &#123;</div><div class="line">    Name <span class="keyword">string</span></div><div class="line">    log *Log</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Log)</span> <span class="title">Add</span><span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</div><div class="line">    l.msg += <span class="string">"\n"</span> + s</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Log)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> l.msg</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Customer)</span> <span class="title">Log</span><span class="params">()</span> *<span class="title">Log</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> c.log</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>内嵌</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Log <span class="keyword">struct</span> &#123;</div><div class="line">	msg <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Customer <span class="keyword">struct</span> &#123;</div><div class="line">	Name <span class="keyword">string</span></div><div class="line">	Log</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	c := &amp;Customer&#123;<span class="string">"Barak Obama"</span>, Log&#123;<span class="string">"1 - Yes we can!"</span>&#125;&#125;</div><div class="line">	c.Add(<span class="string">"2 - After me the world will be a better place!"</span>)</div><div class="line">	fmt.Println(c)</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Log)</span> <span class="title">Add</span><span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</div><div class="line">	l.msg += <span class="string">"\n"</span> + s</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Log)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> l.msg</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Customer)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> c.Name + <span class="string">"\nLog:"</span> + fmt.Sprintln(c.Log)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>内嵌的类型不需要指针</li>
</ul>
<h3 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h3><ul>
<li>多重继承指的是一个类型获得多个父类型的能力</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Camera <span class="keyword">struct</span> &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Camera)</span> <span class="title">TakeAPicture</span><span class="params">()</span> <span class="title">string</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"click"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Phone <span class="keyword">struct</span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Phone)</span> <span class="title">Call</span> <span class="title">string</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"ring"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> CameraPhone <span class="keyword">struct</span> &#123;</div><div class="line">    Camera</div><div class="line">    Phone</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    cp := <span class="built_in">new</span>(CameraPhone)</div><div class="line">    fmt.Println(cp.TakeAPicture(), cp.Call())</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="其他语言和GO的类型和方法的比较"><a href="#其他语言和GO的类型和方法的比较" class="headerlink" title="其他语言和GO的类型和方法的比较"></a>其他语言和GO的类型和方法的比较</h3><ul>
<li>go中，类型就是类，代码复用和多态更好</li>
<li>go中，代码通过组合和委托实现，多态通过接口的使用来实现</li>
</ul>
<h2 id="10-7-类型的String方法和格式化描述符"><a href="#10-7-类型的String方法和格式化描述符" class="headerlink" title="10.7 类型的String方法和格式化描述符"></a>10.7 类型的String方法和格式化描述符</h2><ul>
<li>定义了string()方法的类型，会被fmt.Println()中生成默认的输出，等同于%v产生的输出</li>
<li>注意不要在String方法里面调用涉及String()方法的方法，放置造成无限递归</li>
</ul>
<h2 id="10-8-垃圾回收和SetFinalizer"><a href="#10-8-垃圾回收和SetFinalizer" class="headerlink" title="10.8 垃圾回收和SetFinalizer"></a>10.8 垃圾回收和SetFinalizer</h2><ul>
<li>go语言有自己的垃圾回收器</li>
<li>通过runtime包访问GC进程，<code>runtime.GC()</code></li>
<li>SetFinalizer可以在对象被移除前进行一些操作<code>runtime.SetFinalizer(obj, func(obj *typeObj))</code></li>
</ul>
<h1 id="第11章-接口与反射"><a href="#第11章-接口与反射" class="headerlink" title="第11章 接口与反射"></a>第11章 接口与反射</h1><ul>
<li>接口定义了一组方法</li>
<li>go中的接口都很简短，0-3个方法</li>
<li>go语言中接口可以有值，为多字数据结构，值为nil</li>
<li>类型来实现接口找那个的方法</li>
<li>类型不需要显示声明它实现了哪个接口：接口被隐式的实现，多个类型可以实现同一个接口</li>
<li>实现某个接口的类型可以有其他的方法</li>
<li>一个类型可以实现多个接口</li>
<li>接口类型可以包含一个实例的引用，该实例的类型实现了此接口，接口是动态类型</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Shaper <span class="keyword">interface</span> &#123;</div><div class="line">	Area() <span class="keyword">float32</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Square <span class="keyword">struct</span> &#123;</div><div class="line">	side <span class="keyword">float32</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(sq *Square)</span> <span class="title">Area</span><span class="params">()</span> <span class="title">float32</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> sq.side * sq.side</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</div><div class="line">   length, width <span class="keyword">float32</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Rectangle)</span> <span class="title">Area</span><span class="params">()</span> <span class="title">float32</span></span> &#123;</div><div class="line">   <span class="keyword">return</span> r.length * r.width</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">   r := Rectangle&#123;<span class="number">5</span>, <span class="number">3</span>&#125; <span class="comment">// Area() of Rectangle needs a value</span></div><div class="line">   q := &amp;Square&#123;<span class="number">5</span>&#125;      <span class="comment">// Area() of Square needs a pointer</span></div><div class="line">   shapes := []Shaper&#123;r, q&#125;</div><div class="line">   fmt.Println(<span class="string">"Looping through shapes for area ..."</span>)</div><div class="line">   <span class="keyword">for</span> n, _ := <span class="keyword">range</span> shapes &#123;</div><div class="line">       fmt.Println(<span class="string">"Shape details: "</span>, shapes[n])</div><div class="line">       fmt.Println(<span class="string">"Area of this shape is: "</span>, shapes[n].Area())</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接口的多态实例，父类引用持有子类变量。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> stockPosition <span class="keyword">struct</span> &#123;</div><div class="line">    ticker <span class="keyword">string</span></div><div class="line">    sharePrice <span class="keyword">float32</span></div><div class="line">    count <span class="keyword">float32</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s stockPosition)</span> <span class="title">getValue</span><span class="params">()</span> <span class="title">float32</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> s.sharePrice * s.count</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> car <span class="keyword">struct</span> &#123;</div><div class="line">    <span class="built_in">make</span> <span class="keyword">string</span></div><div class="line">    model <span class="keyword">string</span></div><div class="line">    price <span class="keyword">float32</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Car)</span> <span class="title">getValue</span><span class="params">()</span> <span class="title">float32</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> c.price</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> valuable <span class="keyword">interface</span> &#123;</div><div class="line">    getValue() <span class="keyword">float32</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">showValue</span><span class="params">(asset valuable)</span></span> &#123;</div><div class="line">    fmt.Printf(<span class="string">"Value of the asset is %f\n"</span>, assert.getValue())</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> o valuable = stockPosition&#123;<span class="string">"GOODS"</span>, <span class="number">577.012</span>, <span class="number">4</span>&#125;</div><div class="line">    showValue(o)</div><div class="line">    o = car&#123;<span class="string">"BMW"</span>, <span class="string">"M5"</span>, <span class="number">56565465</span>&#125;</div><div class="line">    showValue(o)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>标准库中的例子-Reader</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</div><div class="line">    Read(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="11-2接口嵌套接口"><a href="#11-2接口嵌套接口" class="headerlink" title="11.2接口嵌套接口"></a>11.2接口嵌套接口</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> ReadWrite <span class="keyword">interface</span> &#123;</div><div class="line">    Read(b Buffer) <span class="keyword">bool</span></div><div class="line">    Write(b Buffer) <span class="keyword">bool</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Lock <span class="keyword">interface</span> &#123;</div><div class="line">    Lock()</div><div class="line">    Unlock()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> File <span class="keyword">interface</span> &#123;</div><div class="line">    ReadWrite</div><div class="line">    Lokck</div><div class="line">    Close()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="11-3-类型断言：如何检测和转换接口变量的类型"><a href="#11-3-类型断言：如何检测和转换接口变量的类型" class="headerlink" title="11.3 类型断言：如何检测和转换接口变量的类型"></a>11.3 类型断言：如何检测和转换接口变量的类型</h2><ul>
<li>一个接口类型的变量可以包含任何类型的值，类型断言来检测某个时刻该接口变量的值</li>
<li><code>v := varI.(T)</code> varI为接口变量</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> areaIntf Shaper</div><div class="line">sq1 := <span class="built_in">new</span>(Square)</div><div class="line">sq1.side = <span class="number">5</span></div><div class="line"></div><div class="line">areaIntf = sq1</div><div class="line"><span class="keyword">if</span> t, ok := areaIntf.(*Square); ok &#123;</div><div class="line">    fmt.Println()</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> u, ok := areaIntf.(*Circle); ok &#123;</div><div class="line">    fmt.....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="11-4-类型判断-type-switch"><a href="#11-4-类型判断-type-switch" class="headerlink" title="11.4 类型判断: type-switch"></a>11.4 类型判断: type-switch</h2><ul>
<li>不允许fallthrought关键字</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">classifier</span><span class="params">(items ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</div><div class="line">	<span class="keyword">for</span> i, x := <span class="keyword">range</span> items &#123;</div><div class="line">		<span class="keyword">switch</span> x.(<span class="keyword">type</span>) &#123;</div><div class="line">		<span class="keyword">case</span> <span class="keyword">bool</span>:</div><div class="line">			fmt.Printf(<span class="string">"Param #%d is a bool\n"</span>, i)</div><div class="line">		<span class="keyword">case</span> <span class="keyword">float64</span>:</div><div class="line">			fmt.Printf(<span class="string">"Param #%d is a float64\n"</span>, i)</div><div class="line">		<span class="keyword">case</span> <span class="keyword">int</span>, <span class="keyword">int64</span>:</div><div class="line">			fmt.Printf(<span class="string">"Param #%d is a int\n"</span>, i)</div><div class="line">		<span class="keyword">case</span> <span class="literal">nil</span>:</div><div class="line">			fmt.Printf(<span class="string">"Param #%d is a nil\n"</span>, i)</div><div class="line">		<span class="keyword">case</span> <span class="keyword">string</span>:</div><div class="line">			fmt.Printf(<span class="string">"Param #%d is a string\n"</span>, i)</div><div class="line">		<span class="keyword">default</span>:</div><div class="line">			fmt.Printf(<span class="string">"Param #%d is unknown\n"</span>, i)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="11-5-测试一个值是否实现了某个接口"><a href="#11-5-测试一个值是否实现了某个接口" class="headerlink" title="11.5 测试一个值是否实现了某个接口"></a>11.5 测试一个值是否实现了某个接口</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Stringer <span class="keyword">interface</span> &#123;</div><div class="line">    String() <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> sv, ok := v.(Stringer); ok &#123;</div><div class="line">    fmt.Printf(<span class="string">"v implements String(): %s\n"</span>, sv.String()) <span class="comment">// note: sv, not v</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>接口是一种契约，实现类型必须满足它，描述了类型的行为，规定类型可以做什么。</li>
<li>使用接口使得代码更具有普适性</li>
</ul>
<h2 id="11-6-使用方法集与接口"><a href="#11-6-使用方法集与接口" class="headerlink" title="11.6 使用方法集与接口"></a>11.6 使用方法集与接口</h2><ul>
<li>作用于变量上的方法实际上是不区分变量是值还是指针的，但是如果变量是接口类型时，由于接口变量中村的具体指是不可以寻址的，会编译错误</li>
<li>在指针上调用方法时，必须有和方法定义时相同的接收者类型或者可以从具体类型P直接进行辨识的类型<ul>
<li>指针方法可以通过指针调用</li>
<li>值方法可以通过值调用</li>
<li>接收者是值的方法可以通过指针调用，因为指针会首先被解引用</li>
<li>接收者是指针的方法不可以通过值调用，因为存储在接口中的值没有地址</li>
</ul>
</li>
<li>将一个值赋值给接口时，编译器会进行类型检查</li>
</ul>
<p><em>小结</em></p>
<ol>
<li>类型<code>*T</code>的可调用方法集合包含接受者为*T或T的所有方法集</li>
<li>类型T的可调用方法集包含接受者为T的所有方法</li>
</ol>
<h2 id="11-7-Sorter接口排序"><a href="#11-7-Sorter接口排序" class="headerlink" title="11.7 Sorter接口排序"></a>11.7 Sorter接口排序</h2><ul>
<li>Sort函数接收一个Sorter接口类型的参数，Sorter接口定义了len，less,swap方法</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> sort</div><div class="line"></div><div class="line"><span class="keyword">type</span> Sorter <span class="keyword">interface</span> &#123;</div><div class="line">    Len() <span class="keyword">int</span></div><div class="line">    Less(i, j <span class="keyword">int</span>) <span class="keyword">bool</span></div><div class="line">    Swap(i, j, <span class="keyword">int</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sort</span><span class="params">(data Sorter)</span></span> &#123;</div><div class="line">    <span class="keyword">for</span> pass := <span class="number">1</span>; pass &lt; data.Len(); pass++ &#123;</div><div class="line">        <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; data.Len - pass; i++ &#123;</div><div class="line">            <span class="keyword">if</span> data.Less(i+<span class="number">1</span>, j) &#123;</div><div class="line">                data.Swap(i, i + <span class="number">1</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">IsSorted</span><span class="params">(data Sorter)</span> <span class="title">bool</span></span> &#123;</div><div class="line">    n := data.Len</div><div class="line">    <span class="keyword">for</span> i := n - <span class="number">1</span>; i &gt; <span class="number">0</span>; i-- &#123;</div><div class="line">        <span class="keyword">if</span> data.Less(i, i<span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> IntArray []<span class="keyword">int</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p IntArray)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>&#123;<span class="keyword">return</span> <span class="built_in">len</span>(p)&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p IntArray)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;<span class="keyword">return</span> p[i] &lt; p[j]&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p IntArray)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;p[i], p[j] = p[j], p[i]&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> StringArray []<span class="keyword">string</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p StringArray)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>           &#123; <span class="keyword">return</span> <span class="built_in">len</span>(p) &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p StringArray)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> p[i] &lt; p[j] &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p StringArray)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; p[i], p[j] = p[j], p[i] &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">SortInts</span><span class="params">(a []<span class="keyword">int</span>)</span></span>       &#123; Sort(IntArray(a)) &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">SortStrings</span><span class="params">(a []<span class="keyword">string</span>)</span></span> &#123; Sort(StringArray(a)) &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">IntsAreSorted</span><span class="params">(a []<span class="keyword">int</span>)</span> <span class="title">bool</span></span>       &#123; <span class="keyword">return</span> IsSorted(IntArray(a)) &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">StringsAreSorted</span><span class="params">(a []<span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> IsSorted(StringArray(a))</div></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">     	<span class="string">"fmt"</span></div><div class="line">     	<span class="string">"./sort"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// sorting of slice of integers</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">ints</span><span class="params">()</span></span> &#123;</div><div class="line">    	data := []<span class="keyword">int</span>&#123;<span class="number">74</span>, <span class="number">59</span>, <span class="number">238</span>, <span class="number">-784</span>, <span class="number">9845</span>, <span class="number">959</span>, <span class="number">905</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">42</span>, <span class="number">7586</span>, <span class="number">-5467984</span>, <span class="number">7586</span>&#125;</div><div class="line">    	a := sort.IntArray(data)  <span class="comment">//conversion to type IntArray</span></div><div class="line">    	sort.Sort(a)</div><div class="line">    	<span class="keyword">if</span> !sort.IsSorted(a) &#123;</div><div class="line">    			<span class="built_in">panic</span>(<span class="string">"fail"</span>)</div><div class="line">    	&#125;</div><div class="line">	    fmt.Printf(<span class="string">"The sorted array is: %v\n"</span>, a)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// sorting of slice of strings</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">strings</span><span class="params">()</span></span> &#123;</div><div class="line">    	data := []<span class="keyword">string</span>&#123;<span class="string">"monday"</span>, <span class="string">"friday"</span>, <span class="string">"tuesday"</span>, <span class="string">"wednesday"</span>, <span class="string">"sunday"</span>,<span class="string">"thursday"</span>, <span class="string">""</span>, <span class="string">"saturday"</span>&#125;</div><div class="line">    	a := sort.StringArray(data)</div><div class="line">    	sort.Sort(a)</div><div class="line">    	<span class="keyword">if</span> !sort.IsSorted(a) &#123;</div><div class="line">    			<span class="built_in">panic</span>(<span class="string">"fail"</span>)</div><div class="line">		&#125;</div><div class="line">	    fmt.Printf(<span class="string">"The sorted array is: %v\n"</span>, a)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// a type which describes a day of the week</span></div><div class="line"><span class="keyword">type</span> day <span class="keyword">struct</span> &#123;</div><div class="line">    	num        <span class="keyword">int</span></div><div class="line">    	shortName  <span class="keyword">string</span></div><div class="line">    	longName   <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> dayArray <span class="keyword">struct</span> &#123;</div><div class="line">    	data []*day</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *dayArray)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>            &#123; <span class="keyword">return</span> <span class="built_in">len</span>(p.data) &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *dayArray)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span>  &#123; <span class="keyword">return</span> p.data[i].num &lt; p.data[j].num &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *dayArray)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>       &#123; p.data[i], p.data[j] = p.data[j], p.data[i] &#125;</div><div class="line"></div><div class="line"><span class="comment">// sorting of custom type day</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">days</span><span class="params">()</span></span> &#123;</div><div class="line">    	Sunday :=    day&#123;<span class="number">0</span>, <span class="string">"SUN"</span>, <span class="string">"Sunday"</span>&#125;</div><div class="line">    	Monday :=    day&#123;<span class="number">1</span>, <span class="string">"MON"</span>, <span class="string">"Monday"</span>&#125;</div><div class="line">    	Tuesday :=   day&#123;<span class="number">2</span>, <span class="string">"TUE"</span>, <span class="string">"Tuesday"</span>&#125;</div><div class="line">    	Wednesday := day&#123;<span class="number">3</span>, <span class="string">"WED"</span>, <span class="string">"Wednesday"</span>&#125;</div><div class="line">    	Thursday :=  day&#123;<span class="number">4</span>, <span class="string">"THU"</span>, <span class="string">"Thursday"</span>&#125;</div><div class="line">    	Friday :=    day&#123;<span class="number">5</span>, <span class="string">"FRI"</span>, <span class="string">"Friday"</span>&#125;</div><div class="line">    	Saturday :=  day&#123;<span class="number">6</span>, <span class="string">"SAT"</span>, <span class="string">"Saturday"</span>&#125;</div><div class="line">    	data := []*day&#123;&amp;Tuesday, &amp;Thursday, &amp;Wednesday, &amp;Sunday, &amp;Monday, &amp;Friday, &amp;Saturday&#125;</div><div class="line">    	a := dayArray&#123;data&#125;</div><div class="line">    	sort.Sort(&amp;a)</div><div class="line">    	<span class="keyword">if</span> !sort.IsSorted(&amp;a) &#123;</div><div class="line">    			<span class="built_in">panic</span>(<span class="string">"fail"</span>)</div><div class="line">    	&#125;</div><div class="line">    	<span class="keyword">for</span> _, d := <span class="keyword">range</span> data &#123;</div><div class="line">    			fmt.Printf(<span class="string">"%s "</span>, d.longName)</div><div class="line">    	&#125;</div><div class="line">    	fmt.Printf(<span class="string">"\n"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    ints()</div><div class="line">    strings()</div><div class="line">    days()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="11-8-读和写"><a href="#11-8-读和写" class="headerlink" title="11.8 读和写"></a>11.8 读和写</h2><ul>
<li>io包中提供了用于读和写的接口<code>io.Reader</code>和<code>io.Writer</code></li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</div><div class="line">    Read(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</div><div class="line">    Write(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>只要实现了读写接口，这个对象就是可读写的</li>
<li>bufio里面提供了带缓冲的读写</li>
</ul>
<h2 id="11-9-空接口"><a href="#11-9-空接口" class="headerlink" title="11.9 空接口"></a>11.9 空接口</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li>空接口不包含任何方法，对实现不做要求 <code>type Any interface{}</code></li>
<li>类似Java中的Object类</li>
<li>空接口可以被赋予任何值</li>
<li>每个interface变量占据两个字长，一个用来存储包含的类型，一个用来存储包含的数据或者数据指针</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">testFunc := <span class="function"><span class="keyword">func</span><span class="params">(any <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</div><div class="line">	<span class="keyword">switch</span> v := any.(<span class="keyword">type</span>) &#123;</div><div class="line">	<span class="keyword">case</span> <span class="keyword">bool</span>:</div><div class="line">		fmt.Printf(<span class="string">"any %v is a bool type"</span>, v)</div><div class="line">	<span class="keyword">case</span> <span class="keyword">int</span>:</div><div class="line">		fmt.Printf(<span class="string">"any %v is an int type"</span>, v)</div><div class="line">	<span class="keyword">case</span> <span class="keyword">float32</span>:</div><div class="line">		fmt.Printf(<span class="string">"any %v is a float32 type"</span>, v)</div><div class="line">	<span class="keyword">case</span> <span class="keyword">string</span>:</div><div class="line">		fmt.Printf(<span class="string">"any %v is a string type"</span>, v)</div><div class="line">	<span class="keyword">case</span> specialString:</div><div class="line">		fmt.Printf(<span class="string">"any %v is a special String!"</span>, v)</div><div class="line">	<span class="keyword">default</span>:</div><div class="line">		fmt.Println(<span class="string">"unknown type!"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-9-2-构建通过类型或者包含不通类型变量的数组"><a href="#11-9-2-构建通过类型或者包含不通类型变量的数组" class="headerlink" title="11.9.2 构建通过类型或者包含不通类型变量的数组"></a>11.9.2 构建通过类型或者包含不通类型变量的数组</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Element <span class="keyword">interface</span>&#123;&#125;</div><div class="line"><span class="keyword">type</span> Vector <span class="keyword">struct</span> &#123;</div><div class="line">    a []Element</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Vector里面可以存放任何类型的变量</li>
<li>Vector中存储的所有元素都是Element类型，得到袁术类型需要用类型断言</li>
</ul>
<h3 id="11-9-3-复制数据切片到空接口切片"><a href="#11-9-3-复制数据切片到空接口切片" class="headerlink" title="11.9.3 复制数据切片到空接口切片"></a>11.9.3 复制数据切片到空接口切片</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dataSlice []myType = FuncReturnSlice()</div><div class="line"><span class="keyword">var</span> interfaceSlice []<span class="keyword">interface</span>&#123;&#125; = <span class="built_in">make</span>([]<span class="keyword">interface</span>&#123;&#125;, <span class="built_in">len</span>(dataSlice))</div><div class="line"><span class="keyword">for</span> idx, val := <span class="keyword">range</span> dataSlice &#123;</div><div class="line">    interfaceSlice[i] = d</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-9-4-通用类型的节点数据结构"><a href="#11-9-4-通用类型的节点数据结构" class="headerlink" title="11.9.4 通用类型的节点数据结构"></a>11.9.4 通用类型的节点数据结构</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Node <span class="keyword">struct</span> &#123;</div><div class="line">    left *Node</div><div class="line">    data <span class="keyword">interface</span>&#123;]</div><div class="line">    right *Node</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewNode</span><span class="params">(left, right *Node)</span> *<span class="title">Node</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> &amp;Node&#123;left, <span class="literal">nil</span>, right&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(n *Node)</span> <span class="title">SetData</span><span class="params">(data <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</div><div class="line">    n.data = data</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-9-5-接口到接口"><a href="#11-9-5-接口到接口" class="headerlink" title="11.9.5 接口到接口"></a>11.9.5 接口到接口</h3><ul>
<li>一个接口的值可以赋值给另一个接口，只要底层实现了必要的方法</li>
<li>运行时才会检查两个接口是否可以进行赋值，不可以会报错</li>
</ul>
<h2 id="11-10-反射包"><a href="#11-10-反射包" class="headerlink" title="11.10 反射包"></a>11.10 反射包</h2><ul>
<li>反射是用程序检查其所拥有的结构，类型的一种能力</li>
<li>反射可以在运行时检查类型和变量，比如大小，方法并动态的调用这些方法</li>
<li>反射包中Type用来表示一个Go类型，Value为go提供了反射的接口</li>
<li><code>reflect.TypeOf reflect.ValueOf</code>检查对象的类型和值</li>
<li>反射可以从接口值反射到对象，也可以从对象反射回接口</li>
<li>反射包中的常量</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> (</div><div class="line">	Invalid Kind = <span class="literal">iota</span></div><div class="line">	Bool</div><div class="line">	Int</div><div class="line">	Int8</div><div class="line">	Int16</div><div class="line">	Int32</div><div class="line">	Int64</div><div class="line">	Uint</div><div class="line">	Uint8</div><div class="line">	Uint16</div><div class="line">	Uint32</div><div class="line">	Uint64</div><div class="line">	Uintptr</div><div class="line">	Float32</div><div class="line">	Float64</div><div class="line">	Complex64</div><div class="line">	Complex128</div><div class="line">	Array</div><div class="line">	Chan</div><div class="line">	Func</div><div class="line">	Interface</div><div class="line">	Map</div><div class="line">	Ptr</div><div class="line">	Slice</div><div class="line">	String</div><div class="line">	Struct</div><div class="line">	UnsafePointer</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>Kind方法总是返回底层类型</li>
</ul>
<h3 id="11-10-2-通过反射修改值"><a href="#11-10-2-通过反射修改值" class="headerlink" title="11.10.2 通过反射修改值"></a>11.10.2 通过反射修改值</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x <span class="keyword">float64</span> = <span class="number">3.4</span></div><div class="line">v := reflect.ValueOf(x)</div><div class="line">fmt.Println(<span class="string">"settablity of v:"</span>, v.Canset())</div><div class="line">v = reflect.ValueOf(&amp;x)</div><div class="line">v = v.Elem()</div><div class="line">v.SetFloat(<span class="number">3.1415</span>)</div></pre></td></tr></table></figure>
<ul>
<li>NumField()方法返回结构内的字段数量，通过for循环用索引取得每个字段的值Field<h3 id="11-10-3-反射结构"><a href="#11-10-3-反射结构" class="headerlink" title="11.10.3 反射结构"></a>11.10.3 反射结构</h3></li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> NotknownType <span class="keyword">struct</span> &#123;</div><div class="line">	s1, s2, s3 <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(n NotknownType)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> n.s1 + <span class="string">" - "</span> + n.s2 + <span class="string">" - "</span> + n.s3</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// variable to investigate:</span></div><div class="line"><span class="keyword">var</span> secret <span class="keyword">interface</span>&#123;&#125; = NotknownType&#123;<span class="string">"Ada"</span>, <span class="string">"Go"</span>, <span class="string">"Oberon"</span>&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	value := reflect.ValueOf(secret) <span class="comment">// &lt;main.NotknownType Value&gt;</span></div><div class="line">	typ := reflect.TypeOf(secret)    <span class="comment">// main.NotknownType</span></div><div class="line">	<span class="comment">// alternative:</span></div><div class="line">	<span class="comment">//typ := value.Type()  // main.NotknownType</span></div><div class="line">	fmt.Println(typ)</div><div class="line">	knd := value.Kind() <span class="comment">// struct</span></div><div class="line">	fmt.Println(knd)</div><div class="line"></div><div class="line">	<span class="comment">// iterate through the fields of the struct:</span></div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; value.NumField(); i++ &#123;</div><div class="line">		fmt.Printf(<span class="string">"Field %d: %v\n"</span>, i, value.Field(i))</div><div class="line">		<span class="comment">// error: panic: reflect.Value.SetString using value obtained using unexported field</span></div><div class="line">		<span class="comment">//value.Field(i).SetString("C#")</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// call the first method, which is String():</span></div><div class="line">	results := value.Method(<span class="number">0</span>).Call(<span class="literal">nil</span>)</div><div class="line">	fmt.Println(results) <span class="comment">// [Ada - Go - Oberon]</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>结构体中只有被导出字段(大写的字段)才是可以设置的</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</div><div class="line">	A <span class="keyword">int</span></div><div class="line">	B <span class="keyword">string</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	t := T&#123;<span class="number">23</span>, <span class="string">"skidoo"</span>&#125;</div><div class="line">	s := reflect.ValueOf(&amp;t).Elem()</div><div class="line">	typeOfT := s.Type()</div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; s.NumField(); i++ &#123;</div><div class="line">		f := s.Field(i)</div><div class="line">		fmt.Printf(<span class="string">"%d: %s %s = %v\n"</span>, i,</div><div class="line">			typeOfT.Field(i).Name, f.Type(), f.Interface())</div><div class="line">	&#125;</div><div class="line">	s.Field(<span class="number">0</span>).SetInt(<span class="number">77</span>)</div><div class="line">	s.Field(<span class="number">1</span>).SetString(<span class="string">"Sunset Strip"</span>)</div><div class="line">	fmt.Println(<span class="string">"t is now"</span>, t)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="11-11-Printf和反射"><a href="#11-11-Printf和反射" class="headerlink" title="11.11 Printf和反射"></a>11.11 Printf和反射</h2><ul>
<li>Printf函数声明为</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Printf</span><span class="params">(format <span class="keyword">string</span>, args ... <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></div></pre></td></tr></table></figure>
<ul>
<li><code>...</code>为空接口类型，Printf可以知道每个参数的类型</li>
</ul>
<h2 id="11-12-接口和动态类型"><a href="#11-12-接口和动态类型" class="headerlink" title="11.12 接口和动态类型"></a>11.12 接口和动态类型</h2><h3 id="11-12-1-Go的动态类型"><a href="#11-12-1-Go的动态类型" class="headerlink" title="11.12.1 Go的动态类型"></a>11.12.1 Go的动态类型</h3><ul>
<li>go语言中数据和方法是松耦合的</li>
<li>go中的接口任何提供了接口方法实现代码的类型都隐式的实现了该接口</li>
<li>duck typing，能做什么比是什么更加重要</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> IDuck <span class="keyword">interface</span> &#123;</div><div class="line">    Quack()</div><div class="line">    Walk()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">DuckDance</span><span class="params">(duck IDuck)</span></span> &#123;</div><div class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++ &#123;</div><div class="line">        duck.Quack()</div><div class="line">        duck.Walk()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">type</span> Bird <span class="keyword">struct</span> &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Bird)</span> <span class="title">Quack</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(<span class="string">"bibibi"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Bird)</span> <span class="title">Walk</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(<span class="string">"gogogo"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    b := <span class="built_in">new</span>(Bird)</div><div class="line">    DuckDance(b)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-12-2-动态方法调用"><a href="#11-12-2-动态方法调用" class="headerlink" title="11.12.2 动态方法调用"></a>11.12.2 动态方法调用</h3><ul>
<li>当一个变量被赋值给一个接口类型的变量时，编译器会检查其是否实现了该接口的所有函数，空接口可以使用类型断言来判断</li>
<li>go提供了动态语言的优点，却没有其他动态语言在运行时随时会报错的缺点</li>
<li>Go 的接口提高了代码的分离度，改善了代码的复用性，使得代码开发过程中的设计模式更容易实现。用 Go 接口还能实现 依赖注入模式。</li>
</ul>
<h3 id="11-12-3-接口的提取"><a href="#11-12-3-接口的提取" class="headerlink" title="11.12.3 接口的提取"></a>11.12.3 接口的提取</h3><ul>
<li>接口的提取是非常有用的设计模式，可以减少需要的类型和方法数量</li>
<li>一些拥有共同行为的对象可以抽象出接口</li>
<li>整个设计可以持续演进，不用废弃之前的决定</li>
<li>类型要实现某个接口，本身不用改变，在类型上实现新的方法就可以</li>
</ul>
<h3 id="11-12-4-显示的指明类型实现了某个接口"><a href="#11-12-4-显示的指明类型实现了某个接口" class="headerlink" title="11.12.4 显示的指明类型实现了某个接口"></a>11.12.4 显示的指明类型实现了某个接口</h3><ul>
<li>结构体中添加具有描述性名字的方法</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Fooer <span class="keyword">interface</span> &#123;</div><div class="line">    Foo()</div><div class="line">    ImplementsFooer()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-12-5-空接口和函数重载"><a href="#11-12-5-空接口和函数重载" class="headerlink" title="11.12.5 空接口和函数重载"></a>11.12.5 空接口和函数重载</h3><ul>
<li>go语言是不允许函数重载的</li>
<li>go中通过将最后一个参数换成…interface{}来实现函数重载，允许传递任意数量任意类型的参数给函数</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fmt.Printf(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;) (n <span class="keyword">int</span>, err error)</div></pre></td></tr></table></figure>
<h3 id="11-12-6-接口的继承"><a href="#11-12-6-接口的继承" class="headerlink" title="11.12.6 接口的继承"></a>11.12.6 接口的继承</h3><ul>
<li>当一个类型嵌套另外一个类型的指针时，这个类型就可以使用另一个类型的所有方法</li>
<li>多态用的越多，代码就相对越少</li>
<li>类型可以通过继承多个接口来实现多重继承</li>
<li>添加新的接口是非常容易的，因为已有的类型不用变动，仅需要实现新的接口即可</li>
</ul>
<h3 id="11-13-go中面向对象总结"><a href="#11-13-go中面向对象总结" class="headerlink" title="11.13 go中面向对象总结"></a>11.13 go中面向对象总结</h3><ul>
<li>go中没有类，而是松耦合的类型，方法对接口的实现</li>
<li>封装：go的可见层级为两个，包范围内可见和全局可见</li>
<li>继承：用组合实现，内嵌一个或者多个想要的行为的类型，可以多重嵌套</li>
<li>多态：用接口实现，某个类型的实例可以赋值给它所实现的任意接口类型的变量。类型和接口是松耦合的，多重继承可以通过实现多个接口来实现。</li>
</ul>
<h3 id="11-14-结构体、集合和高阶函数"><a href="#11-14-结构体、集合和高阶函数" class="headerlink" title="11.14 结构体、集合和高阶函数"></a>11.14 结构体、集合和高阶函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// cars.go</span></div><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">type</span> Any <span class="keyword">interface</span>&#123;&#125;</div><div class="line"><span class="keyword">type</span> Car <span class="keyword">struct</span> &#123;</div><div class="line">	Model   	<span class="keyword">string</span></div><div class="line">	Manufacturer	<span class="keyword">string</span></div><div class="line">	BuildYear	<span class="keyword">int</span></div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">type</span> Cars []*Car</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="comment">// make some cars:</span></div><div class="line">	ford := &amp;Car&#123;<span class="string">"Fiesta"</span>,<span class="string">"Ford"</span>, <span class="number">2008</span>&#125;</div><div class="line">	bmw  := &amp;Car&#123;<span class="string">"XL 450"</span>, <span class="string">"BMW"</span>, <span class="number">2011</span>&#125;</div><div class="line">	merc := &amp;Car&#123;<span class="string">"D600"</span>, <span class="string">"Mercedes"</span>, <span class="number">2009</span>&#125;</div><div class="line">	bmw2 := &amp;Car&#123;<span class="string">"X 800"</span>, <span class="string">"BMW"</span>, <span class="number">2008</span>&#125;</div><div class="line">	<span class="comment">// query:</span></div><div class="line">	allCars := Cars([]*Car&#123;ford, bmw, merc, bmw2&#125;)</div><div class="line">	allNewBMWs := allCars.FindAll(<span class="function"><span class="keyword">func</span><span class="params">(car *Car)</span> <span class="title">bool</span></span> &#123;</div><div class="line">      <span class="keyword">return</span> (car.Manufacturer == <span class="string">"BMW"</span>) &amp;&amp; (car.BuildYear &gt; <span class="number">2010</span>)</div><div class="line">	&#125;)</div><div class="line">	fmt.Println(<span class="string">"AllCars: "</span>, allCars)</div><div class="line">	fmt.Println(<span class="string">"New BMWs: "</span>, allNewBMWs)</div><div class="line">	<span class="comment">//</span></div><div class="line">	manufacturers := []<span class="keyword">string</span>&#123;<span class="string">"Ford"</span>, <span class="string">"Aston Martin"</span>, <span class="string">"Land Rover"</span>, <span class="string">"BMW"</span>, <span class="string">"Jaguar"</span>&#125;</div><div class="line">	sortedAppender, sortedCars := MakeSortedAppender(manufacturers)</div><div class="line">	allCars.Process(sortedAppender)</div><div class="line">	fmt.Println(<span class="string">"Map sortedCars: "</span>, sortedCars)</div><div class="line">    BMWCount := <span class="built_in">len</span>(sortedCars[<span class="string">"BMW"</span>])</div><div class="line">	fmt.Println(<span class="string">"We have "</span>, BMWCount, <span class="string">" BMWs"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Process all cars with the given function f:</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cs Cars)</span> <span class="title">Process</span><span class="params">(f <span class="keyword">func</span>(car *Car)</span>)</span> &#123;</div><div class="line">     <span class="keyword">for</span> _, c := <span class="keyword">range</span> cs &#123;</div><div class="line">         f(c)</div><div class="line">     &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Find all cars matching a given criteria.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cs Cars)</span> <span class="title">FindAll</span><span class="params">(f <span class="keyword">func</span>(car *Car)</span> <span class="title">bool</span>) <span class="title">Cars</span></span> &#123;</div><div class="line">    cars := <span class="built_in">make</span>([]*Car, <span class="number">0</span>)</div><div class="line"></div><div class="line">    cs.Process(<span class="function"><span class="keyword">func</span><span class="params">(c *Car)</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> f(c) &#123;</div><div class="line">            cars = <span class="built_in">append</span>(cars, c)</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> cars</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Process cars and create new data.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cs Cars)</span> <span class="title">Map</span><span class="params">(f <span class="keyword">func</span>(car *Car)</span> <span class="title">Any</span>) []<span class="title">Any</span></span> &#123;</div><div class="line">       result := <span class="built_in">make</span>([]Any, <span class="number">0</span>)</div><div class="line">       ix := <span class="number">0</span></div><div class="line">       cs.Process(<span class="function"><span class="keyword">func</span><span class="params">(c *Car)</span></span> &#123;</div><div class="line">           result[ix] = f(c)</div><div class="line">           ix++</div><div class="line">       &#125;)</div><div class="line">       <span class="keyword">return</span> result</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">MakeSortedAppender</span><span class="params">(manufacturers []<span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">func</span>(car *Car)</span>, <span class="title">map</span>[<span class="title">string</span>]<span class="title">Cars</span>)</span> &#123;</div><div class="line">     <span class="comment">// Prepare maps of sorted cars.</span></div><div class="line">       sortedCars := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]Cars)</div><div class="line"></div><div class="line">       <span class="keyword">for</span> _, m := <span class="keyword">range</span> manufacturers &#123;</div><div class="line">           sortedCars[m] = <span class="built_in">make</span>([]*Car, <span class="number">0</span>)</div><div class="line">       &#125;</div><div class="line">       sortedCars[<span class="string">"Default"</span>] = <span class="built_in">make</span>([]*Car, <span class="number">0</span>)</div><div class="line"></div><div class="line">       <span class="comment">// Prepare appender function:</span></div><div class="line">       appender := <span class="function"><span class="keyword">func</span><span class="params">(c *Car)</span></span> &#123;</div><div class="line">           <span class="keyword">if</span> _, ok := sortedCars[c.Manufacturer]; ok &#123;</div><div class="line">               sortedCars[c.Manufacturer] = <span class="built_in">append</span>(sortedCars[c.Manufacturer], c)</div><div class="line">           &#125; <span class="keyword">else</span> &#123;</div><div class="line">               sortedCars[<span class="string">"Default"</span>] = <span class="built_in">append</span>(sortedCars[<span class="string">"Default"</span>], c)</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> appender, sortedCars</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* Output:</span></div><div class="line"><span class="comment">AllCars:  [0xf8400038a0 0xf840003bd0 0xf840003ba0 0xf840003b70]</span></div><div class="line"><span class="comment">New BMWs:  [0xf840003bd0]</span></div><div class="line"><span class="comment">Map sortedCars:  map[Default:[0xf840003ba0] Jaguar:[] Land Rover:[] BMW:[0xf840003bd0 0xf840003b70] Aston Martin:[] Ford:[0xf8400038a0]]</span></div><div class="line"><span class="comment">We have  2  BMWs</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Donate comment here</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="cdx 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="cdx 支付宝"/>
        <p>支付宝</p>
      </div>
    

    
      <div id="bitcoin" style="display: inline-block">
        <img id="bitcoin_qr" src="/images/bitcoin.png" alt="cdx 比特币"/>
        <p>比特币</p>
      </div>
    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/go/" rel="tag"># go</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/21/设计模式简介/" rel="next" title="设计模式简介">
                <i class="fa fa-chevron-left"></i> 设计模式简介
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/16/the-way-to-go-advanced/" rel="prev" title="the way to go advaced">
                the way to go advaced <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.gif"
              alt="cdx" />
          
            <p class="site-author-name" itemprop="name">cdx</p>
            <p class="site-description motion-element" itemprop="description">Be a better man!</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">85</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/cdx0312" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:cdxu0312@outlook.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第一章-Go语言的起源发展与普及"><span class="nav-number">2.</span> <span class="nav-text">第一章 Go语言的起源发展与普及</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#起源与发展"><span class="nav-number">2.1.</span> <span class="nav-text">起源与发展</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#语言的主要特性和发展的环境和影响因素"><span class="nav-number">2.2.</span> <span class="nav-text">语言的主要特性和发展的环境和影响因素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指导设计原则"><span class="nav-number">2.3.</span> <span class="nav-text">指导设计原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#语言特性"><span class="nav-number">2.4.</span> <span class="nav-text">语言特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#语言用途"><span class="nav-number">2.5.</span> <span class="nav-text">语言用途</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特性缺失"><span class="nav-number">2.6.</span> <span class="nav-text">特性缺失</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#小结"><span class="nav-number">2.7.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第二章-安装与运行环境"><span class="nav-number">3.</span> <span class="nav-text">第二章 安装与运行环境</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#平台与架构"><span class="nav-number">3.1.</span> <span class="nav-text">平台与架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go环境变量"><span class="nav-number">3.2.</span> <span class="nav-text">Go环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux安装go"><span class="nav-number">3.3.</span> <span class="nav-text">Linux安装go</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装目录"><span class="nav-number">3.4.</span> <span class="nav-text">安装目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#go-runtime"><span class="nav-number">3.5.</span> <span class="nav-text">go runtime</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第三章-Go开发环境的基本要求"><span class="nav-number">4.</span> <span class="nav-text">第三章 Go开发环境的基本要求</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#调试器"><span class="nav-number">4.1.</span> <span class="nav-text">调试器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#格式化代码-gofmt"><span class="nav-number">4.2.</span> <span class="nav-text">格式化代码 - gofmt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码文档-go-doc"><span class="nav-number">4.3.</span> <span class="nav-text">代码文档 - go doc</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第四章-语言的核心结构和技术"><span class="nav-number">5.</span> <span class="nav-text">第四章 语言的核心结构和技术</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件名、关键字与标识符"><span class="nav-number">5.1.</span> <span class="nav-text">文件名、关键字与标识符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go程序的基本结构要素"><span class="nav-number">5.2.</span> <span class="nav-text">Go程序的基本结构要素</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#包-package"><span class="nav-number">5.2.1.</span> <span class="nav-text">包-package</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数"><span class="nav-number">5.2.2.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注释"><span class="nav-number">5.2.3.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型"><span class="nav-number">5.2.4.</span> <span class="nav-text">类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go程序的一般结构"><span class="nav-number">5.2.5.</span> <span class="nav-text">go程序的一般结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型抓换"><span class="nav-number">5.2.6.</span> <span class="nav-text">类型抓换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常量"><span class="nav-number">5.3.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">5.4.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#值类型和引用类型"><span class="nav-number">5.4.1.</span> <span class="nav-text">值类型和引用类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印"><span class="nav-number">5.4.2.</span> <span class="nav-text">打印</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#赋值操作符"><span class="nav-number">5.4.3.</span> <span class="nav-text">:=赋值操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#init函数"><span class="nav-number">5.4.4.</span> <span class="nav-text">init函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本类型和运算符"><span class="nav-number">5.5.</span> <span class="nav-text">基本类型和运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#bool类型"><span class="nav-number">5.5.1.</span> <span class="nav-text">bool类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数字类型"><span class="nav-number">5.5.2.</span> <span class="nav-text">数字类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#运算符优先级"><span class="nav-number">5.5.3.</span> <span class="nav-text">运算符优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型别名"><span class="nav-number">5.5.4.</span> <span class="nav-text">类型别名</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">5.6.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#strings和strconv包"><span class="nav-number">5.7.</span> <span class="nav-text">strings和strconv包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#前缀和后缀"><span class="nav-number">5.7.1.</span> <span class="nav-text">前缀和后缀</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串包含关系"><span class="nav-number">5.7.2.</span> <span class="nav-text">字符串包含关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断子字符串或字符在父字符串中出现的位置"><span class="nav-number">5.7.3.</span> <span class="nav-text">判断子字符串或字符在父字符串中出现的位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串替换"><span class="nav-number">5.7.4.</span> <span class="nav-text">字符串替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重复字符串"><span class="nav-number">5.7.5.</span> <span class="nav-text">重复字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改字符串大小写"><span class="nav-number">5.7.6.</span> <span class="nav-text">修改字符串大小写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修剪字符串"><span class="nav-number">5.7.7.</span> <span class="nav-text">修剪字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分割字符串"><span class="nav-number">5.7.8.</span> <span class="nav-text">分割字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拼接slice到字符串"><span class="nav-number">5.7.9.</span> <span class="nav-text">拼接slice到字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从字符串中读取内容"><span class="nav-number">5.7.10.</span> <span class="nav-text">从字符串中读取内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串和其他类型的转换"><span class="nav-number">5.7.11.</span> <span class="nav-text">字符串和其他类型的转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#时间和日期"><span class="nav-number">5.8.</span> <span class="nav-text">时间和日期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针"><span class="nav-number">5.9.</span> <span class="nav-text">指针</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第五章-控制结构"><span class="nav-number">6.</span> <span class="nav-text">第五章 控制结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-if-else结构"><span class="nav-number">6.1.</span> <span class="nav-text">5.1 if-else结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试多返回值函数的错误"><span class="nav-number">6.2.</span> <span class="nav-text">测试多返回值函数的错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#switch结构"><span class="nav-number">6.3.</span> <span class="nav-text">switch结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for结构"><span class="nav-number">6.4.</span> <span class="nav-text">for结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#break与continue"><span class="nav-number">6.5.</span> <span class="nav-text">break与continue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#标签与goto"><span class="nav-number">6.6.</span> <span class="nav-text">标签与goto</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第六章-函数"><span class="nav-number">7.</span> <span class="nav-text">第六章 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-简介"><span class="nav-number">7.1.</span> <span class="nav-text">6.1 简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-函数参数与返回值"><span class="nav-number">7.2.</span> <span class="nav-text">6.2 函数参数与返回值</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#命名的返回值"><span class="nav-number">7.2.1.</span> <span class="nav-text">命名的返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空白符"><span class="nav-number">7.2.2.</span> <span class="nav-text">空白符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#改变外部变量"><span class="nav-number">7.2.3.</span> <span class="nav-text">改变外部变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-传递变长参数"><span class="nav-number">7.3.</span> <span class="nav-text">6.3 传递变长参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-defer和追踪"><span class="nav-number">7.4.</span> <span class="nav-text">6.4 defer和追踪</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-内置函数"><span class="nav-number">7.5.</span> <span class="nav-text">6.5 内置函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-递归函数"><span class="nav-number">7.6.</span> <span class="nav-text">6.6 递归函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-将函数作为参数"><span class="nav-number">7.7.</span> <span class="nav-text">6.7 将函数作为参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-8-闭包"><span class="nav-number">7.7.1.</span> <span class="nav-text">6.8 闭包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#闭包应用-将函数作为返回值"><span class="nav-number">7.8.</span> <span class="nav-text">闭包应用-将函数作为返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用闭包调试"><span class="nav-number">7.9.</span> <span class="nav-text">使用闭包调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算函数执行时间"><span class="nav-number">7.10.</span> <span class="nav-text">计算函数执行时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通过内存缓存来提升性能"><span class="nav-number">7.11.</span> <span class="nav-text">通过内存缓存来提升性能</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第七章-数组和切片"><span class="nav-number">8.</span> <span class="nav-text">第七章 数组和切片</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#声明和初始化"><span class="nav-number">8.1.</span> <span class="nav-text">声明和初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组常量"><span class="nav-number">8.2.</span> <span class="nav-text">数组常量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多维数组"><span class="nav-number">8.3.</span> <span class="nav-text">多维数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将数组传递给函数"><span class="nav-number">8.4.</span> <span class="nav-text">将数组传递给函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-切片"><span class="nav-number">8.5.</span> <span class="nav-text">7.2 切片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#将切片传递给函数"><span class="nav-number">8.5.1.</span> <span class="nav-text">将切片传递给函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#make创建切片"><span class="nav-number">8.5.2.</span> <span class="nav-text">make创建切片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#make和new的区别"><span class="nav-number">8.5.3.</span> <span class="nav-text">make和new的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bytes包"><span class="nav-number">8.5.4.</span> <span class="nav-text">bytes包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-for-range结构"><span class="nav-number">8.6.</span> <span class="nav-text">7.3 for-range结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-切片重组"><span class="nav-number">8.7.</span> <span class="nav-text">7.4 切片重组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-5-切片的复制与追加"><span class="nav-number">8.8.</span> <span class="nav-text">7.5 切片的复制与追加</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-6-字符串、数组和切片的应用"><span class="nav-number">8.9.</span> <span class="nav-text">7.6 字符串、数组和切片的应用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第八章-Map"><span class="nav-number">9.</span> <span class="nav-text">第八章 Map</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-声明和初始化"><span class="nav-number">9.1.</span> <span class="nav-text">8.1 声明和初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#声明"><span class="nav-number">9.1.1.</span> <span class="nav-text">声明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试键值对是否存在及删除元素"><span class="nav-number">9.2.</span> <span class="nav-text">测试键值对是否存在及删除元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#map类型的切片"><span class="nav-number">9.3.</span> <span class="nav-text">map类型的切片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-map排序"><span class="nav-number">9.4.</span> <span class="nav-text">8.5 map排序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第九章-包-package"><span class="nav-number">10.</span> <span class="nav-text">第九章 包 package</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-标准库概述"><span class="nav-number">10.1.</span> <span class="nav-text">9.1 标准库概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-regexp包"><span class="nav-number">10.2.</span> <span class="nav-text">9.2 regexp包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-锁和sync包"><span class="nav-number">10.3.</span> <span class="nav-text">9.3 锁和sync包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#精密计算和big包"><span class="nav-number">10.4.</span> <span class="nav-text">精密计算和big包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义包和可见性"><span class="nav-number">10.5.</span> <span class="nav-text">自定义包和可见性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#godoc"><span class="nav-number">10.6.</span> <span class="nav-text">godoc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#go-install"><span class="nav-number">10.7.</span> <span class="nav-text">go install</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git打包和安装"><span class="nav-number">10.8.</span> <span class="nav-text">git打包和安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外部库的使用"><span class="nav-number">10.9.</span> <span class="nav-text">外部库的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第十章-结构和方法"><span class="nav-number">11.</span> <span class="nav-text">第十章 结构和方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1-结构体定义"><span class="nav-number">11.1.</span> <span class="nav-text">10.1 结构体定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-2-使用工厂方法创建结构体实例"><span class="nav-number">11.2.</span> <span class="nav-text">10.2 使用工厂方法创建结构体实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-3-使用自定义包中的结构体"><span class="nav-number">11.3.</span> <span class="nav-text">10.3 使用自定义包中的结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-4-带标签的结构体"><span class="nav-number">11.4.</span> <span class="nav-text">10.4 带标签的结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-5-匿名字段和内嵌结构体"><span class="nav-number">11.5.</span> <span class="nav-text">10.5 匿名字段和内嵌结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-6-方法"><span class="nav-number">11.6.</span> <span class="nav-text">10.6 方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#函数和方法的区别"><span class="nav-number">11.6.1.</span> <span class="nav-text">函数和方法的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指针或值作为接收者"><span class="nav-number">11.6.2.</span> <span class="nav-text">指针或值作为接收者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内嵌类型的方法和继承"><span class="nav-number">11.6.3.</span> <span class="nav-text">内嵌类型的方法和继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何在类型中嵌入功能"><span class="nav-number">11.6.4.</span> <span class="nav-text">如何在类型中嵌入功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多重继承"><span class="nav-number">11.6.5.</span> <span class="nav-text">多重继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他语言和GO的类型和方法的比较"><span class="nav-number">11.6.6.</span> <span class="nav-text">其他语言和GO的类型和方法的比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-7-类型的String方法和格式化描述符"><span class="nav-number">11.7.</span> <span class="nav-text">10.7 类型的String方法和格式化描述符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-8-垃圾回收和SetFinalizer"><span class="nav-number">11.8.</span> <span class="nav-text">10.8 垃圾回收和SetFinalizer</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第11章-接口与反射"><span class="nav-number">12.</span> <span class="nav-text">第11章 接口与反射</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2接口嵌套接口"><span class="nav-number">12.1.</span> <span class="nav-text">11.2接口嵌套接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-3-类型断言：如何检测和转换接口变量的类型"><span class="nav-number">12.2.</span> <span class="nav-text">11.3 类型断言：如何检测和转换接口变量的类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-4-类型判断-type-switch"><span class="nav-number">12.3.</span> <span class="nav-text">11.4 类型判断: type-switch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-5-测试一个值是否实现了某个接口"><span class="nav-number">12.4.</span> <span class="nav-text">11.5 测试一个值是否实现了某个接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-6-使用方法集与接口"><span class="nav-number">12.5.</span> <span class="nav-text">11.6 使用方法集与接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-7-Sorter接口排序"><span class="nav-number">12.6.</span> <span class="nav-text">11.7 Sorter接口排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-8-读和写"><span class="nav-number">12.7.</span> <span class="nav-text">11.8 读和写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-9-空接口"><span class="nav-number">12.8.</span> <span class="nav-text">11.9 空接口</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义"><span class="nav-number">12.8.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-9-2-构建通过类型或者包含不通类型变量的数组"><span class="nav-number">12.8.2.</span> <span class="nav-text">11.9.2 构建通过类型或者包含不通类型变量的数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-9-3-复制数据切片到空接口切片"><span class="nav-number">12.8.3.</span> <span class="nav-text">11.9.3 复制数据切片到空接口切片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-9-4-通用类型的节点数据结构"><span class="nav-number">12.8.4.</span> <span class="nav-text">11.9.4 通用类型的节点数据结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-9-5-接口到接口"><span class="nav-number">12.8.5.</span> <span class="nav-text">11.9.5 接口到接口</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-10-反射包"><span class="nav-number">12.9.</span> <span class="nav-text">11.10 反射包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-10-2-通过反射修改值"><span class="nav-number">12.9.1.</span> <span class="nav-text">11.10.2 通过反射修改值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-10-3-反射结构"><span class="nav-number">12.9.2.</span> <span class="nav-text">11.10.3 反射结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-11-Printf和反射"><span class="nav-number">12.10.</span> <span class="nav-text">11.11 Printf和反射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-12-接口和动态类型"><span class="nav-number">12.11.</span> <span class="nav-text">11.12 接口和动态类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-12-1-Go的动态类型"><span class="nav-number">12.11.1.</span> <span class="nav-text">11.12.1 Go的动态类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-12-2-动态方法调用"><span class="nav-number">12.11.2.</span> <span class="nav-text">11.12.2 动态方法调用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-12-3-接口的提取"><span class="nav-number">12.11.3.</span> <span class="nav-text">11.12.3 接口的提取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-12-4-显示的指明类型实现了某个接口"><span class="nav-number">12.11.4.</span> <span class="nav-text">11.12.4 显示的指明类型实现了某个接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-12-5-空接口和函数重载"><span class="nav-number">12.11.5.</span> <span class="nav-text">11.12.5 空接口和函数重载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-12-6-接口的继承"><span class="nav-number">12.11.6.</span> <span class="nav-text">11.12.6 接口的继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-13-go中面向对象总结"><span class="nav-number">12.11.7.</span> <span class="nav-text">11.13 go中面向对象总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-14-结构体、集合和高阶函数"><span class="nav-number">12.11.8.</span> <span class="nav-text">11.14 结构体、集合和高阶函数</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cdx</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
